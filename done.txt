## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### Task 39: üìö 9.1 Quest and Step Structure (Guild-Scoped, i18n)
- **–û–ø–∏—Å–∞–Ω–∏–µ**: GeneratedQuest, Questline, QuestStep models. MUST INCLUDE guild_id. Link to player OR party in this guild. Step structure with required_mechanics_json, abstract_goal_json, consequences_json. _i18n text fields.
- **–°—Ç–∞—Ç—É—Å**: –í—ã–ø–æ–ª–Ω–µ–Ω–æ.
- **–î–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
    - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–µ–ª–∏ `Questline`, `GeneratedQuest`, `QuestStep`, `PlayerQuestProgress` –≤ `src/models/quest.py`.
    - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –Ω–∞–ª–∏—á–∏–µ `guild_id` –≤ –∫–ª—é—á–µ–≤—ã—Ö –º–æ–¥–µ–ª—è—Ö.
    - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª–µ–π –¥–ª—è `required_mechanics_json`, `abstract_goal_json`, `consequences_json` –∏ –ø–æ–ª–µ–π `_i18n`.
    - –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã SQLAlchemy `relationship` –≤ –º–æ–¥–µ–ª—è—Ö –∫–≤–µ—Å—Ç–æ–≤ –∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ `quest_progress` –≤ –º–æ–¥–µ–ª—å `Player` (`src/models/player.py`) –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–≤—è–∑–µ–π –∏ –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è.
    - –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ Alembic –æ—Ç–ª–æ–∂–µ–Ω–æ (–±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º).
    - CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ `src/core/crud/crud_quest.py` –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã, –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–∏—Å—å.
    - –°–æ–∑–¥–∞–Ω—ã unit-—Ç–µ—Å—Ç—ã –¥–ª—è –º–æ–¥–µ–ª–µ–π –≤ `tests/models/test_quest.py`, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–µ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤, –∞—Ç—Ä–∏–±—É—Ç—ã –∏ –±–∞–∑–æ–≤—ã–µ —Å–≤—è–∑–∏.
    - –°–æ–∑–¥–∞–Ω—ã unit-—Ç–µ—Å—Ç—ã –¥–ª—è CRUD-–æ–ø–µ—Ä–∞—Ü–∏–π –≤ `tests/core/crud/test_crud_quest.py`, –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (create, get, update, remove) –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π –∫–≤–µ—Å—Ç–æ–≤.
- **–°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã**:
    - `src/models/quest.py`
    - `src/models/player.py`
    - `src/core/crud/crud_quest.py`
    - `tests/models/test_quest.py`
    - `tests/core/crud/test_crud_quest.py`
    - `AGENTS.md` (–æ–±–Ω–æ–≤–ª–µ–Ω –ª–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π)
    - `Tasks.txt` (–∑–∞–¥–∞—á–∞ —É–¥–∞–ª–µ–Ω–∞)
    - `done.txt` (–∑–∞–¥–∞—á–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞)

---
*(–ï—Å–ª–∏ –±—É–¥—É—Ç –¥—Ä—É–≥–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏, –æ–Ω–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—é–¥–∞)*
