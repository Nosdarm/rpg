## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ê–≥–µ–Ω—Ç–∞

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã:**

1.  **–ê–Ω–∞–ª–∏–∑ `AGENTS.md`:** –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ª—é–±–æ–π —Ä–∞–±–æ—Ç—ã –≤—Å–µ–≥–¥–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª (`AGENTS.md`).
2.  **–†–∞–±–æ—Ç–∞ —Å –∑–∞–¥–∞—á–∞–º–∏ –∏–∑ `Tasks.txt`:**
    *   –í–∑—è—Ç—å –æ–¥–Ω—É –∑–∞–¥–∞—á—É –∏–∑ —Ñ–∞–π–ª–∞ `Tasks.txt` –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É.
    *   –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–¥–∞—á—É.
    *   –ü–æ–∫—Ä—ã—Ç—å —Ç–µ—Å—Ç–∞–º–∏ (–µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è).
    *   –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
        *   –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã.
        *   –ï—Å–ª–∏ —Ç–µ—Å—Ç –ø–∞–¥–∞–µ—Ç, —Å–Ω–∞—á–∞–ª–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É, –∑–∞—Ç–µ–º –ø–æ–≤—Ç–æ—Ä–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç.
        *   –ü–æ–≤—Ç–æ—Ä—è—Ç—å –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≤—Å–µ —Ç–µ—Å—Ç—ã, –æ—Ç–Ω–æ—Å—è—â–∏–µ—Å—è –∫ –∑–∞–¥–∞—á–µ, –Ω–µ –ø—Ä–æ–π–¥—É—Ç.
    *   –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
        *   –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É –∏–∑ —Ñ–∞–π–ª–∞ `Tasks.txt`.
        *   –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ (–¥–æ–±–∞–≤–∏—Ç—å) –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ –≤ —Ñ–∞–π–ª `done.txt`.
3.  **–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:**
    *   –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ –±—É–¥–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ –±—É–¥—É—â–µ–º, —Å–æ–∑–¥–∞—Ç—å –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ (`AGENTS.md`) —Å–µ–∫—Ü–∏—é "–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏".
    *   –£–∫–∞–∑–∞—Ç—å –≤ —ç—Ç–æ–π —Å–µ–∫—Ü–∏–∏ –∑–∞–¥–∞—á—É, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –±—É–¥–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å, –∏ —É–∫–∞–∑–∞—Ç—å, –∫–æ–≥–¥–∞ –∏–º–µ–Ω–Ω–æ —ç—Ç–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —Å–¥–µ–ª–∞—Ç—å.
4.  **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `AGENTS.md` –∏ –ö–æ–º–º–∏—Ç:**
    *   –ï—Å–ª–∏ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø–æ —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–µ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∏, –æ–±–Ω–æ–≤–∏—Ç—å `AGENTS.md` –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ (–≤ —Å–µ–∫—Ü–∏–∏ "–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π").
    *   –°–¥–µ–ª–∞—Ç—å –∫–æ–º–º–∏—Ç —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–π.
5.  **–õ–æ–∫–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å –≤ `AGENTS.md`:**
    *   `AGENTS.md` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –≤–∞—à–∞ –ª–æ–∫–∞–ª—å–Ω–∞—è –ø–∞–º—è—Ç—å –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –ø—Ä–∏–Ω—è—Ç—ã—Ö —Ä–µ—à–µ–Ω–∏–π.
    *   –ö–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ, –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç–æ–µ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏, –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∑–∞–ø–∏—Å–∞–Ω–æ –≤ `AGENTS.md` –≤ —Å–µ–∫—Ü–∏–∏ "–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π" –ø–æ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–æ–º —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏.
6.  **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏:**
    *   –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è.
    *   –≠—Ç–æ—Ç –ø–ª–∞–Ω –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –≤ —Å–µ–∫—Ü–∏—é "–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω" –≤ `AGENTS.md`. –ü–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –∑–∞–¥–∞—á–∏ —ç—Ç–∞ —Å–µ–∫—Ü–∏—è –æ—á–∏—â–∞–µ—Ç—Å—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–¥–∞—á–∏.
7.  **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π:**
    *   –Ø–≤–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –≤ —Ö–æ–¥–µ —Ç–µ–∫—É—â–µ–≥–æ –¥–∏–∞–ª–æ–≥–∞, –∏–º–µ—é—Ç –Ω–∞–∏–≤—ã—Å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç.
    *   –ó–∞—Ç–µ–º —Å–ª–µ–¥—É—é—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∏–∑ —ç—Ç–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞ ("–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ê–≥–µ–Ω—Ç–∞").

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ `AGENTS.md` (–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è):**

*   **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ê–≥–µ–Ω—Ç–∞:** (–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª)
*   **–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω:**
*(–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–ª–∞–Ω–æ–º –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–¥–∞—á–∏)*
*   **–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:**
    *(–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω—è—Ç—å—Å—è, –µ—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–∞–¥–∞—á–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ –±—É–¥—É—â–µ–º)*
*   **–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π:** –•—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞–¥–∞—á–∏, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ –∑–∞–¥–∞—á–∞–º. –ó–∞–¥–∞—á–∏ –Ω—É–º–µ—Ä—É—é—Ç—Å—è.

---
## –¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω
1. **–ü—Ä–æ—á–∏—Ç–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `AGENTS.md`**.
2. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ `## —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏`**:
    a. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –º–µ—Ç–æ–∫ –¥–ª—è –∫–∞–∂–¥–æ–π –≤—ã—è–≤–ª–µ–Ω–Ω–æ–π –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∏–∑ —Å–ª–µ–¥—É—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞: `[–ó–ê–ì–õ–£–®–ö–ê]`, `[–ù–ï–ü–û–õ–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø]`, `[–û–¢–°–£–¢–°–¢–í–£–ï–¢ –§–£–ù–ö–¶–ò–û–ù–ê–õ]`, `[–û–¢–ö–õ–û–ù–ï–ù–ò–ï –û–¢ –ü–õ–ê–ù–ê]`, `[TODO]`, `[–¢–ò–ü –î–ê–ù–ù–´–•]`, `[–£–ü–£–©–ï–ù–ò–ï]`.
    b. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∏, –¥–æ–±–∞–≤–∏–≤ –º–µ—Ç–∫—É(–∏) –≤ –Ω–∞—á–∞–ª–æ –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã.
3. **–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è `AGENTS.md`**:
    a. –í–∫–ª—é—á–∏—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏ (`–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ê–≥–µ–Ω—Ç–∞`, `–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω`, `–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏` –∏ —Ç.–¥.).
    b. –ó–∞–º–µ–Ω–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ä–∞–∑–¥–µ–ª `## —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏` –Ω–∞ –Ω–æ–≤—ã–π, —Ä–∞–∑–º–µ—á–µ–Ω–Ω—ã–π –º–µ—Ç–∫–∞–º–∏.
    c. –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –≤ `## –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π`, –æ–ø–∏—Å—ã–≤–∞—é—â—É—é –ø—Ä–æ—Ü–µ—Å—Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ—Ç–æ–∫.
4. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `overwrite_file_with_block` –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏ `AGENTS.md`** –ø–æ–ª–Ω—ã–º –Ω–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º.
5. **–£–≤–µ–¥–æ–º–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `AGENTS.md` —Å –º–µ—Ç–∫–∞–º–∏.
---
## –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π

## –ò—Ç–µ—Ä–∞—Ü–∏—è 4: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ Party Commands (–°–µ—Å—Å–∏—è 2025-07-11)
- **–î–∞—Ç–∞**: 2025-07-11
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –±–∞–∑–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–æ–π (`/party invite`, `/party kick`, `/party promote`, `/party view`) –∏–∑ Task 1.2.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **Task 1.2 (–°–∏—Å—Ç–µ–º–∞ –ò–≥—Ä–æ–∫–æ–≤/–ü–∞—Ä—Ç–∏–π - `party_commands.py` - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)**:
        - –ö–æ–º–∞–Ω–¥–∞ `/party invite`: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤ (–ª–∏–¥–µ—Ä –∏–ª–∏ —Å–æ–≥–ª–∞—Å–Ω–æ `party:invite_permissions`), –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Ü–µ–ª–∏ (–Ω–µ –≤ –≥—Ä—É–ø–ø–µ, –Ω–µ –±–æ—Ç, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –∏–≥—Ä–µ), –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ –ø–æ–ª–Ω–æ—Ç—É –≥—Ä—É–ø–ø—ã (`party:max_size`). –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç DM-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Ü–µ–ª–∏. –î–æ–±–∞–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã.
        - –ö–æ–º–∞–Ω–¥–∞ `/party kick`: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤ (–ª–∏–¥–µ—Ä –∏–ª–∏ —Å–æ–≥–ª–∞—Å–Ω–æ `party:kick_permissions`), –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π —Ü–µ–ª–∏ (–≤ –≥—Ä—É–ø–ø–µ, –Ω–µ —Å–∞–º –∫–∏–∫–∞—é—â–∏–π, –Ω–µ –ª–∏–¥–µ—Ä). –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —É–¥–∞–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∞–≤—Ç–æ-—Ä–æ—Å–ø—É—Å–∫ –≥—Ä—É–ø–ø—ã. –î–æ–±–∞–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã.
        - –ö–æ–º–∞–Ω–¥–∞ `/party promote`: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –ø—Ä–∞–≤ (—Ç–æ–ª—å–∫–æ —Ç–µ–∫—É—â–∏–π –ª–∏–¥–µ—Ä), –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (—Ü–µ–ª—å - –¥—Ä—É–≥–æ–π —É—á–∞—Å—Ç–Ω–∏–∫ –≥—Ä—É–ø–ø—ã). –û–±–Ω–æ–≤–ª—è–µ—Ç –ª–∏–¥–µ—Ä–∞ –≤ –ë–î. –î–æ–±–∞–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã.
        - –ö–æ–º–∞–Ω–¥–∞ `/party view` (—Ç–∞–∫–∂–µ `info`): –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–π –≥—Ä—É–ø–ø–µ –∏–≥—Ä–æ–∫–∞ –∏–ª–∏ —É–∫–∞–∑–∞–Ω–Ω–æ–π –≥—Ä—É–ø–ø–µ (–ø–æ ID –∏–ª–∏ –∏–º–µ–Ω–∏). –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–º—è, –ª–∏–¥–µ—Ä–∞, —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –ª–æ–∫–∞—Ü–∏—é, –ø–æ–ª–∏—Ç–∏–∫—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –∏ –º–∏–Ω. —É—Ä–æ–≤–µ–Ω—å. –î–æ–±–∞–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã.
- **–°—Ç–∞—Ç—É—Å**: –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä—É–ø–ø–æ–π –≤ `party_commands.py` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã. Task 1.2 –≤—Å–µ –µ—â–µ –∏–º–µ–µ—Ç –∞—Å–ø–µ–∫—Ç—ã –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ª–æ–∂–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π, –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª `RuleConfig`). –§–∞–π–ª—ã `Tasks.txt` –∏ `done.txt` –Ω–µ –∏–∑–º–µ–Ω—è–ª–∏—Å—å.

## –ò—Ç–µ—Ä–∞—Ü–∏—è 3: –î–æ—Ä–∞–±–æ—Ç–∫–∞ Party Commands –∏ Movement Logic (–°–µ—Å—Å–∏—è 2025-07-11)
- **–î–∞—Ç–∞**: 2025-07-11
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ Task 1.3 (–õ–æ–≥–∏–∫–∞ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏—è) –∏ Task 1.2 (–ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Ç–∏–µ–π).
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **Task 1.3 (–õ–æ–≥–∏–∫–∞ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏—è - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)**:
        - –í `backend/core/movement_logic.py` (`execute_move_for_player_action`):
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤—ã—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ (–∏–∑ `connection_details` –∏–ª–∏ `RuleConfig` fallback) –¥–ª—è –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–∞ –¥–≤–∏–∂–µ–Ω–∏—è. `_update_entities_location` —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–º–µ–Ω—è–µ—Ç —ç—Ç–∏ –≤—ã—á–µ—Ç—ã. –î–æ–±–∞–≤–ª–µ–Ω TODO –¥–ª—è `party:movement:resource_source_policy`.
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ `highest_member_skill` –¥–ª—è `party:movement_skill_check_performer` (–Ω–∞ –æ—Å–Ω–æ–≤–µ –∞—Ç—Ä–∏–±—É—Ç–∞).
            - –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö –∏ —É—Å–ø–µ—Ö–µ –≤ `execute_move_for_player_action` –æ–±–µ—Ä–Ω—É—Ç—ã –≤ –≤—ã–∑–æ–≤—ã `_localize_movement_error` –¥–ª—è –±—É–¥—É—â–µ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏.
    - **Task 1.2 (–°–∏—Å—Ç–µ–º–∞ –ò–≥—Ä–æ–∫–æ–≤/–ü–∞—Ä—Ç–∏–π - `party_commands.py`)**:
        - –ö–æ–º–∞–Ω–¥–∞ `/party create`: –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏ –ø–∞—Ä—Ç–∏–∏ (regex –∏ –¥–ª–∏–Ω–∞ –∏–∑ `RuleConfig`) –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∏–º–µ–Ω–∏. –û–±–Ω–æ–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã.
        - –ö–æ–º–∞–Ω–¥–∞ `/party leave`: –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—ã—Ö–æ–¥–∞ –ª–∏–¥–µ—Ä–∞, –≤–∫–ª—é—á–∞—è –ø–µ—Ä–µ–¥–∞—á—É –ª–∏–¥–µ—Ä—Å—Ç–≤–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–æ, –ø–µ—Ä–≤–æ–º—É –≤ —Å–ø–∏—Å–∫–µ) –∏ —Ä–æ—Å–ø—É—Å–∫ –≥—Ä—É–ø–ø—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–∏—Ç–∏–∫ `party:leader_transfer_policy` –∏ `party:auto_disband_threshold` –∏–∑ `RuleConfig`. –û–±–Ω–æ–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã.
        - –ö–æ–º–∞–Ω–¥–∞ `/party disband`: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Ç–æ–ª—å–∫–æ –ª–∏–¥–µ—Ä –º–æ–∂–µ—Ç —Ä–∞—Å–ø—É—Å—Ç–∏—Ç—å –≥—Ä—É–ø–ø—É. –û–±–Ω–æ–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã.
        - –ö–æ–º–∞–Ω–¥–∞ `/party join`: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã, –ø–æ–ª–∏—Ç–∏–∫—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –¥–ª—è –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—è `RuleConfig` –∏ —Å–≤–æ–π—Å—Ç–≤–∞ –ø–∞—Ä—Ç–∏–∏. –û–±–Ω–æ–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã.
- **–°—Ç–∞—Ç—É—Å**: Task 1.3 –∏ Task 1.2 (–≤ —á–∞—Å—Ç–∏ `party_commands.py`) –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–¥–≤–∏–Ω—É–ª–∏—Å—å. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ–∂–Ω—ã–µ –∞—Å–ø–µ–∫—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è —Ä–µ—Å—É—Ä—Å–æ–≤/–Ω–∞–≤—ã–∫–æ–≤ –ø–∞—Ä—Ç–∏–∏, –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π) –æ—Å—Ç–∞—é—Ç—Å—è –¥–ª—è –±—É–¥—É—â–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π. –§–∞–π–ª—ã `Tasks.txt` –∏ `done.txt` –Ω–µ –∏–∑–º–µ–Ω—è–ª–∏—Å—å.

## –ò—Ç–µ—Ä–∞—Ü–∏—è 2: –£–ª—É—á—à–µ–Ω–∏–µ –õ–æ–≥–∏–∫–∏ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –∏ –ö–æ–º–∞–Ω–¥—ã /start (–°–µ—Å—Å–∏—è 2025-07-11)
- **–î–∞—Ç–∞**: 2025-07-11
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –î–∞–ª—å–Ω–µ–π—à–∞—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ Task 1.3 (–õ–æ–≥–∏–∫–∞ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏—è) –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—á–µ—Ç–æ–≤ –≤ Task 1.2 (–∫–æ–º–∞–Ω–¥–∞ /start).
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **Task 1.3 (–õ–æ–≥–∏–∫–∞ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏—è - –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)**:
        - –í `backend/core/movement_logic.py` (`execute_move_for_player_action`):
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤—ã—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è, –µ—Å–ª–∏ –æ–Ω–∏ —É–∫–∞–∑–∞–Ω—ã –≤ `connection_details.resource_costs_json`. –°—Ç–æ–∏–º–æ—Å—Ç—å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫ –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É –¥–≤–∏–∂–µ–Ω–∏—è. –î–æ–±–∞–≤–ª–µ–Ω TODO –¥–ª—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö –ø–æ–ª–∏—Ç–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–∞—Ä—Ç–∏–µ–π –∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏–∑ `RuleConfig`.
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–∏—Ç–∏–∫–∞ `highest_member_skill` –¥–ª—è `party:movement_skill_check_performer` (–Ω–∞ –æ—Å–Ω–æ–≤–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –∞—Ç—Ä–∏–±—É—Ç–∞). –î–æ–±–∞–≤–ª–µ–Ω—ã TODO –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–ª–æ–∂–Ω—ã—Ö –ø–æ–ª–∏—Ç–∏–∫.
            - –ü—Ä–æ–≤–µ–¥–µ–Ω–∞ —Ä–∞–±–æ—Ç–∞ –ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∫ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ö–µ–ª–ø–µ—Ä–∞ `_localize_movement_error`.
    - **Task 1.2 (–°–∏—Å—Ç–µ–º–∞ –ò–≥—Ä–æ–∫–æ–≤/–ü–∞—Ä—Ç–∏–π - –∫–æ–º–∞–Ω–¥–∞ /start)**:
        - –í `backend/bot/commands/general_commands.py` –∫–æ–º–∞–Ω–¥–∞ `/start` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `RuleConfig` (`player:starting_location_static_id`) –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ª–æ–∫–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞.
        - –û–±–Ω–æ–≤–ª–µ–Ω—ã unit-—Ç–µ—Å—Ç—ã –≤ `tests/bot/commands/test_general_commands.py` –¥–ª—è –æ—Ç—Ä–∞–∂–µ–Ω–∏—è —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –≤–∫–ª—é—á–∞—è –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ `get_rule`.
- **–°—Ç–∞—Ç—É—Å**: Task 1.3 –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω–∞, –Ω–æ –≤—Å–µ –µ—â–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è A-Z –ø–ª–∞–Ω—É. –ß–∞—Å—Ç—å Task 1.2 (/start) –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞. –§–∞–π–ª—ã `Tasks.txt` –∏ `done.txt` –Ω–µ –∏–∑–º–µ–Ω—è–ª–∏—Å—å, —Ç–∞–∫ –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ 1.2 –∏ 1.3 –µ—â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é.

## –ò—Ç–µ—Ä–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π: –ù–∞—Å—Ç—Ä–æ–π–∫–∏, –ú–æ–¥–µ–ª–∏, –î–≤–∏–∂–µ–Ω–∏–µ (–°–µ—Å—Å–∏—è 2025-07-11)
- **–î–∞—Ç–∞**: 2025-07-11
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–æ–∫ –≤ Tasks 0.1, 0.2, 0.3, 1.1 –∏ —á–∞—Å—Ç–∏—á–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ Task 1.3.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **Task 0.1 (–ù–∞—Å—Ç—Ä–æ–π–∫–∏)**:
        - –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ `backend/config/settings.py` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Pydantic `BaseSettings`.
        - –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –∏–º–ø–æ—Ä—Ç–µ—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ `settings`.
        - –û—á–∏—â–µ–Ω `__all__` –∏ —É–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä—É—é—â–µ–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–∞—Ä—Å–∏–Ω–≥ `MASTER_IDS` –≤ `settings.py`.
    - **Task 0.2 (–ú–æ–¥–µ–ª—å GuildConfig)**:
        - –í `backend/models/guild.py` –≤ –º–æ–¥–µ–ª—å `GuildConfig` –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è `is_active` (Boolean) –∏ `supported_languages_json` (JSON).
        - –í—Ä—É—á–Ω—É—é –Ω–∞–ø–∏—Å–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è Alembic (`3ce7b1adf0ee_...`) –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç—Ç–∏—Ö —Å—Ç–æ–ª–±—Ü–æ–≤, —Ç–∞–∫ –∫–∞–∫ –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–≤–∞–ª–∞ –ø—É—Å—Ç—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏.
    - **Task 0.3 (–ú–æ–¥–µ–ª—å RuleConfig)**:
        - –ú–æ–¥–µ–ª—å `RuleConfig` –≤ `backend/models/rule_config.py` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `TimestampMixin`.
        - –í—Ä—É—á–Ω—É—é –Ω–∞–ø–∏—Å–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è Alembic (`35021856e7e4_...`) –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç–æ–ª–±—Ü–æ–≤ `created_at` –∏ `updated_at`.
        - –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ `crud_rule_config.py` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏.
    - **Task 1.1 (–ú–æ–¥–µ–ª—å Location)**:
        - –í `backend/models/location.py` –¥–æ–±–∞–≤–ª–µ–Ω—ã: `properties_json`, –æ—Ç–Ω–æ—à–µ–Ω–∏—è `guild` (–∫ `GuildConfig`), `parent_location`, `child_locations`.
        - –í `backend/models/guild.py` –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—Ä–∞—Ç–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ `locations`.
        - –í—Ä—É—á–Ω—É—é –Ω–∞–ø–∏—Å–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è Alembic (`c2c2f37c549a_...`) –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è `properties_json`.
        - –í `backend/core/crud/crud_location.py` –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_children_of_location`.
    - **Task 1.3 (–õ–æ–≥–∏–∫–∞ –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏—è - –Ω–∞—á–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)**:
        - –í `backend/core/movement_logic.py` (`execute_move_for_player_action`):
            - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä–æ–∫–∞ –∏ —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã (`movement:allowed_player_statuses`, `party:movement:policy`).
            - –£–ª—É—á—à–µ–Ω–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ `connection_details`.
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è `requires_world_flag` –∏–∑ `connection_details.conditions_json`.
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è `requires_item_static_id` (–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–≥—Ä–æ–∫–∞/–ø–∞—Ä—Ç–∏–∏).
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è `requires_quest_status` (–ø—Ä–æ–≥—Ä–µ—Å—Å –∫–≤–µ—Å—Ç–æ–≤ –∏–≥—Ä–æ–∫–∞/–ø–∞—Ä—Ç–∏–∏).
            - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–≤—ã–∫–æ–≤ —á–µ—Ä–µ–∑ `check_resolver.py` –Ω–∞ –æ—Å–Ω–æ–≤–µ `connection_details.conditions_json.requires_skill_check`.
            - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `Location.properties_json` –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –¥–≤–∏–∂–µ–Ω–∏—è –∏ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ DC –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ä–µ—Å—É—Ä—Å–æ–≤.
            - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ `TODO: Localize this message` –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Ö–µ–ª–ø–µ—Ä `_localize_movement_error` –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏.
        - –í `backend/core/game_events.py` —Ñ—É–Ω–∫—Ü–∏—è `on_enter_location` —É–ª—É—á—à–µ–Ω–∞ –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ª–æ–∫–∞—Ü–∏–∏; –¥–æ–±–∞–≤–ª–µ–Ω—ã TODO –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π, —Ç—Ä–∏–≥–≥–µ—Ä—ã —Å–æ–±—ã—Ç–∏–π).
    - **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∑–∞–¥–∞—á**: `Tasks.txt` –∏ `done.txt` –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Tasks 0.1, 0.2, 0.3, 1.1. Task 1.2 –∏ 1.3 –æ—Å—Ç–∞—é—Ç—Å—è –≤ `Tasks.txt` –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏.
- **–°—Ç–∞—Ç—É—Å**: –ò—Ç–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã. –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–π –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω–∞, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–∞–ª—å–Ω–µ–π—à–µ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ø–æ —á–∞—Å—Ç–∏ –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –∑–∞–≤–∏—Å–∏–º—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ (–∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, –∫–≤–µ—Å—Ç—ã, —Ä–µ—Å—É—Ä—Å—ã) –∏ –ø–æ–ª–Ω–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏.

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –∫ —Å–ø–∏—Å–∫—É –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–æ–∫ (–°–µ—Å—Å–∏—è [Current Date])
- **–î–∞—Ç–∞**: [Current Date]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –ü—Ä–æ–∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫–∏ –∫–æ –≤—Å–µ–º —Ä–∞–Ω–µ–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–º –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∞–º –≤ —Ä–∞–∑–¥–µ–ª–µ "—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏" —Ñ–∞–π–ª–∞ `AGENTS.md` –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –ü—Ä–æ—á–∏—Ç–∞–Ω `AGENTS.md` —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Å–ø–∏—Å–∫–æ–º –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–æ–∫, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å–µ—Å—Å–∏–∏ –∞–Ω–∞–ª–∏–∑–∞.
    - –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏" –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –º–µ—Ç–∫–∏ (`[–ó–ê–ì–õ–£–®–ö–ê]`, `[–ù–ï–ü–û–õ–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø]`, `[–û–¢–°–£–¢–°–¢–í–£–ï–¢ –§–£–ù–ö–¶–ò–û–ù–ê–õ]`, `[–û–¢–ö–õ–û–ù–ï–ù–ò–ï –û–¢ –ü–õ–ê–ù–ê]`, `[TODO]`, `[–¢–ò–ü –î–ê–ù–ù–´–•]`, `[–£–ü–£–©–ï–ù–ò–ï]`).
    - –§–∞–π–ª `AGENTS.md` –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞–Ω –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º, –≤–∫–ª—é—á–∞—é—â–∏–º —Ä–∞–∑–º–µ—á–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–æ–∫ –∏ —ç—Ç–æ—Ç –ª–æ–≥.
- **–°—Ç–∞—Ç—É—Å**: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ –∫ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∞–º –≤ `AGENTS.md` –∑–∞–≤–µ—Ä—à–µ–Ω–æ.

## –í—Å–µ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∏ (–ó–∞–¥–∞—á–∏ 0.1-68) - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- **–î–∞—Ç–∞**: [Current Date]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –∑–∞–¥–∞—á 0.1-68 –≤ `Tasks.txt`. –í—ã—è–≤–∏—Ç—å –∑–∞–≥–ª—É—à–∫–∏, TODO, –Ω–µ–ø–æ–ª–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–ª–∞–Ω–∞–º. –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ù—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å" —Ñ–∞–π–ª–∞ `AGENTS.md`.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –ü—Ä–æ—á–∏—Ç–∞–Ω `Tasks.txt` –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á.
    - –ü—Ä–æ—á–∏—Ç–∞–Ω `AGENTS.md` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
    - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ –∑–∞–¥–∞—á–∏ –æ—Ç 0.1 –¥–æ 68 (—Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ –±—ç–∫–µ–Ω–¥-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è UI-–∑–∞–¥–∞—á).
    - –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã, –ø—Ä–æ—á–∏—Ç–∞–Ω–æ –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ –∏ –µ—â–µ –Ω–µ –±—ã–ª–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–æ).
    - –ö–æ–¥ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∑–∞–≥–ª—É—à–µ–∫, TODO, —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –ø–ª–∞–Ω–∞–º.
    - –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –∏ –≤–Ω–µ—Å–µ–Ω –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–æ–∫ –≤ —Ä–∞–∑–¥–µ–ª "—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏" –≤ `AGENTS.md`.
- **–°—Ç–∞—Ç—É—Å**: –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–∞ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω. `AGENTS.md` –æ–±–Ω–æ–≤–ª–µ–Ω.

## –í—Å–µ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∏ (–ó–∞–¥–∞—á–∏ 0.1-68) - –ß–∞—Å—Ç—å 1
- **–î–∞—Ç–∞**: [Current Date]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –∑–∞–¥–∞—á 0.1-68 –≤ `Tasks.txt`. –í—ã—è–≤–∏—Ç—å –∑–∞–≥–ª—É—à–∫–∏, TODO, –Ω–µ–ø–æ–ª–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–ª–∞–Ω–∞–º. –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–ù—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å" —Ñ–∞–π–ª–∞ `AGENTS.md`.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –ü—Ä–æ—á–∏—Ç–∞–Ω `Tasks.txt` –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–æ–ª–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –∑–∞–¥–∞—á.
    - –ü—Ä–æ—á–∏—Ç–∞–Ω `AGENTS.md` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
    - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–¥–∞—á–∏ –§–∞–∑—ã 0 (0.1-0.3), –§–∞–∑—ã 1 (1.1-1.3) –∏ –§–∞–∑—ã 2 (2.1-2.6).
    - –î–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ–∞–π–ª—ã, –ø—Ä–æ—á–∏—Ç–∞–Ω–æ –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.
    - –ö–æ–¥ –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∑–∞–≥–ª—É—à–µ–∫, TODO, —á–∞—Å—Ç–∏—á–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –ø–ª–∞–Ω–∞–º.
    - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—ã—è–≤–ª–µ–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∞—Ö –¥–ª—è –∑–∞–¥–∞—á 0.1-1.3 –∏ 2.1-2.6 –≤–Ω–µ—Å–µ–Ω–∞ –≤ —Ä–∞–∑–¥–µ–ª "—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏" –≤ `AGENTS.md`.
- **–°—Ç–∞—Ç—É—Å**: –ê–Ω–∞–ª–∏–∑ –¥–ª—è –∑–∞–¥–∞—á 0.1-1.3 –∏ 2.1-2.6 –∑–∞–≤–µ—Ä—à–µ–Ω. `AGENTS.md` –æ–±–Ω–æ–≤–ª–µ–Ω. –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –∞–Ω–∞–ª–∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–¥–∞—á.

## –°–µ—Å—Å–∏—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –æ—Ç [Current Date])
- **–î–∞—Ç–∞**: [Current Date]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `Tasks.txt` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–∞–¥–∞—á, —Ç—Ä–µ–±—É—é—â–∏—Ö –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–∏–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º. –û–±–Ω–æ–≤–∏—Ç—å `AGENTS.md` –∏ `Tasks.txt` –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –ü—Ä–æ—á–∏—Ç–∞–Ω—ã `Tasks.txt` –∏ `AGENTS.md`.
    - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —á—Ç–æ –≤—Å–µ –∑–∞–¥–∞—á–∏, —Ä–∞–Ω–µ–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ (Task 0.1 - 1.3), —É–∂–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ "A-Z Implementation Plan" –≤ `Tasks.txt`.
    - –°–µ–∫—Ü–∏—è "—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏" –≤ `AGENTS.md` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Å—ã–ª–∫–∏ –Ω–∞ —ç—Ç–∏ –∑–∞–¥–∞—á–∏.
    - –ù–æ–≤—ã—Ö –∑–∞–¥–∞—á –¥–ª—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ `Tasks.txt` –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ.
    - –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ `Tasks.txt` –∏ `AGENTS.md` –≤ —á–∞—Å—Ç–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ–ø–∏—Å–∞–Ω–∏–π –∏–ª–∏ —Å—Å—ã–ª–æ–∫ –≤ "—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏" –Ω–µ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–∏—Å—å.
- **–°—Ç–∞—Ç—É—Å**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –í—Å–µ —Ä–∞–Ω–µ–µ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–æ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã.

## Task 58: üñ•Ô∏è UI.4 UI for Rule Configuration (RuleConfig) (Full UI Implementation)
- **–î–∞—Ç–∞**: 2024-07-10
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Implement a fully functional UI for managing RuleConfig entries within a guild. This includes listing, creating, editing, and deleting rules, with appropriate user feedback and error handling.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –®–∞–≥ 1 (–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ –∏ –æ–±–∑–æ—Ä —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Ä–∞–±–æ—Ç—ã): –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ Task 58 —è–≤–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–¥–∞—á–µ–π. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –±—ç–∫–µ–Ω–¥ API (–∫–æ–º–∞–Ω–¥—ã `/master_ruleconfig`), TypeScript —Ç–∏–ø—ã (`ruleconfig.ts`) –∏ —Å—Ç–∞–±—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (`ruleConfigService.ts`). –í—ã—è–≤–ª–µ–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç-—Å—Ç–∞–±–æ–≤. –û—Ç–º–µ—á–µ–Ω—ã –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ API –∫–æ–º–∞–Ω–¥—ã `set` (–Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `description` –Ω–∞–ø—Ä—è–º—É—é).
    - –®–∞–≥ 2 (–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤): –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `src/ui/src/pages/RuleConfigPage/` –∏ –±–∞–∑–æ–≤—ã–µ —Ñ–∞–π–ª—ã-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ `RuleConfigDashboardPage.tsx`, `RuleConfigListPage.tsx`, `RuleConfigForm.tsx` –∏ –∏—Ö —Ç–µ—Å—Ç–æ–≤.
    - –®–∞–≥ 3 (–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–ª–æ—è UI —Å–µ—Ä–≤–∏—Å–æ–≤): –û–±–Ω–æ–≤–ª–µ–Ω `src/ui/src/services/ruleConfigService.ts`. –ú–æ–∫–æ–≤—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –≤—ã–∑–æ–≤—ã (–∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ–≥–æ) `apiClient`, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å API —à–ª—é–∑–æ–º, –≤—ã–∑—ã–≤–∞—é—â–∏–º –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `listRuleConfigEntries`, `getRuleConfigEntry`, `createRuleConfigEntry`, `updateRuleConfigEntry`, `deleteRuleConfigEntry`.
    - –®–∞–≥ 4 (–†–µ–∞–ª–∏–∑–∞—Ü–∏—è UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤):
        - `RuleConfigListPage.tsx`: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–∞–≤–∏–ª —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π, –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É –∫–ª—é—á–∞, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∏—è –∏ –≤—ã–∑–æ–≤–∞–º–∏ –∫–æ–ª–ª–±—ç–∫–æ–≤ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
        - `RuleConfigForm.tsx`: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª. –í–∫–ª—é—á–∞–µ—Ç –ø–æ–ª—è –¥–ª—è –∫–ª—é—á–∞ (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏), –∑–Ω–∞—á–µ–Ω–∏—è (JSON-—Å—Ç—Ä–æ–∫–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π) –∏ –æ–ø–∏—Å–∞–Ω–∏—è. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
        - `RuleConfigDashboardPage.tsx`: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, —É–ø—Ä–∞–≤–ª—è—é—â–∞—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º —Å–ø–∏—Å–∫–∞ –∏–ª–∏ —Ñ–æ—Ä–º—ã, –∞ —Ç–∞–∫–∂–µ –±–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
    - –®–∞–≥ 5 (–ù–∞–ø–∏—Å–∞–Ω–∏–µ Unit-—Ç–µ—Å—Ç–æ–≤): –ù–∞–ø–∏—Å–∞–Ω—ã Unit-—Ç–µ—Å—Ç—ã –¥–ª—è `ruleConfigService.ts`, `RuleConfigListPage.tsx`, `RuleConfigForm.tsx` –∏ `RuleConfigDashboardPage.tsx`, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—É—é –ª–æ–≥–∏–∫—É, —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
- **–°—Ç–∞—Ç—É—Å Task 58**: –ó–∞–≤–µ—Ä—à–µ–Ω–∞. UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è RuleConfig –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤. –ó–∞–º–µ—á–∞–Ω–∏—è –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ –ø–æ–ª—è `description` –∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É –ø–µ—Ä–µ–¥–∞–Ω—ã –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–π –¥–æ—Ä–∞–±–æ—Ç–∫–∏ API —à–ª—é–∑–∞ –∏–ª–∏ –±—ç–∫–µ–Ω–¥ –∫–æ–º–∞–Ω–¥.

## Task 59: üñ•Ô∏è UI.5 UI for AI Generation and Moderation
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Create a UI page for managing AI generation and moderation, including triggering generation, listing pending requests, viewing details, and performing moderation actions (approve, reject, edit).
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–ø–æ–ª–Ω–∞—è UI-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)**:
    - –®–∞–≥ 1 (–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API): –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã –∏–∑ `pending_generation_master_commands.py`. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `AGENTS.md`. (–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–Ω–µ–µ)
    - –®–∞–≥ 2 (–ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ —Å—Ç–∞–±–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤): –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã `src/ui/src/types/pending_generation.ts` –∏ `src/ui/src/services/pendingGenerationService.ts`. –ü—Ä–∏–∑–Ω–∞–Ω—ã –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–º–∏. (–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–Ω–µ–µ)
    - –®–∞–≥ 3 (–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∏ –±–∞–∑–æ–≤—ã—Ö –∑–∞–≥–ª—É—à–µ–∫): –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `src/ui/src/pages/AiModerationPage/` –∏ —Ñ–∞–π–ª—ã-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ç–µ—Å—Ç–æ–≤. (–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–Ω–µ–µ)
    - –®–∞–≥ 4 (–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `TriggerAiGenerationForm.tsx`): –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–æ—Ä–º–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ AI-–∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –ø–æ–ª—è–º–∏ –¥–ª—è —Ç–∏–ø–∞ —Å—É—â–Ω–æ—Å—Ç–∏, JSON-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö ID –ª–æ–∫–∞—Ü–∏–∏/–∏–≥—Ä–æ–∫–∞. –í–∫–ª—é—á–µ–Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è JSON, –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã.
    - –®–∞–≥ 5 (–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `PendingGenerationListPage.tsx`): –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –æ–∂–∏–¥–∞—é—â–∏—Ö –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å—Ç–∞—Ç—É—Å—É. –£–ª—É—á—à–µ–Ω–æ –≤–∏–∑—É–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞, –≤–∫–ª—é—á–∞—è —Ü–≤–µ—Ç–æ–≤–æ–µ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–ª—é—á–µ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã.
    - –®–∞–≥ 6 (–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `PendingGenerationDetailPage.tsx`): –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ –Ω–∞ –º–æ–¥–µ—Ä–∞—Ü–∏—é, –≤–∫–ª—é—á–∞—è –∫–æ–Ω—Ç–µ–∫—Å—Ç, –ø—Ä–æ–º–ø—Ç, –æ—Ç–≤–µ—Ç AI, –¥–∞–Ω–Ω—ã–µ –∏ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏. –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `parsed_validated_data_json` –∏ `master_notes`. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–Ω–æ–ø–∫–∏ "Approve", "Reject", "Update/Save Edits" —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–æ–π –≤—ã–∑–æ–≤–∞ —Å–µ—Ä–≤–∏—Å–∞. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã.
    - –®–∞–≥ 7 (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ `AiModerationDashboardPage.tsx`): –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É –≤–∏–¥–∞–º–∏ (—Å–ø–∏—Å–æ–∫, –¥–µ—Ç–∞–ª–∏, —Ñ–æ—Ä–º–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞) –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –Ω–∏–º–∏. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ –Ω–∞ —É—Ä–æ–≤–Ω–µ –¥–∞—à–±–æ—Ä–¥–∞. –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞.
- **–°—Ç–∞—Ç—É—Å Task 59**: –ó–∞–≤–µ—Ä—à–µ–Ω–∞. UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã (–≤–∫–ª—é—á–∞—è –ª–æ–≥–∏–∫—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è, –Ω–æ –±–µ–∑ –≥–ª—É–±–æ–∫–æ–π —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ —Å–≤–µ—Ä—Ö –±–∞–∑–æ–≤–æ–π) –∏ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏. –ó–∞–¥–∞—á–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–¥–∞—á–µ UI-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π UX.

## Task 68: üñ•Ô∏è UI.14 UI "Command List" Section (Help/Guide)
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Create UI stubs and contracts for a UI section to display the bot command list.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π —ç—Ç–∞–ø –¥–ª—è UI)**:
    - –®–∞–≥ 1 (–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π): –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ API `GET /api/v1/command-list/` (–∏–∑ Task 67) –∏ Pydantic –º–æ–¥–µ–ª–∏. –ü—Ä–∏–∑–Ω–∞–Ω—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞.
    - –®–∞–≥ 2 (TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã): –°–æ–∑–¥–∞–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `UICommandParameterInfo`, `UICommandInfo`, `UICommandListResponse` –≤ —Ñ–∞–π–ª–µ `src/ui/src/types/commands.ts`.
    - –®–∞–≥ 3 (–°—Ç–∞–± UI-—Å–µ—Ä–≤–∏—Å–∞): –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/ui/src/services/commandListService.ts` —Å –º–æ–∫–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π `fetchCommandList`.
    - –®–∞–≥ 4 (–ó–∞–≥–ª—É—à–∫–∏ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ç–µ—Å—Ç–æ–≤):
        - –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `src/ui/src/pages/CommandHelpPage/`.
        - –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã-–∑–∞–≥–ª—É—à–∫–∏: `CommandHelpPage.tsx`, `CommandHelpPage.test.tsx`.
        - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª-–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–∞ —Å–µ—Ä–≤–∏—Å–∞: `src/ui/src/services/commandListService.test.ts`.
- **–°—Ç–∞—Ç—É—Å Task 68 (–ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–π —ç—Ç–∞–ø)**: –ó–∞–≤–µ—Ä—à–µ–Ω. –¢–∏–ø—ã, —Å—Ç–∞–± —Å–µ—Ä–≤–∏—Å–∞, –∑–∞–≥–ª—É—à–∫–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ —Ç–µ—Å—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω—ã. –ó–∞–¥–∞—á–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–¥–∞—á–µ UI-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ UI –∏ —Ç–µ—Å—Ç–æ–≤.

## –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á –¥–ª—è `Tasks.txt` (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –æ—Ç [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞] - –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ)
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á –∏–∑ `Tasks.txt`.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è Task 1.2 (Player and Party System).
    - –û–±–Ω–æ–≤–ª–µ–Ω `Tasks.txt` —Å –Ω–æ–≤—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –¥–ª—è Task 1.2.
    - –û–±–Ω–æ–≤–ª–µ–Ω `AGENTS.md`:
        - –í —Å–µ–∫—Ü–∏—é "—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏" –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Å—ã–ª–∫–∞ –Ω–∞ Task 1.2.
        - –¢–µ–∫—É—â–∞—è –∑–∞–ø–∏—Å—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ "–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π".
- **–°—Ç–∞—Ç—É—Å**: –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è Task 1.2. `Tasks.txt` –∏ `AGENTS.md` –æ–±–Ω–æ–≤–ª–µ–Ω—ã.

## –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á –¥–ª—è `Tasks.txt` (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∑–∞–ø—Ä–æ—Å –æ—Ç [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞])
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –ü—Ä–æ–≤–µ—Å—Ç–∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—é –∑–∞–¥–∞—á –∏–∑ `Tasks.txt` –¥–æ —É—Ä–æ–≤–Ω—è, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –¥–ª—è "A-Z" —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ AI-–∞–≥–µ–Ω—Ç–æ–º. –û–±–Ω–æ–≤–∏—Ç—å `AGENTS.md` —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
    - –£—Ç–æ—á–Ω–µ–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è: –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–Ω–æ–π, –æ–±–Ω–æ–≤–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `Tasks.txt`.
    - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è Task 0.1 (Discord Bot Project Initialization), Task 0.2 (DBMS Setup), Task 0.3 (DB Interaction Utilities), Task 1.1 (Location Model).
    - –û–±–Ω–æ–≤–ª–µ–Ω `Tasks.txt` —Å –Ω–æ–≤—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏.
    - –û–±–Ω–æ–≤–ª–µ–Ω `AGENTS.md`:
        - –í —Å–µ–∫—Ü–∏—é "—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏" –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å—Å—ã–ª–∫–∏ –Ω–∞ Task 0.1, 0.2, 0.3, 1.1.
        - –¢–µ–∫—É—â–∞—è –∑–∞–ø–∏—Å—å –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ "–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π".
- **–°—Ç–∞—Ç—É—Å**: –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –¥–µ—Ç–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –ø–µ—Ä–≤—ã—Ö —á–µ—Ç—ã—Ä–µ—Ö –∑–∞–¥–∞—á. `Tasks.txt` –∏ `AGENTS.md` –æ–±–Ω–æ–≤–ª–µ–Ω—ã.

## –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è Task 66: üñ•Ô∏è UI.12 UI for Conflict Resolution
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–î–µ–π—Å—Ç–≤–∏–µ**: Task 66 (UI for Conflict Resolution) —Ñ–∏–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, —Å—Ç–∞–±—ã —Å–µ—Ä–≤–∏—Å–æ–≤, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API, –∑–∞–≥–ª—É—à–∫–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ç–µ—Å—Ç–æ–≤) –±—ã–ª–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Ä–∞–Ω–µ–µ (—Å–º. –ª–æ–≥ Task 66 –≤ `AGENTS.md`).
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: Task 66 —É–¥–∞–ª–µ–Ω–∞ –∏–∑ `Tasks.txt` –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `done.txt`.

## –§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è Task 65: üñ•Ô∏è UI.11 UI for Balance Tools
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–î–µ–π—Å—Ç–≤–∏–µ**: Task 65 (UI for Balance Tools) —Ñ–∏–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, —Å—Ç–∞–±—ã —Å–µ—Ä–≤–∏—Å–æ–≤, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API, –∑–∞–≥–ª—É—à–∫–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ç–µ—Å—Ç–æ–≤) –±—ã–ª–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Ä–∞–Ω–µ–µ (—Å–º. –ª–æ–≥ Task 65 –≤ `AGENTS.md`).
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: Task 65 —É–¥–∞–ª–µ–Ω–∞ –∏–∑ `Tasks.txt` –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `done.txt`.

## Task 67: üñ•Ô∏è UI.13 Backend API for Command List
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Develop a backend API endpoint that provides structured information about bot commands.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –®–∞–≥ 1: –ü—Ä–æ–≤–µ–¥–µ–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–æ–º–∞–Ω–¥–∞–º Discord-–±–æ—Ç–∞ (`discord.py`) –∏ –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–µ. –ò–∑—É—á–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è `get_bot_commands` –≤ `src/core/command_utils.py`.
    - –®–∞–≥ 2: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ Pydantic –º–æ–¥–µ–ª–∏ `CommandInfo`, `CommandParameterInfo`, `CommandListResponse` –≤ `src/models/command_info.py`. –ü—Ä–∏–∑–Ω–∞–Ω—ã –ø–æ–¥—Ö–æ–¥—è—â–∏–º–∏ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–∞ API.
    - –®–∞–≥ 3: –ü—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é `get_bot_commands` –∏–∑ `src/core/command_utils.py` –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é —Å–µ—Ä–≤–∏—Å–Ω—É—é –ª–æ–≥–∏–∫—É, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–±–æ—Ä –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–º–∞–Ω–¥–∞—Ö.
    - –®–∞–≥ 4: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω API —ç–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/v1/command-list/` –≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ `src/api/routers/command_list_api.py`. –≠–Ω–¥–ø–æ–∏–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `get_bot_commands` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `CommandListResponse`. –ù–æ–≤—ã–π —Ä–æ—É—Ç–µ—Ä –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ `src/main.py`.
    - –®–∞–≥ 5: –ù–∞–ø–∏—Å–∞–Ω—ã Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ –≤ `tests/api/routers/test_command_list_api.py`, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–µ —É—Å–ø–µ—à–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –±–æ—Ç–∞, –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—à–∏–±–∫–∏) –∏ –∑–∞–ø—Ä–æ—Å —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —è–∑—ã–∫–∞.
    - –®–∞–≥ 6: –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –Ω–æ–≤–æ–≥–æ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ (`GET /api/v1/command-list/`) –≤ `AGENTS.md`.
- **–°—Ç–∞—Ç—É—Å Task 67**: –ó–∞–≤–µ—Ä—à–µ–Ω–∞. API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ.

## Task 66: üñ•Ô∏è UI.12 UI for Conflict Resolution
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –°–æ–∑–¥–∞—Ç—å UI —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –¥–µ–π—Å—Ç–≤–∏–π. –í–∫–ª—é—á–∞–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –¥–µ—Ç–∞–ª–µ–π –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–æ–≤ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏—Å—Ö–æ–¥–∞ –∏ –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ `src/ui/src/types/conflict.ts` –¥–ª—è: `UIConflictStatus`, `UIConflictListItem`, `UIConflictActionEntity`, `UIConflictParsedAction`, `UIConflictInvolvedUnit`, `UIConflictDetails`, `UIMasterOutcomeOption`, `UIResolveConflictPayload`. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `PaginatedResponse`.
    - –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω—ã —Å—Ç–∞–±—ã (–∑–∞–≥–ª—É—à–∫–∏) API —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ UI –≤ —Ñ–∞–π–ª–µ `src/ui/src/services/conflictService.ts`. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–æ–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: `getPendingConflicts`, `getConflictDetails`, `getConflictResolutionOutcomeOptions`, `resolveConflict`.
    - –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è UI Task 66: –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤" –≤ `AGENTS.md`, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `/master_conflict` –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.
    - –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∏—Ö —Ç–µ—Å—Ç–æ–≤ –≤ `src/ui/src/pages/ConflictResolutionPage/`:
        - `ConflictResolutionPage.tsx` –∏ `ConflictResolutionPage.test.tsx`
        - `ConflictListPage.tsx` –∏ `ConflictListPage.test.tsx`
        - `ConflictDetailPage.tsx` –∏ `ConflictDetailPage.test.tsx`
    - –®–∞–≥ 5: –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª-–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ UI-—Å–µ—Ä–≤–∏—Å–∞: `src/ui/src/services/conflictService.test.ts`.
    - –®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω `AGENTS.md` (—ç—Ç–æ—Ç –ª–æ–≥ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω).
- **–°—Ç–∞—Ç—É—Å Task 66**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ UI-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, —Å—Ç–∞–±–æ–≤ API, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –∏ –∑–∞–≥–ª—É—à–µ–∫ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤/—Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ó–∞–¥–∞—á–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–¥–∞—á–µ UI-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ UI –∏ —Ç–µ—Å—Ç–æ–≤.
- **–ü–ª–∞–Ω (–Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Task 66)**:
    1.  ***–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ `src/ui/src/types/conflict.ts`***:
        *   `UIConflictStatus`: Enum, –¥—É–±–ª–∏—Ä—É—é—â–∏–π `ConflictStatus` –∏–∑ –±—ç–∫–µ–Ω–¥–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ UI.
        *   `UIConflictListItem`: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤.
            *   –ü–æ–ª—è: `id: number`, `status: UIConflictStatus`, `created_at: string` (ISO date), `involved_entities_summary: string`.
        *   `UIConflictActionEntity`: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—É—â–Ω–æ—Å—Ç–∏ –≤ —Ä–∞–º–∫–∞—Ö –¥–µ–π—Å—Ç–≤–∏—è –≤ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ.
            *   –ü–æ–ª—è: `type: string` ("player", "npc", "party"), `id: number`, `name?: string`.
        *   `UIConflictParsedAction`: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è `conflicting_actions_json.action`.
            *   –ü–æ–ª—è: `raw_text: string`, `intent: string`, `entities: UIConflictActionEntity[]`, `confidence?: number`, `details_json?: Record<string, any>`.
        *   `UIConflictInvolvedUnit`: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤ `involved_entities_json` –∏ `conflicting_actions_json`.
            *   –ü–æ–ª—è: `actor: UIConflictActionEntity`, `action: UIConflictParsedAction`.
        *   `UIConflictDetails`: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–µ.
            *   –ü–æ–ª—è: `id: number`, `guild_id: string`, `involved_entities: UIConflictInvolvedUnit[]`, `conflicting_actions: UIConflictInvolvedUnit[]`, `status: UIConflictStatus`, `resolution_notes?: string`, `resolved_action?: UIConflictParsedAction`, `created_at: string`, `resolved_at?: string`.
        *   `UIMasterOutcomeOption`: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å—Ö–æ–¥–∞, –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã—Ö –ú–∞—Å—Ç–µ—Ä—É.
            *   –ü–æ–ª—è: `id: string` (–∑–Ω–∞—á–µ–Ω–∏–µ Enum `ConflictStatus`), `name_key: string` (–∫–ª—é—á –¥–ª—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–º–µ–Ω–∏).
        *   `UIResolveConflictPayload`: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –ø—Ä–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞.
            *   –ü–æ–ª—è: `outcome_status: string`, `notes?: string`.
        *   –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `PaginatedResponse` –∏–∑ `src/ui/src/types/entities.ts`.
    2.  ***–°–æ–∑–¥–∞—Ç—å —Å—Ç–∞–±—ã (–∑–∞–≥–ª—É—à–∫–∏) API —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ UI***:
        *   –°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `src/ui/src/services/conflictService.ts`.
        *   –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
            *   `getPendingConflicts(guildId: string, status?: UIConflictStatus, page?: number, limit?: number): Promise<PaginatedResponse<UIConflictListItem>>`
            *   `getConflictDetails(guildId: string, conflictId: number): Promise<UIConflictDetails>`
            *   `getConflictResolutionOutcomeOptions(guildId: string): Promise<UIMasterOutcomeOption[]>`
            *   `resolveConflict(guildId: string, conflictId: number, payload: UIResolveConflictPayload): Promise<{ success: boolean; message?: string }>`
    3.  ***–î–æ–±–∞–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ API –¥–ª—è UI Task 66 –≤ `AGENTS.md`***:
        *   –û–ø–∏—Å–∞—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö.
    4.  ***–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª—ã-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∏—Ö —Ç–µ—Å—Ç–æ–≤***:
        *   –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: `src/ui/src/pages/ConflictResolutionPage/`.
        *   –§–∞–π–ª—ã: `ConflictResolutionPage.tsx`, `ConflictListPage.tsx`, `ConflictDetailPage.tsx` –∏ –∏—Ö `.test.tsx` –∞–Ω–∞–ª–æ–≥–∏.
    5.  ***–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª-–∑–∞–≥–ª—É—à–∫—É –¥–ª—è —Ç–µ—Å—Ç–æ–≤ UI-—Å–µ—Ä–≤–∏—Å–∞***:
        *   –§–∞–π–ª: `src/ui/src/services/conflictService.test.ts`.
    6.  ***–û–±–Ω–æ–≤–∏—Ç—å `AGENTS.md`***:
        *   –î–æ–±–∞–≤–∏—Ç—å —ç—Ç–æ—Ç –ø–ª–∞–Ω –≤ —Å–µ–∫—Ü–∏—é "–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω".
        *   –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–ø–∏—Å—å –≤ "–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π" –¥–ª—è Task 66.
    7.  ***–û–±–Ω–æ–≤–∏—Ç—å `Tasks.txt` –∏ `done.txt`*** (–ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤).

## Task 57: üñ•Ô∏è UI.3 UI for Player and Character Management
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –°–æ–∑–¥–∞—Ç—å UI —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Å–ø–∏—Å–∫–æ–≤ –∏–≥—Ä–æ–∫–æ–≤ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π (NPC) –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π –≥–∏–ª—å–¥–∏–∏. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–∏—Å–ø–æ–ª—å–∑—É—è API 1.3 –¥–ª—è —á—Ç–µ–Ω–∏—è). –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–æ—Ä–º—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π Player –∏ GeneratedNpc (–≤—ã–∑—ã–≤–∞—è API 1.3 –¥–ª—è create/update/delete). UI –¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å i18n –ø–æ–ª—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö. –ë—ç–∫–µ–Ω–¥-–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã (TypeScript —Ç–∏–ø—ã, —Å—Ç–∞–±—ã —Å–µ—Ä–≤–∏—Å–æ–≤) –±—ã–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Ä–∞–Ω–µ–µ –≤ —Ä–∞–º–∫–∞—Ö "Tasks 57, 58, 59".
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –®–∞–≥ 1: –û–±–Ω–æ–≤–ª–µ–Ω `AGENTS.md`: —Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω –¥–ª—è Task 57 —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø–ª–∞–Ω (Task 66) –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω –≤ –ª–æ–≥ Task 66, —Å–æ–∑–¥–∞–Ω–∞ —ç—Ç–∞ –∑–∞–ø–∏—Å—å –≤ –ª–æ–≥–µ –¥–ª—è Task 57. **–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ä–∞–Ω–µ–µ.**
    - –®–∞–≥ 2: –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è Task 57 (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞–º–∏ –∏ NPC) –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ `AGENTS.md`. **–í—ã–ø–æ–ª–Ω–µ–Ω–æ.**
    - –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤-–∑–∞–≥–ª—É—à–µ–∫ –¥–ª—è UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∏—Ö —Ç–µ—Å—Ç–æ–≤. **–ü—Ä–æ–ø—É—â–µ–Ω–æ, —Ñ–∞–π–ª—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.**
    - –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤-–∑–∞–≥–ª—É—à–µ–∫ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ UI-—Å–µ—Ä–≤–∏—Å–æ–≤. **–ü—Ä–æ–ø—É—â–µ–Ω–æ, —Ñ–∞–π–ª—ã —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.**
    - –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω—ã `Tasks.txt` –∏ `done.txt`. Task 57 –ø–µ—Ä–µ–º–µ—â–µ–Ω–∞ –≤ `done.txt`. **–í—ã–ø–æ–ª–Ω–µ–Ω–æ.**
- **–°—Ç–∞—Ç—É—Å Task 57**: –ó–∞–≤–µ—Ä—à–µ–Ω–∞. –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API, –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∑–∞–≥–ª—É—à–µ–∫) –≤—ã–ø–æ–ª–Ω–µ–Ω—ã.

## Session: [Current Date/Time] - Start Task 65
- **–ê–Ω–∞–ª–∏–∑**: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω `AGENTS.md`. –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ: "–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω" –±—ã–ª –¥–ª—è Task 64, –Ω–æ `Tasks.txt` –∏ `done.txt` —É–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç–∞–±–æ–≤ –¥–ª—è Task 64 –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
- **–†–µ—à–µ–Ω–∏–µ**: –í —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–¥–∞–Ω `Tasks.txt`. –°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞ - "Task 65: üñ•Ô∏è UI.11 UI for Balance Tools".
- **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ Task 65**:
    - –ü—Ä–æ—á–∏—Ç–∞–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ Task 65.
    - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ª–æ–≥ –¥–ª—è Task 48 (API –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏), —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–º–∞–Ω–¥ `/master_simulate` –∏ `/master_analyze`.
    - –ü—Ä–æ—á–∏—Ç–∞–Ω —Ñ–∞–π–ª `src/bot/commands/master_commands/master_simulation_tools_cog.py` –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–æ–º–∞–Ω–¥.
    - –ü—Ä–æ—á–∏—Ç–∞–Ω—ã —Ñ–∞–π–ª—ã –º–æ–¥–µ–ª–µ–π (`conflict_simulation_system.py`, `ai_analysis_system.py`, `actions.py`, `check_results.py`, `combat_outcomes.py`) –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –∫–æ–º–∞–Ω–¥–∞–º–∏.
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `AGENTS.md`**:
    - –°–µ–∫—Ü–∏—è "–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω" –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Task 64 (—Å—Ç–∞–±—ã) –∏ –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ Task 65.
    - –î–æ–±–∞–≤–ª–µ–Ω —ç—Ç–æ—Ç –ª–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π.
- **–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –°–æ—Å—Ç–∞–≤–∏—Ç—å –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–ª–∞–Ω –¥–ª—è Task 65.

## Task 65: üñ•Ô∏è UI.11 UI for Balance Tools
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –°–æ–∑–¥–∞—Ç—å UI —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Å–∏–º—É–ª—è—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–æ–∫, –±–æ–µ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π, –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤; –∞–Ω–∞–ª–∏–∑ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏). –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, —Å—Ç–∞–±—ã UI —Å–µ—Ä–≤–∏—Å–æ–≤, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ API –∏ –∑–∞–≥–ª—É—à–∫–∏ UI —Å—Ç—Ä–∞–Ω–∏—Ü/—Ç–µ—Å—Ç–æ–≤.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ `src/ui/src/types/simulation.ts` –¥–ª—è:
        - `UISimulateCheckParams`, `IUICheckResult` (–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö `IModifierDetail`, `ICheckOutcome`).
        - `UISimulateCombatActionParams`, `UICombatActionResult`.
        - `UISimulateConflictParams`, `UIInputConflictAction`, `UIInputParsedAction`, `UIActionEntity`, `UIPydanticConflictForSim`.
        - `UIAnalyzeAiGenerationParams`, `UIAnalyzableEntityType`, `UIAiAnalysisResult`, `UIEntityAnalysisReport`.
    - –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω—ã —Å—Ç–∞–±—ã (–∑–∞–≥–ª—É—à–∫–∏) API —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ UI:
        - –í `src/ui/src/services/balanceToolsService.ts` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–æ–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: `simulateCheck`, `simulateCombatAction`, `simulateConflict`, `analyzeAiGeneration`.
    - –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è UI Task 65: –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏" –≤ `AGENTS.md`, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `/master_simulate` –∏ `/master_analyze`.
    - –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∏—Ö —Ç–µ—Å—Ç–æ–≤ –≤ `src/ui/src/pages/BalanceToolsPage/`:
        - `BalanceToolsPage.tsx` –∏ `BalanceToolsPage.test.tsx`
        - `SimulateCheckTab.tsx` –∏ `SimulateCheckTab.test.tsx`
        - `SimulateCombatActionTab.tsx` –∏ `SimulateCombatActionTab.test.tsx`
        - `SimulateConflictTab.tsx` –∏ `SimulateConflictTab.test.tsx`
        - `AnalyzeAiGenerationTab.tsx` –∏ `AnalyzeAiGenerationTab.test.tsx`
    - –®–∞–≥ 4 (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ): –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª-–∑–∞–≥–ª—É—à–∫–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ UI-—Å–µ—Ä–≤–∏—Å–∞:
        - `src/ui/src/services/balanceToolsService.test.ts`
    - –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω `AGENTS.md` (—ç—Ç–æ—Ç –ª–æ–≥ –∏ —Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω).
- **–°—Ç–∞—Ç—É—Å Task 65**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ UI-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, —Å—Ç–∞–±–æ–≤, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –∏ –∑–∞–≥–ª—É—à–µ–∫ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤/—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ó–∞–¥–∞—á–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–¥–∞—á–µ UI-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ UI –∏ —Ç–µ—Å—Ç–æ–≤.

## Task 64: üñ•Ô∏è UI.10 UI for Monitoring and Logging
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –°–æ–∑–¥–∞—Ç—å UI —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤ (WorldState, StoryLog), –∞ —Ç–∞–∫–∂–µ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–∞—Ä—Ç—ã (Locations). –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, —Å—Ç–∞–±—ã UI —Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ API.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:
        - –í `src/ui/src/types/monitoring.ts` —Å–æ–∑–¥–∞–Ω—ã `UIStoryLogData`, `UIEventType`, `UIStoryLogFilterParams`.
        - –í `src/ui/src/types/location.ts` —Å–æ–∑–¥–∞–Ω—ã `UILocationData`, `UILocationType`, `UILocationFilterParams`.
        - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ `PaginatedResponse` (–∏–∑ `entities.ts`) –∏ `RuleConfigEntry` (–∏–∑ `ruleconfig.ts`).
    - –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω—ã —Å—Ç–∞–±—ã (–∑–∞–≥–ª—É—à–∫–∏) API —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ UI:
        - –í `src/ui/src/services/monitoringService.ts` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–æ–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è WorldState –∏ StoryLog.
        - –í `src/ui/src/services/locationService.ts` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–æ–∫–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ª–æ–∫–∞—Ü–∏—è—Ö.
    - –®–∞–≥ 3: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è UI Task 64: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥, –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ö–∞—Ä—Ç–∞" –≤ `AGENTS.md`, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø–æ–¥–∫–æ–º–∞–Ω–¥—ã `/master_monitor`.
    - –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∏—Ö —Ç–µ—Å—Ç–æ–≤:
        - `src/ui/src/pages/MonitoringPage/WorldStatePage.tsx` –∏ `WorldStatePage.test.tsx`
        - `src/ui/src/pages/MonitoringPage/StoryLogPage.tsx` –∏ `StoryLogPage.test.tsx`
        - `src/ui/src/pages/MapPage/MapPage.tsx` –∏ `MapPage.test.tsx`
    - –®–∞–≥ 4 (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ): –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ UI-—Å–µ—Ä–≤–∏—Å–æ–≤:
        - `src/ui/src/services/monitoringService.test.ts`
        - `src/ui/src/services/locationService.test.ts`
    - –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω `AGENTS.md` (—ç—Ç–æ—Ç –ª–æ–≥ –∏ —Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω).
- **–°—Ç–∞—Ç—É—Å Task 64**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ UI-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, —Å—Ç–∞–±–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∫–∞—Ä—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –°–æ–∑–¥–∞–Ω—ã –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ç–µ—Å—Ç–æ–≤. –ó–∞–¥–∞—á–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–¥–∞—á–µ UI-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ UI –∏ —Ç–µ—Å—Ç–æ–≤.


## Task 63: üñ•Ô∏è UI.9 UI for Global Entity Management
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –°–æ–∑–¥–∞—Ç—å UI —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (GlobalNpc, MobileGroup). –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –±—ç–∫–µ–Ω–¥ (API, —Ç–∏–ø—ã, —Å—Ç–∞–±—ã —Å–µ—Ä–≤–∏—Å–æ–≤). UI –¥–ª—è GlobalEvent –æ—Ç–ª–æ–∂–µ–Ω –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –®–∞–≥ 1: –ü—Ä–æ–≤–µ–¥–µ–Ω –∞–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —á—Ç–æ –º–æ–¥–µ–ª–∏ `GlobalNpc`, `MobileGroup` –∏ –∏—Ö CRUD API —á–µ—Ä–µ–∑ –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã –≥–æ—Ç–æ–≤—ã. –ú–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã –¥–ª—è `GlobalEvent` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç. –ü–ª–∞–Ω —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω.
    - –®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `GlobalNpcData`, `GlobalNpcPayload`, `GlobalNpcUpdatePayload`, `MobileGroupData`, `MobileGroupPayload`, `MobileGroupUpdatePayload` –≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ `src/ui/src/types/globalEntity.ts`. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `PaginatedResponse`.
    - –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω—ã —Å—Ç–∞–±—ã API —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ `src/ui/src/services/globalEntityService.ts` –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ `GlobalNpc` –∏ `MobileGroup` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–æ–∫–æ–≤–æ–≥–æ `apiClient`.
    - –®–∞–≥ 4: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤-–∑–∞–≥–ª—É—à–µ–∫ –≤ –Ω–æ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/ui/src/pages/GlobalEntitiesPage/`:
        - `GlobalNpcListPage.tsx` –∏ `GlobalNpcDetailPage.tsx`
        - `MobileGroupListPage.tsx` –∏ `MobileGroupDetailPage.tsx`
    - –®–∞–≥ 5: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è UI Task 63: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ —Å—É—â–Ω–æ—Å—Ç—è–º–∏ (GlobalNpc, MobileGroup)" –≤ `AGENTS.md`.
    - –®–∞–≥ 6: –û–±–Ω–æ–≤–ª–µ–Ω `AGENTS.md` (—ç—Ç–æ—Ç –ª–æ–≥ –∏ —Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω).
    - –®–∞–≥ 7 (UI): –°–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã-–∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è Unit-—Ç–µ—Å—Ç–æ–≤ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å Task 63:
        - `src/ui/src/services/globalEntityService.test.ts`
        - `src/ui/src/pages/GlobalEntitiesPage/GlobalNpcListPage.test.tsx`
        - `src/ui/src/pages/GlobalEntitiesPage/GlobalNpcDetailPage.test.tsx`
        - `src/ui/src/pages/GlobalEntitiesPage/MobileGroupListPage.test.tsx`
        - `src/ui/src/pages/GlobalEntitiesPage/MobileGroupDetailPage.test.tsx`
    - **–°—Ç–∞—Ç—É—Å Task 63**: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ UI-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤, —Å—Ç–∞–±–æ–≤ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –°–æ–∑–¥–∞–Ω—ã –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è UI-—Ç–µ—Å—Ç–æ–≤. –ó–∞–¥–∞—á–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø–µ—Ä–µ–¥–∞—á–µ UI-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –¥–ª—è –ø–æ–ª–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ UI –∏ —Ç–µ—Å—Ç–æ–≤.

## Task 62: üñ•Ô∏è UI.8 UI for Quest Management
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –°–æ–∑–¥–∞—Ç—å UI —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞–º–∏. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –±—ç–∫–µ–Ω–¥ (API, —Ç–∏–ø—ã, —Å—Ç–∞–±—ã —Å–µ—Ä–≤–∏—Å–æ–≤).
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∑–∞–¥–∞—á–∞ Task 62. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (API 39, CRUD API 41 - –≤—ã–ø–æ–ª–Ω–µ–Ω—ã).
    - –®–∞–≥ 2: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã –≤ `src/bot/commands/master_commands/quest_master_commands.py` –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏/CRUD. –í—ã—è–≤–ª–µ–Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤ –∫–æ–º–∞–Ω–¥–µ `/master_quest progress_create`.
    - –®–∞–≥ 3: –°–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∏ –±—ç–∫–µ–Ω–¥–∞ –¥–ª—è UI.
    - –®–∞–≥ 4: –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∏ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–º –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥–∞–º –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–≤–µ—Å—Ç–∞–º–∏ (Questline, GeneratedQuest, QuestStep, PlayerQuestProgress) –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è UI. (–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ AGENTS.md –Ω–∏–∂–µ).
    - –®–∞–≥ 5: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ `/master_quest progress_create` –≤ `src/bot/commands/master_commands/quest_master_commands.py` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ –∫–≤–µ—Å—Ç–æ–≤. –ù–∞–ø–∏—Å–∞–Ω—ã unit-—Ç–µ—Å—Ç—ã. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∏–µ –æ—à–∏–±–∫–∏ –≤ –¥—Ä—É–≥–∏—Ö —Ç–µ—Å—Ç–∞—Ö. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ —Ç–µ—Å—Ç–∞—Ö –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ "–û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏".
    - –®–∞–≥ 6: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã (`QuestlineData`, `GeneratedQuestData`, `QuestStepData`, `PlayerQuestProgressData` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ `Payload`-—ã, `UIQuestStatus` enum) –≤ `src/ui/src/types/quest.ts`.
    - –®–∞–≥ 7: –°–æ–∑–¥–∞–Ω—ã —Å—Ç–∞–±—ã (–∑–∞–≥–ª—É—à–∫–∏) API —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ `src/ui/src/services/questService.ts`, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã –∫ –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥–∞–º –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ —Å—É—â–Ω–æ—Å—Ç—è–º–∏ –∫–≤–µ—Å—Ç–æ–≤.
    - –®–∞–≥ 8: –û–±–Ω–æ–≤–ª–µ–Ω `AGENTS.md` (—ç—Ç–æ—Ç –ª–æ–≥).

## Task 61: üñ•Ô∏è UI.7 UI for Faction and Relationship Management
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –°–æ–∑–¥–∞—Ç—å UI —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ—Ä–∞–∫—Ü–∏—è–º–∏ –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø–µ—Ä–≤–∞—è –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –∏–∑ `Tasks.txt`: Task 61.
    - –®–∞–≥ 2: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∑–∞–¥–∞—á–∞ Task 61 (–æ–ø–∏—Å–∞–Ω–∏–µ, –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ API - Task 41, –º–æ–¥–µ–ª–∏ - Task 20, 21).
    - –®–∞–≥ 3: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –º–æ–¥–µ–ª–∏ (`GeneratedFaction`, `Relationship`), CRUD-–æ–ø–µ—Ä–∞—Ü–∏–∏ (`CRUDFaction`, `CRUDRelationship`) –∏ –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã (`faction_master_commands.py`, `relationship_master_commands.py`). API –ø—Ä–∏–∑–Ω–∞–Ω—ã –≥–æ—Ç–æ–≤—ã–º–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
    - –®–∞–≥ 4: –°–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ UI-–∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏ —Å—Ç–∞–±–æ–≤.
    - –®–∞–≥ 5: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è UI:
        - –í `src/ui/src/types/faction.ts` —Å–æ–∑–¥–∞–Ω—ã `FactionLeaderInfo`, `Faction`, `FactionPayload`, `FactionUpdatePayload`.
        - –í `src/ui/src/types/relationship.ts` —Å–æ–∑–¥–∞–Ω—ã `RelationshipEntityInfo`, `RelationshipData`, `RelationshipPayload`, `RelationshipUpdatePayload`.
        - –í –æ–±–æ–∏—Ö —Ñ–∞–π–ª–∞—Ö —É–ø–æ–º—è–Ω—É—Ç –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `PaginatedResponse<T>`.
    - –®–∞–≥ 6: –°–æ–∑–¥–∞–Ω—ã —Å—Ç–∞–±—ã (–∑–∞–≥–ª—É—à–∫–∏) –¥–ª—è UI —Å–µ—Ä–≤–∏—Å–æ–≤:
        - –í `src/ui/src/services/factionService.ts` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–æ–∫–æ–≤—ã–µ CRUD-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ñ—Ä–∞–∫—Ü–∏–π.
        - –í `src/ui/src/services/relationshipService.ts` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–æ–∫–æ–≤—ã–µ CRUD-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π.
    - –®–∞–≥ 7: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (–∑–∞–≥–ª—É—à–∫–∏):
        - –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `src/ui/src/pages/FactionsPage` —Å —Ñ–∞–π–ª–∞–º–∏ `FactionsListPage.tsx` –∏ `FactionDetailPage.tsx`.
        - –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `src/ui/src/pages/RelationshipsPage` —Å —Ñ–∞–π–ª–∞–º–∏ `RelationshipsListPage.tsx` –∏ `RelationshipDetailPage.tsx`.
    - –®–∞–≥ 8: –û–±–Ω–æ–≤–ª–µ–Ω `AGENTS.md` (—ç—Ç–æ—Ç –ª–æ–≥, —Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è UI).

## Task 60: üñ•Ô∏è UI.6 UI for Inventory and Item Management
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ UI —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (`ItemDefinition`) –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–π —Å—É—â–Ω–æ—Å—Ç–µ–π (`InventoryItem` —É `Player`/`GeneratedNpc`).
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–ø–æ–ª–Ω–∞—è UI-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)**:
    - **–®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ TypeScript —Ç–∏–ø–æ–≤ –∏ —Å—Ç–∞–±–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤**:
        - **–¢–∏–ø—ã**:
            - `src/ui/src/types/items.ts`: –£–¥–∞–ª–µ–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `PaginatedResponse`. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `ItemDefinition`, `ItemPayload`, `InventoryItemData`, `EnrichedInventoryItem` –ø—Ä–∏–∑–Ω–∞–Ω—ã –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏.
            - `src/ui/src/types/entities.ts`: –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ, —á—Ç–æ `Player` –∏ `GeneratedNpc` —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–ª–µ `inventory: EnrichedInventoryItem[]` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è.
        - **–°–µ—Ä–≤–∏—Å—ã**:
            - `src/ui/src/services/itemService.ts`: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `PaginatedResponse` (—Ç–µ–ø–µ—Ä—å –∏–∑ `entities.ts`). –ú–æ–∫–æ–≤—ã–π –æ—Ç–≤–µ—Ç `listItems` –ø—Ä–∏–≤–µ–¥–µ–Ω –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–∏. –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ JSON –¥–ª—è `createItem` –∏ `updateItem`.
            - `src/ui/src/services/inventoryService.ts`: –ü—Ä–æ–≤–µ—Ä–µ–Ω, –ø—Ä–∏–∑–Ω–∞–Ω –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–º –¥–ª—è –º–æ–∫–æ–≤—ã—Ö –≤—ã–∑–æ–≤–æ–≤.
            - `src/ui/src/services/playerService.ts`: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è `attributes_json` –≤ `createPlayer` –∏ `updatePlayer`.
            - `src/ui/src/services/npcService.ts`: –ü—Ä–æ–≤–µ—Ä–µ–Ω, –ø—Ä–∏–∑–Ω–∞–Ω –∞–¥–µ–∫–≤–∞—Ç–Ω—ã–º.
    - **–®–∞–≥ 2: –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (`ItemDefinition`)**:
        - **`src/ui/src/pages/ItemManagementPage/ItemListPage.tsx`**:
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ `ItemDefinition` —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
            - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `itemService.listItems` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
            - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ (–ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ–æ—Ä–º–µ) –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ (–ø–µ—Ä–µ—Ö–æ–¥ –∫ —Ñ–æ—Ä–º–µ —Å ID).
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫.
        - **`src/ui/src/pages/ItemManagementPage/ItemListPage.test.tsx`**: –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è `ItemListPage`.
        - **`src/ui/src/pages/ItemManagementPage/ItemForm.tsx`**:
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–æ—Ä–º–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è `ItemDefinition`.
            - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –≤—Å–µ –ø–æ–ª—è –º–æ–¥–µ–ª–∏ `ItemPayload`, –≤–∫–ª—é—á–∞—è i18n –ø–æ–ª—è (`name_i18n`, `item_type_i18n` –∏ —Ç.–¥.) –∏ JSON –ø–æ–ª—è (`properties_json`). –î–ª—è JSON –ø–æ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `textarea` —Å –±–∞–∑–æ–≤–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π JSON.
            - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è `itemService.createItem` –∏ `itemService.updateItem`.
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏, –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± —É—Å–ø–µ—Ö–µ/–æ—à–∏–±–∫–µ.
            - –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `itemService.getItemDetails`.
        - **`src/ui/src/pages/ItemManagementPage/ItemForm.test.tsx`**: –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è `ItemForm`.
    - **–®–∞–≥ 3: –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è —Å—É—â–Ω–æ—Å—Ç–∏**:
        - **`src/ui/src/components/InventoryView/EntityInventoryView.tsx`**:
            - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ `EnrichedInventoryItem[]`.
            - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–º—è –ø—Ä–µ–¥–º–µ—Ç–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, —Å—Ç–∞—Ç—É—Å —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏, —Å–≤–æ–π—Å—Ç–≤–∞.
            - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ "–≠–∫–∏–ø–∏—Ä–æ–≤–∞—Ç—å"/"–°–Ω—è—Ç—å" (–≤—ã–∑—ã–≤–∞—é—Ç –∫–æ–ª–ª–±—ç–∫–∏).
            - –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–Ω–æ–ø–∫–∏ "–ò–∑–º–µ–Ω–∏—Ç—å" –∏ "–£–¥–∞–ª–∏—Ç—å" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `InventoryItem` (–≤—ã–∑—ã–≤–∞—é—Ç –∫–æ–ª–ª–±—ç–∫–∏).
        - **`src/ui/src/components/InventoryView/EntityInventoryView.test.tsx`**: –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è `EntityInventoryView`.
    - **–®–∞–≥ 4: –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞–º–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ (`InventoryItem`)**:
        - **`src/ui/src/pages/ItemManagementPage/AddItemToInventoryForm.tsx`**:
            - –§–æ—Ä–º–∞ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ (`ItemDefinition`) –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å —Å—É—â–Ω–æ—Å—Ç–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ `InventoryItem`).
            - –ü–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å `ItemDefinition` –∏–∑ —Å–ø–∏—Å–∫–∞ (–ø–æ–ª—É—á–µ–Ω–Ω–æ–≥–æ —á–µ—Ä–µ–∑ `itemService.listItems`), —É–∫–∞–∑–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, `instance_specific_properties_json`.
            - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `inventoryService.addItemToInventory`.
        - **`src/ui/src/pages/ItemManagementPage/AddItemToInventoryForm.test.tsx`**: –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã.
        - **`src/ui/src/pages/ItemManagementPage/EditInventoryItemForm.tsx`**:
             - –§–æ—Ä–º–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `InventoryItem`.
             - –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å `quantity` –∏ `instance_specific_properties_json`.
             - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `inventoryService.updateInventoryItem`.
        - **`src/ui/src/pages/ItemManagementPage/EditInventoryItemForm.test.tsx`**: –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã.
        - **`src/ui/src/pages/ItemManagementPage/ManageEntityInventory.tsx`**:
            - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ (Player –∏–ª–∏ NPC).
            - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `entityType` –∏ `entityId`.
            - –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–∏–≥—Ä–æ–∫–∞ –∏–ª–∏ NPC) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è `inventory` —á–µ—Ä–µ–∑ `playerService.getPlayerDetails` –∏–ª–∏ `npcService.getNpcDetails`.
            - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å —Å –ø–æ–º–æ—â—å—é `EntityInventoryView`.
            - –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ (—á–µ—Ä–µ–∑ `AddItemToInventoryForm`), —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—á–µ—Ä–µ–∑ `EditInventoryItemForm`) –∏ —É–¥–∞–ª–µ–Ω–∏—è `InventoryItem` (—á–µ—Ä–µ–∑ `inventoryService.deleteInventoryItem`).
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏/—Å–Ω—è—Ç–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (—á–µ—Ä–µ–∑ `inventoryService.updateInventoryItem`, –∏–∑–º–µ–Ω—è—è `equipped_status`).
            - –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –ø–æ—Å–ª–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–π.
        - **`src/ui/src/pages/ItemManagementPage/ManageEntityInventory.test.tsx`**: –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã.
    - **–®–∞–≥ 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –≤ –æ–±—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º**:
        - **`src/ui/src/pages/ItemManagementPage/ItemManagementDashboard.tsx`**:
            - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º.
            - –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É:
                - –ü—Ä–æ—Å–º–æ—Ç—Ä–æ–º –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–ø–∏—Å–∫–∞ `ItemDefinition` (`ItemListPage` –∏ `ItemForm`).
                - –í—ã–±–æ—Ä–æ–º —Å—É—â–Ω–æ—Å—Ç–∏ (Player/NPC) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –µ–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º.
                - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ (`ManageEntityInventory`).
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –ø–µ—Ä–µ–¥–∞—á–∞ ID —Å—É—â–Ω–æ—Å—Ç–µ–π.
        - **`src/ui/src/pages/ItemManagementPage/ItemManagementDashboard.test.tsx`**: –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã.
- **–°—Ç–∞—Ç—É—Å Task 60**: –ó–∞–≤–µ—Ä—à–µ–Ω–∞. UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è–º–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏ –ø–æ–∫—Ä—ã—Ç—ã —Ç–µ—Å—Ç–∞–º–∏.

## Task 56: üñ•Ô∏è UI.2 Basic UI Structure and Authentication Development (Backend part)
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±—ç–∫–µ–Ω–¥-—á–∞—Å—Ç—å –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ UI —á–µ—Ä–µ–∑ Discord OAuth2, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ UI –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ JWT –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ API –¥–ª—è –≤—ã–±–æ—Ä–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –≥–∏–ª—å–¥–∏–∏.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **–®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth2 Discord –Ω–∞ –±—ç–∫–µ–Ω–¥–µ**:
        - –í `src/config/settings.py` –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: `DISCORD_CLIENT_ID`, `DISCORD_CLIENT_SECRET`, `DISCORD_REDIRECT_URI`.
        - –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä `.env` —Ñ–∞–π–ª–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —ç—Ç–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.
    - **–®–∞–≥ 2: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ OAuth2 (–∏ –∏—Ö –¥–æ—Ä–∞–±–æ—Ç–∫–∞)**:
        - –°–æ–∑–¥–∞–Ω —Ä–æ—É—Ç–µ—Ä `src/api/routers/auth.py`.
        - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/auth/discord` –¥–ª—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Discord.
        - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω —ç–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/auth/discord/callback`:
            - –û–±–º–µ–Ω–∏–≤–∞–µ—Ç –∫–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ `access_token` Discord.
            - –ü–æ–ª—É—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ Discord (`/users/@me`).
            - –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≥–∏–ª—å–¥–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç Discord (`/users/@me/guilds`).
            - –§–∏–ª—å—Ç—Ä—É–µ—Ç –≥–∏–ª—å–¥–∏–∏ –ø–æ –ø—Ä–∞–≤–∞–º –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∏ –Ω–∞–ª–∏—á–∏—é –≤ `GuildConfig` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
            - –ù–∞—Ö–æ–¥–∏—Ç –∏–ª–∏ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å `MasterUser` –≤ –ë–î.
            - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç JWT (—Å–º. –®–∞–≥ 4), –≤–∫–ª—é—á–∞—è –≤ –Ω–µ–≥–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–∏–ª—å–¥–∏–π (`accessible_guilds`).
        - –†–æ—É—Ç–µ—Ä `auth_router` –ø–æ–¥–∫–ª—é—á–µ–Ω –≤ `src/main.py`.
    - **–®–∞–≥ 3: –ú–æ–¥–µ–ª—å –∏ CRUD –¥–ª—è –ú–∞—Å—Ç–µ—Ä-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π UI**:
        - –°–æ–∑–¥–∞–Ω–∞ SQLAlchemy –º–æ–¥–µ–ª—å `MasterUser` –≤ `src/models/master_user.py`.
        - –ú–æ–¥–µ–ª—å `MasterUser` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `src/models/__init__.py`.
        - –°–æ–∑–¥–∞–Ω–∞ –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è Alembic (`cdc86ea77142_create_master_users_table.py`).
        - –°–æ–∑–¥–∞–Ω—ã Pydantic —Å—Ö–µ–º—ã –≤ `src/schemas/master_user.py` –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ `src/schemas/__init__.py`.
        - –°–æ–∑–¥–∞–Ω `CRUDMasterUser` –≤ `src/core/crud/crud_master_user.py` –∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –∏–∑ `src/core/crud/__init__.py`.
    - **–®–∞–≥ 4: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ —á–µ—Ä–µ–∑ JWT**:
        - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `python-jose[cryptography]` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `requirements.txt` –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.
        - –í `src/core/security.py` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
            - –ú–æ–¥–µ–ª—å `TokenPayload` (–æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è `accessible_guilds`).
            - –§—É–Ω–∫—Ü–∏—è `create_access_token` (–æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –ø—Ä–∏–µ–º–∞ —Å–ª–æ–≤–∞—Ä—è `subject_data`).
            - –§—É–Ω–∫—Ü–∏—è `verify_token_payload` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ JWT.
            - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ FastAPI `oauth2_scheme`, `get_current_token_payload`, `get_current_master_user`.
        - –£—Ç–∏–ª–∏—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã –∏–∑ `src/core/__init__.py`.
        - –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/auth/discord/callback` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `create_access_token` –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ JWT.
    - **–®–∞–≥ 5: API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–∏–ª—å–¥–∏—è–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏ –∏—Ö –¥–æ—Ä–∞–±–æ—Ç–∫–∞)**:
        - –í `src/api/routers/auth.py` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã:
            - –≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/auth/me/guilds` (–∑–∞—â–∏—â–µ–Ω–Ω—ã–π JWT): –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —á—Ç–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≥–∏–ª—å–¥–∏–π –∏–∑ –ø–æ–ª—è `accessible_guilds` –≤ JWT.
            - –≠–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/auth/session/active-guild` (–∑–∞—â–∏—â–µ–Ω–Ω—ã–π JWT): —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `active_guild_id` –≤ —Å–µ—Å—Å–∏–∏ –ø—É—Ç–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ JWT.
            - –≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/auth/session/active-guild` (–∑–∞—â–∏—â–µ–Ω–Ω—ã–π JWT): –ø–æ–ª—É—á–∞–µ—Ç `active_guild_id` –∏–∑ JWT.
    - **–®–∞–≥ 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `active_guild_id` –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ API**:
        - –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: —Å–∏—Å—Ç–µ–º–∞ JWT –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ FastAPI –≥–æ—Ç–æ–≤—ã.
        - –í `src/api/routers/auth.py` –¥–æ–±–∞–≤–ª–µ–Ω–æ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è—Ö –∫ –±—É–¥—É—â–∏–º API –¥–ª—è UI –ø–æ –æ–±—Ä–∞–±–æ—Ç–∫–µ `active_guild_id`.
    - **–î–æ—Ä–∞–±–æ—Ç–∫–∞ (—Å–æ–≥–ª–∞—Å–Ω–æ —Ç–µ–∫—É—â–µ–º—É –∑–∞–ø—Ä–æ—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç [—Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã])**:
        - –≠–Ω–¥–ø–æ–∏–Ω—Ç `/api/auth/discord/callback` –æ–±–Ω–æ–≤–ª–µ–Ω: —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ UI (`settings.UI_APP_REDIRECT_URL_AFTER_LOGIN`) —Å JWT –≤ URL-–ø–∞—Ä–∞–º–µ—Ç—Ä–µ `?token=`. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `UI_APP_REDIRECT_URL_AFTER_LOGIN`.
        - –≠–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/auth/session/active-guild` –æ–±–Ω–æ–≤–ª–µ–Ω: —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ `guild_id` –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Å–ø–∏—Å–∫–µ `accessible_guilds` –∏–∑ JWT –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç 403, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω.
        - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–æ–≤—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /api/auth/logout` (–∑–∞—â–∏—â–µ–Ω–Ω—ã–π JWT), –∫–æ—Ç–æ—Ä—ã–π –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 204 No Content, —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—è –∫–ª–∏–µ–Ω—Ç—É –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É–¥–∞–ª–∏—Ç—å —Ç–æ–∫–µ–Ω.
        - –í `src/core/security.py` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å FastAPI `get_current_active_guild_id`, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `active_guild_id` –≤ JWT –∏ –≤—ã–∑—ã–≤–∞–µ—Ç –æ—à–∏–±–∫—É 400, –µ—Å–ª–∏ –æ–Ω –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
        - –ù–∞–ø–∏—Å–∞–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã –≤ `tests/api/routers/test_auth.py` –¥–ª—è –≤—Å–µ—Ö –≤—ã—à–µ–ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π. –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç.
- **–°—Ç–∞—Ç—É—Å**: –ë—ç–∫–µ–Ω–¥-—á–∞—Å—Ç—å Task 56 –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞.

## Tasks 57, 58, 59: üñ•Ô∏è UI Backend Preparation for Player, RuleConfig, and AI Moderation
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –û–±–µ—Å–ø–µ—á–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±—ç–∫–µ–Ω–¥ API (—á–µ—Ä–µ–∑ Master –∫–æ–º–∞–Ω–¥—ã), –∞ —Ç–∞–∫–∂–µ —Å–æ–∑–¥–∞—Ç—å TypeScript –¥–µ—Ñ–∏–Ω–∏—Ü–∏–∏ –∏ —Å—Ç–∞–±—ã UI —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ò–≥—Ä–æ–∫–∞–º–∏/–ü–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ (Task 57), –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –ü—Ä–∞–≤–∏–ª (Task 58) –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π/–º–æ–¥–µ—Ä–∞—Ü–∏–µ–π AI –∫–æ–Ω—Ç–µ–Ω—Ç–∞ (Task 59).
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **–®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –¥–ª—è Task 57 (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ò–≥—Ä–æ–∫–∞–º–∏/–ü–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏)**:
        - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã `player_master_commands.py` –∏ `npc_master_commands.py`.
        - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –Ω–∞–ª–∏—á–∏–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ `Player` –∏ `GeneratedNpc`.
        - –û—Ç–º–µ—á–µ–Ω–æ, —á—Ç–æ –∫–æ–º–∞–Ω–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (`update`) —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–ø–æ–ª—å–Ω–æ, —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ UI –∏–ª–∏ API —à–ª—é–∑–∞ –¥–ª—è –±–æ–ª–µ–µ REST-–ø–æ–¥–æ–±–Ω–æ–≥–æ bulk-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. –î–ª—è —Ç–µ–∫—É—â–µ–≥–æ —ç—Ç–∞–ø–∞ –ø—Ä–∏–∑–Ω–∞–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º.
    - **–®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –¥–ª—è Task 58 (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ RuleConfig)**:
        - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω `ruleconfig_master_commands.py`.
        - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –Ω–∞–ª–∏—á–∏–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ `RuleConfig`.
        - –ö–æ–º–∞–Ω–¥–∞ `list` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–ª–æ—Å–∫–∏–π —Å–ø–∏—Å–æ–∫; –æ—Ç–º–µ—á–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—Ä–µ—Ñ–∏–∫—Å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞ (–¥–ª—è –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è UI), —Ç–∞–∫ –∫–∞–∫ CRUD –º–µ—Ç–æ–¥—ã (`get_multi_by_guild_and_prefix`) —Å—É—â–µ—Å—Ç–≤—É—é—Ç.
    - **–®–∞–≥ 3: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Backend API –¥–ª—è Task 59 (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ú–æ–¥–µ—Ä–∞—Ü–∏—è AI –∫–æ–Ω—Ç–µ–Ω—Ç–∞)**:
        - –°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π Cog `src/bot/commands/master_commands/pending_generation_master_commands.py`.
        - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã:
            - `/master_pending_generation trigger`: –î–ª—è –∏–Ω–∏—Ü–∏–∞—Ü–∏–∏ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ai_orchestrator.trigger_ai_generation_flow`. *–û—Ç–º–µ—á–µ–Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ `trigger_ai_generation_flow` –∏ `prepare_ai_prompt` –¥–ª—è –ª—É—á—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ `entity_type` –∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.*
            - `/master_pending_generation list`: –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∑–∞–ø–∏—Å–µ–π `PendingGeneration` —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å—Ç–∞—Ç—É—Å—É –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
            - `/master_pending_generation view <id>`: –î–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ `PendingGeneration`.
            - `/master_pending_generation approve <id>`: –î–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `ai_orchestrator.save_approved_generation`.
            - `/master_pending_generation update <id>`: –î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, REJECTED, EDITED_PENDING_APPROVAL), –∑–∞–º–µ—Ç–∫–∏ –º–∞—Å—Ç–µ—Ä–∞ –∏–ª–∏ —Å–∞–º–∏—Ö –¥–∞–Ω–Ω—ã—Ö (`parsed_validated_data_json`) –¥–ª—è –∑–∞–ø–∏—Å–∏ `PendingGeneration`.
        - –ù–æ–≤—ã–π Cog –¥–æ–±–∞–≤–ª–µ–Ω –≤ `src/config/settings.py`.
    - **–®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∏–µ TypeScript –¥–µ—Ñ–∏–Ω–∏—Ü–∏–π –¥–ª—è UI**:
        - –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/ui/src/types/` —Å–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:
            - `entities.ts`: –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `Player`, `GeneratedNpc`, `PlayerPayload`, `GeneratedNpcPayload`, `PaginatedResponse`.
            - `ruleconfig.ts`: –°–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `RuleConfigEntry`, `RuleConfigMap`, `RuleConfigUpdatePayload`.
            - `pending_generation.ts`: –°–æ–¥–µ—Ä–∂–∏—Ç enum `UIMRModerationStatus`, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `UIPendingGeneration` –∏ –ø–µ–π–ª–æ–∞–¥—ã `TriggerGenerationPayload`, `UpdatePendingGenerationPayload`.
    - **–®–∞–≥ 5: –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç–∞–±–æ–≤ API —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ UI**:
        - –í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/ui/src/services/` —Å–æ–∑–¥–∞–Ω—ã —Ñ–∞–π–ª—ã:
            - `apiClient.ts`: –ú–æ–∫–æ–≤—ã–π API –∫–ª–∏–µ–Ω—Ç.
            - `playerService.ts`: –°—Ç–∞–±—ã —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ –∏–≥—Ä–æ–∫–∞–º–∏.
            - `npcService.ts`: –°—Ç–∞–±—ã —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ NPC.
            - `ruleConfigService.ts`: –°—Ç–∞–±—ã —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü–∏–π –Ω–∞–¥ `RuleConfig`.
            - `pendingGenerationService.ts`: –°—Ç–∞–±—ã —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∏ –º–æ–¥–µ—Ä–∞—Ü–∏–µ–π.
        - –í—Å–µ —Å–µ—Ä–≤–∏—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–∞–Ω–µ–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–µ TypeScript —Ç–∏–ø—ã –∏ –º–æ–∫–æ–≤—ã–π `apiClient`.
- **–°—Ç–∞—Ç—É—Å**: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –¥–ª—è UI –∑–∞–≤–µ—Ä—à–µ–Ω—ã. –ó–∞–¥–∞—á–∏ 57, 58, 59 –≥–æ—Ç–æ–≤—ã –∫ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π UI —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ (–∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è UI-—Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞–º–∏).
- **–ó–∞–º–µ—á–∞–Ω–∏–µ**: –í —Ö–æ–¥–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `trigger_generation` –≤—ã—è–≤–ª–µ–Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ `ai_orchestrator.trigger_ai_generation_flow` –∏ `ai_prompt_builder.prepare_ai_prompt` –¥–ª—è –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π –ø–µ—Ä–µ–¥–∞—á–∏ `entity_type` –∏ `generation_context_json`. –≠—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–µ –±—ã–ª–æ —á–∞—Å—Ç—å—é —Ç–µ–∫—É—â–µ–≥–æ –ø–ª–∞–Ω–∞, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –±—É–¥—É—â–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è.

## Task 55: üñ•Ô∏è UI.1 UI Technology Stack Selection and Basic Structure.
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Select a framework/library for developing the client UI application. Define the basic architecture of the UI application.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ UI**: –ò–∑—É—á–µ–Ω—ã –∑–∞–¥–∞—á–∏ UI.1 - UI.14 –≤ `Tasks.txt` –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –æ–±—â–µ–≥–æ –æ–±—ä–µ–º–∞ —Ä–∞–±–æ—Ç –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π.
    - **–ò—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π**: –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω—ã React, Vue, Electron, PyQt.
        - React: –ü–æ–ø—É–ª—è—Ä–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å –±–æ–ª—å—à–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥.
        - Vue.js: –ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, –Ω–∏–∑–∫–∏–π –ø–æ—Ä–æ–≥ –≤—Ö–æ–∂–¥–µ–Ω–∏—è, —Ö–æ—Ä–æ—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.
        - Electron: –î–ª—è –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö –¥–µ—Å–∫—Ç–æ–ø–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–µ–±-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.
        - PyQt: Python-–±–∏–Ω–¥–∏–Ω–≥–∏ –¥–ª—è Qt, –Ω–∞—Ç–∏–≤–Ω—ã–π –≤–∏–¥, –Ω–æ –≤—ã—à–µ –∫—Ä–∏–≤–∞—è –æ–±—É—á–µ–Ω–∏—è –∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏—è.
    - **–í—ã–±–æ—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–µ–∫–∞**:
        - **UI –§—Ä–µ–π–º–≤–æ—Ä–∫**: React (–≥–∏–±–∫–æ—Å—Ç—å, –±–æ–ª—å—à–æ–µ —Å–æ–æ–±—â–µ—Å—Ç–≤–æ, –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–µ–±).
        - **–Ø–∑—ã–∫**: TypeScript (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è, —É–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ IDE).
        - **–°–±–æ—Ä—â–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞**: Vite (–±—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –∏ HMR).
        - **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: React Router DOM.
        - **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º**: Zustand (–∏–ª–∏ React Context API).
    - **–°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã UI –ø—Ä–æ–µ–∫—Ç–∞**:
        - –° –ø–æ–º–æ—â—å—é `npm create vite@latest src/ui -- --template react-ts` —Å–æ–∑–¥–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ `src/ui/`.
        - –í `src/ui/README.md` –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å—Ç–µ–∫–∞, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É, —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –¥–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏.
        - –í `src/ui/AGENTS.md` –¥–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –ø–æ —Ä–∞–±–æ—Ç–µ —Å UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏, —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∫–æ–¥—É –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ.
- **–°—Ç–∞—Ç—É—Å**: –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –≤—ã–±—Ä–∞–Ω, –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ UI –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–Ω–∞.

## Task 53: üß† 11.4 NLU and Intent Recognition in Dialogue (Guild-Scoped)
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Processing player input in dialogue mode. If player status is 'dialogue', NLU (13) does not save the action to collected_actions_json, but passes it directly to the Dialogue Management Module (46) via the handle_dialogue_input API (46). NLU (13) still recognizes Intents/Entities and passes them to 46.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **–ê–Ω–∞–ª–∏–∑**: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã `src/core/action_processor.py` –∏ `src/core/dialogue_system.py`. –í—ã—è–≤–ª–µ–Ω–æ, —á—Ç–æ –±–∞–∑–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–∏–∞–ª–æ–≥–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É –ø—Ä–∏ `PlayerStatus.DIALOGUE` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ `process_player_message_for_nlu`. –û–¥–Ω–∞–∫–æ, NLU-–ø–∞—Ä—Å–µ—Ä –Ω–µ –≤—ã–∑—ã–≤–∞–ª—Å—è –¥–ª—è —ç—Ç–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
    - **–®–∞–≥ 1: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `src/core/action_processor.py` (—Ñ—É–Ω–∫—Ü–∏—è `process_player_message_for_nlu`):**
        - –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Ç–∞–∫, —á—Ç–æ `nlu_service.parse_player_input` —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä–æ–∫–∞.
        - –ï—Å–ª–∏ `player.current_status == PlayerStatus.DIALOGUE`, —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ (`ParsedAction.intent` –∏ `ParsedAction.entities`) –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `dialogue_system.handle_dialogue_input` –≤–º–µ—Å—Ç–µ —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º —Å–æ–æ–±—â–µ–Ω–∏—è.
    - **–®–∞–≥ 2: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `src/core/dialogue_system.py` (—Ñ—É–Ω–∫—Ü–∏—è `handle_dialogue_input`):**
        - –°–∏–≥–Ω–∞—Ç—É—Ä–∞ `handle_dialogue_input` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –ø—Ä–∏–µ–º–∞ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ `parsed_intent: Optional[str]` –∏ `parsed_entities: Optional[List[Dict[str, Any]]]`.
        - –≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `context_for_llm`, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `generate_npc_dialogue`.
    - **–®–∞–≥ 3: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `src/core/ai_prompt_builder.py` (—Ñ—É–Ω–∫—Ü–∏—è `prepare_dialogue_generation_prompt`):**
        - –§—É–Ω–∫—Ü–∏—è `prepare_dialogue_generation_prompt` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞–ª–∏—á–∏—è `parsed_intent` –∏ `parsed_entities` –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ.
        - –ï—Å–ª–∏ –∏–Ω—Ç–µ–Ω—Ç –Ω–µ "unknown_intent", —ç—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–∏–Ω—Ç–µ–Ω—Ç –∏ —Å—É—â–Ω–æ—Å—Ç–∏) –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ NPC. –ü—Ä–∏–º–µ—Ä –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –≤ –ø—Ä–æ–º–ø—Ç: `(Player's message was analyzed by NLU. Recognized intent: '**'{intent}'**. Recognized NLU entities: {entities_str}.)`.
    - **–®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Unit-—Ç–µ—Å—Ç–æ–≤:**
        - –í `tests/core/test_action_processor.py` –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã (`test_process_player_message_for_nlu_player_in_dialogue`, `test_process_player_message_for_nlu_player_in_dialogue_nlu_unknown_intent`) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–∑–æ–≤–∞ NLU –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ `handle_dialogue_input` –≤ —Ä–µ–∂–∏–º–µ –¥–∏–∞–ª–æ–≥–∞. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–µ—Å—Ç `test_process_player_message_for_nlu_player_not_in_dialogue_queues_action` –ø—Ä–æ–≤–µ—Ä–µ–Ω –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å.
        - –í `tests/core/test_dialogue_system.py` –æ–±–Ω–æ–≤–ª–µ–Ω —Ç–µ—Å—Ç `test_handle_dialogue_input_success` (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ `test_handle_dialogue_input_success_with_nlu_data`) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–µ–º–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ NLU-–¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è `generate_npc_dialogue`.
        - –í `tests/core/test_ai_prompt_builder.py` –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç—ã (`test_prepare_dialogue_prompt_with_nlu_data`, `test_prepare_dialogue_prompt_with_nlu_unknown_intent`) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è NLU-–¥–∞–Ω–Ω—ã—Ö (–∏–ª–∏ –∏—Ö –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ø—Ä–∏ unknown_intent) –≤ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –ø—Ä–æ–º–ø—Ç.
- **–°—Ç–∞—Ç—É—Å**: –ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞.

## –î–æ—Ä–∞–±–æ—Ç–∫–∞ Task 37: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å –¥–∏–∞–ª–æ–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π (—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `tone_hint`)
- **–î–∞—Ç–∞**: [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]
- **–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é —á–∞—Å—Ç—å Task 37, –∫–∞—Å–∞—é—â—É—é—Å—è –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –Ω–∞ —Ç–æ–Ω NPC –≤ –¥–∏–∞–ª–æ–≥–∞—Ö.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **–ê–Ω–∞–ª–∏–∑**: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã `src/core/dialogue_system.py`, `src/core/ai_prompt_builder.py` –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞—Å—Ç–∏ `AGENTS.md`. –í—ã—è–≤–ª–µ–Ω–æ, —á—Ç–æ `prepare_dialogue_generation_prompt` —É–∂–µ —Å–æ–±–∏—Ä–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª–∞ `relationship_influence:dialogue:availability_and_tone` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `tone_hint`.
    - **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è `tone_hint`**:
        - –í `src/core/ai_prompt_builder.py` –≤ —Ñ—É–Ω–∫—Ü–∏—é `prepare_dialogue_generation_prompt` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞:
            - –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–≤–∏–ª–∞ `relationship_influence:dialogue:availability_and_tone` –∏–∑ `RuleConfig`.
            - –ï—Å–ª–∏ –ø—Ä–∞–≤–∏–ª–æ –Ω–∞–π–¥–µ–Ω–æ –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–µ–∫—Ü–∏—é `tone_modifiers`, –∞ —Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ –∫ NPC:
                - –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏—Ç–µ—Ä–∞—Ü–∏—è –ø–æ `tone_modifiers` (–æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ø–æ —É–±—ã–≤–∞–Ω–∏—é –ø–æ—Ä–æ–≥–∞ `relationship_above`).
                - –¢–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å –ø–æ—Ä–æ–≥–æ–º.
                - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `tone_hint` –∏–∑ –ø–µ—Ä–≤–æ–≥–æ –ø–æ–¥–æ—à–µ–¥—à–µ–≥–æ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞.
                - –ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –ø–æ—Ä–æ–≥ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `tone_hint` –∏–∑ –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ —Å `relationship_default: true` (–µ—Å–ª–∏ –µ—Å—Ç—å).
            - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π `derived_tone_hint` –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Your current emotional tone towards {player_name} should reflect: **{derived_tone_hint}**.").
    - **Unit-—Ç–µ—Å—Ç—ã**:
        - –í `tests/core/test_ai_prompt_builder.py` –¥–æ–±–∞–≤–ª–µ–Ω—ã 4 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–∞ (`test_dialogue_prompt_with_positive_relationship_tone_hint`, `test_dialogue_prompt_with_negative_relationship_tone_hint`, `test_dialogue_prompt_with_neutral_relationship_default_tone_hint`, `test_dialogue_prompt_no_relationship_influence_rule`) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `tone_hint`.
    - **–û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å `dialogue_option_availability`**: –î–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ "–û—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö" –≤ `AGENTS.md` –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—É–Ω–∫—Ç, —Ç—Ä–µ–±—É—é—â–∏–π –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–µ–¥–∏–∑–∞–π–Ω–∞ —Å–∏—Å—Ç–µ–º—ã –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –æ–ø—Ü–∏–π.
- **–°—Ç–∞—Ç—É—Å**: –ß–∞—Å—Ç—å –∑–∞–¥–∞—á–∏ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ `tone_hint` –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –≤ –¥–∏–∞–ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∏ –ø–æ–∫—Ä—ã—Ç–∞ —Ç–µ—Å—Ç–∞–º–∏.

## Task 52: üß† 11.3 NPC Memory Management (Persistent, Per Guild)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Storing NPC interaction history with players/parties. Implement PlayerNpcMemory/PartyNpcMemory models. API `add_to_npc_memory` and `get_npc_memory`.
- **–ü–ª–∞–Ω**: –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤—ã—à–µ.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **–®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å `PartyNpcMemory`**:
        - –í —Ñ–∞–π–ª–µ `src/models/party_npc_memory.py` —Å–æ–∑–¥–∞–Ω–∞ –º–æ–¥–µ–ª—å `PartyNpcMemory`, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è `PlayerNpcMemory` —Å –∑–∞–º–µ–Ω–æ–π `player_id` –Ω–∞ `party_id`.
        - –ú–æ–¥–µ–ª—å `PartyNpcMemory` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `src/models/__init__.py` –∏ –≤ –ª–æ–≥–≥–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–∞–∫–µ—Ç–∞.
    - **–®–∞–≥ 2: –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é Alembic –¥–ª—è `PartyNpcMemory`**:
        - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt` –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ `alembic`.
        - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ `alembic/versions/711257a22d1d_add_party_npc_memories_table.py`.
        - –ó–∞–ø–æ–ª–Ω–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `upgrade()` –∏ `downgrade()` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/—É–¥–∞–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã `party_npc_memories` –∏ –µ–µ –∏–Ω–¥–µ–∫—Å–æ–≤.
    - **–®–∞–≥ 3: –°–æ–∑–¥–∞—Ç—å CRUD –¥–ª—è `PartyNpcMemory`**:
        - –í —Ñ–∞–π–ª–µ `src/core/crud/crud_party_npc_memory.py` —Å–æ–∑–¥–∞–Ω –∫–ª–∞—Å—Å `CRUDPartyNpcMemory` —Å –º–µ—Ç–æ–¥–∞–º–∏ `get_multi_by_party_and_npc`, `get_multi_by_party`, `get_multi_by_npc`, `get_count_for_filters`.
        - `crud_party_npc_memory` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `src/core/crud/__init__.py`.
    - **–®–∞–≥ 4: –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å `npc_memory_system.py`**:
        - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/core/npc_memory_system.py` —Å –∑–∞–≥–ª—É—à–∫–∞–º–∏ –¥–ª—è API —Ñ—É–Ω–∫—Ü–∏–π.
        - –ú–æ–¥—É–ª—å –∏ –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ `src/core/__init__.py`.
    - **–®–∞–≥ 5: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API `add_to_npc_memory` –≤ `npc_memory_system.py`**:
        - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–≤–µ—Ä–∫—É `player_id`/`party_id`, –≤—ã–∑–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ CRUD, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ `details` –≤ `memory_data_json`.
    - **–®–∞–≥ 6: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å API `get_npc_memory` –≤ `npc_memory_system.py`**:
        - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–≤–µ—Ä–∫—É `player_id`/`party_id` –∏ –≤—ã–∑–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö CRUD-–º–µ—Ç–æ–¥–æ–≤.
    - **–®–∞–≥ 7: –ù–∞–ø–∏—Å–∞—Ç—å Unit-—Ç–µ—Å—Ç—ã**:
        - –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –º–æ–¥–µ–ª–∏ `PartyNpcMemory` –≤ `tests/models/test_party_npc_memory.py`.
        - –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è `CRUDPartyNpcMemory` –≤ `tests/core/crud/test_crud_party_npc_memory.py`.
        - –°–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è `add_to_npc_memory` –∏ `get_npc_memory` –≤ `tests/core/test_npc_memory_system.py`.
        - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ –≤ —Ç–µ—Å—Ç–∞—Ö, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ–º –ø–æ–ª–µ–π –≤ `GuildConfig` –∏ –¥–æ—Å—Ç—É–ø–æ–º –∫ `call_args` –º–æ–∫–æ–≤.
        - –¢–µ—Å—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –ë–î SQLite (`test_party_npc_memory.py`, `test_crud_party_npc_memory.py`), –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ `@pytest.mark.xfail` –∏–∑-–∑–∞ –Ω–µ—Ä–µ—à–µ–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã `MissingGreenlet` —Å `aiosqlite` –∏ `StaticPool` –≤ —Ç–µ—Å—Ç–æ–≤–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.
        - –¢–µ—Å—Ç—ã –¥–ª—è `test_npc_memory_system.py` (–∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ –º–æ–∫–∏) —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ö–æ–¥—è—Ç.
    - **–®–∞–≥ 8: –û–±–Ω–æ–≤–∏—Ç—å `AGENTS.md`**: –≠—Ç–æ—Ç –ª–æ–≥.

## Task 51: üß† 11.2 Dialogue Context and Status (Guild-Scoped)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Implement logic for managing the state of a dialogue session for a player/party. API `start_dialogue`, `handle_dialogue_input`, `end_dialogue`.
- **–ü–ª–∞–Ω**:
    1.  **–ê–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á–∏ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**: –ò–∑—É—á–µ–Ω—ã Task 51, `action_processor.py`, `dialogue_system.py`, –º–æ–¥–µ–ª–∏ Player, Party, NPC, Enums (PlayerStatus, EventType), CRUDs, `game_events.py`.
        *   `PlayerStatus.DIALOGUE` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. `PartyTurnStatus` –¥–ª—è –¥–∏–∞–ª–æ–≥–∞ –ø–æ–∫–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è.
        *   "–í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å –æ –¥–∏–∞–ª–æ–≥–µ" –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ —Å–ª–æ–≤–∞—Ä–µ `active_dialogues` –≤ `dialogue_system.py`.
        *   `EventType.DIALOGUE_START, DIALOGUE_LINE, DIALOGUE_END` –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã.
    2.  **–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è API `start_dialogue`**:
        *   –§—É–Ω–∫—Ü–∏—è `start_dialogue(session, guild_id, player_id, target_npc_id)` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `src/core/dialogue_system.py`.
        *   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä–æ–∫–∞, NPC.
        *   –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –¥–∏–∞–ª–æ–≥, —Å—Ç–∞—Ç—É—Å –±–æ—è –∏–≥—Ä–æ–∫–∞.
        *   –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `player.current_status = PlayerStatus.DIALOGUE`.
        *   –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ `active_dialogues: Dict[Tuple[int, int], Dict[str, Any]]` –≤–∏–¥–∞ `(guild_id, player_id) -> {"npc_id", "npc_name", "dialogue_history"}`.
        *   –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ `EventType.DIALOGUE_START`.
        *   –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ `src/core/__init__.py`.
    3.  **–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è API `handle_dialogue_input`**:
        *   –§—É–Ω–∫—Ü–∏—è `handle_dialogue_input(session, guild_id, player_id, message_text)` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `src/core/dialogue_system.py`.
        *   –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è –∏–≥—Ä–æ–∫–∞.
        *   –ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–≥—Ä–æ–∫. –†–µ–ø–ª–∏–∫–∞ –∏–≥—Ä–æ–∫–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `dialogue_history`.
        *   –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `generate_npc_dialogue` (–∏–∑ Task 50).
        *   –û—Ç–≤–µ—Ç NPC –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ `dialogue_history`.
        *   –õ–æ–≥–∏—Ä—É—é—Ç—Å—è `EventType.DIALOGUE_LINE` –¥–ª—è –∏–≥—Ä–æ–∫–∞ –∏ NPC.
        *   –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ `src/core/__init__.py`.
    4.  **–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è API `end_dialogue`**:
        *   –§—É–Ω–∫—Ü–∏—è `end_dialogue(session, guild_id, player_id)` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `src/core/dialogue_system.py`.
        *   –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞.
        *   –°–Ω–∏–º–∞–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å `PlayerStatus.DIALOGUE` (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è `PlayerStatus.EXPLORING`).
        *   –£–¥–∞–ª—è–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –∏–∑ `active_dialogues`.
        *   –õ–æ–≥–∏—Ä—É–µ—Ç—Å—è `EventType.DIALOGUE_END`.
        *   –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ `src/core/__init__.py`.
    5.  **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Action Processing Module (Task 21/6.11)**:
        *   –í `src/core/action_processor.py` –≤ `ACTION_DISPATCHER` –¥–ª—è –∏–Ω—Ç–µ–Ω—Ç–∞ "talk" (–∏ –Ω–æ–≤–æ–≥–æ "start_dialogue") –¥–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `_handle_talk_to_npc_action_wrapper`, –≤—ã–∑—ã–≤–∞—é—â–∏–π `start_dialogue`.
        *   –î–æ–±–∞–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `_handle_end_dialogue_action_wrapper` –¥–ª—è –∏–Ω—Ç–µ–Ω—Ç–∞ "end_dialogue".
        *   –§—É–Ω–∫—Ü–∏—è `process_player_message_for_nlu` –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞: –µ—Å–ª–∏ `player.current_status == PlayerStatus.DIALOGUE`, –≤–≤–æ–¥ –∏–≥—Ä–æ–∫–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `handle_dialogue_input`, –∞ –æ—Ç–≤–µ—Ç NPC –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–≥—Ä–æ–∫—É. –ò–Ω–∞—á–µ - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ NLU.
    6.  **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –∏ Enums**: –ê–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑–∞–ª, —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö Enums –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –ù–æ–≤–∞—è –º–æ–¥–µ–ª—å –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏ –¥–∏–∞–ª–æ–≥–∞ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª–∞—Å—å (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–ª–æ–≤–∞—Ä—å –≤ –ø–∞–º—è—Ç–∏).
    7.  **–ù–∞–ø–∏—Å–∞–Ω–∏–µ Unit-—Ç–µ—Å—Ç–æ–≤**:
        *   –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `tests/core/test_dialogue_system.py`.
        *   –ù–∞–ø–∏—Å–∞–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è `start_dialogue`, `handle_dialogue_input`, `end_dialogue`, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (—É—Å–ø–µ—Ö, –æ—à–∏–±–∫–∏, –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `active_dialogues`).
    8.  **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `AGENTS.md`**: –≠—Ç–æ—Ç –ª–æ–≥.
- **–°—Ç–∞—Ç—É—Å**: –ó–∞–¥–∞—á–∞ Task 51 –≤—ã–ø–æ–ª–Ω–µ–Ω–∞.

## Task 50: üß† 11.1 Dialogue Generation Module (LLM, Multy-i18n, According to Rules) - –°–µ—Å—Å–∏—è 2024-07-26 (–ù–∞—á–∞–ª–æ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Prepare the prompt for the LLM to generate NPC dialogue lines. API `generate_npc_dialogue(guild_id: int, context: dict) -> str`.
- **–ê–Ω–∞–ª–∏–∑ —Ñ–∞–π–ª–æ–≤ (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π)**:
    - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ñ–∞–π–ª—ã `src/core/ai_prompt_builder.py`, `src/core/dialogue_system.py`, `src/core/__init__.py`, `tests/core/test_ai_prompt_builder.py`, `tests/core/test_dialogue_system.py`.
    - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, —á—Ç–æ `prepare_dialogue_generation_prompt` –≤ `ai_prompt_builder.py` —É–∂–µ –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—à–∏—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç.
    - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, —á—Ç–æ `generate_npc_dialogue` –≤ `dialogue_system.py` –≤—ã–∑—ã–≤–∞–µ—Ç `prepare_dialogue_generation_prompt` –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ú–û–ö –¥–ª—è LLM (`random.choice`).
    - –≠–∫—Å–ø–æ—Ä—Ç—ã –≤ `__init__.py` –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã.
    - –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –≤ `test_ai_prompt_builder.py` –∏ `test_dialogue_system.py` –ø–æ–∫—Ä—ã–≤–∞—é—Ç –±–∞–∑–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏.
    - –í `ai_prompt_builder.py` –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–µ CRUD.
- **–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø–ª–∞–Ω (–Ω–∞ —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é)**:
    1.  **–û–±–Ω–æ–≤–∏—Ç—å `AGENTS.md`**:
        *   –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω —Ç–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Task 50 –≤ —Å–µ–∫—Ü–∏–∏ "–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π", –æ—Ç–º–µ—Ç–∏–≤, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏–∏ `prepare_dialogue_generation_prompt` –∏ `generate_npc_dialogue` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã.
        *   –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø–ª–∞–Ω —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ —Å–µ–∫—Ü–∏—é "–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω" –≤ `AGENTS.md`.
    2.  **–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ Unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è `prepare_dialogue_generation_prompt` –≤ `tests/core/test_ai_prompt_builder.py`**:
        *   –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã (`test_prepare_dialogue_prompt_basic_success`, `test_prepare_dialogue_prompt_with_relationship_quest_hidden_context`, `test_prepare_dialogue_prompt_no_relationship`).
        *   –¢–µ—Å—Ç—ã –ø—Ä–∏–∑–Ω–∞–Ω—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–≥–æ –ø–ª–∞–Ω–∞ –ø–æ –ø—Ä–æ–≤–µ—Ä–∫–µ —Å–±–æ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (NPC, –ò–≥—Ä–æ–∫, —è–∑—ã–∫, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ LLM, –ø–∞–º—è—Ç—å NPC, –û—Ç–Ω–æ—à–µ–Ω–∏—è, –°–∫—Ä—ã—Ç—ã–µ –û—Ç–Ω–æ—à–µ–Ω–∏—è, –ö–≤–µ—Å—Ç—ã). –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –Ω–µ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å.
    3.  **–ê–Ω–∞–ª–∏–∑ –∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ Unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è `generate_npc_dialogue` –≤ `tests/core/test_dialogue_system.py`**:
        *   –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã (`test_generate_npc_dialogue_success`, `test_generate_npc_dialogue_with_special_player_input`).
        *   –¢–µ—Å—Ç—ã –ø—Ä–∏–∑–Ω–∞–Ω—ã –∞–¥–µ–∫–≤–∞—Ç–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—é—â–∏–º–∏ –≤—ã–∑–æ–≤ `prepare_dialogue_generation_prompt`, –≤—ã–∑–æ–≤ –º–æ–∫–∞ LLM (`random.choice`), –≤–æ–∑–≤—Ä–∞—Ç –æ–∂–∏–¥–∞–µ–º–æ–π —Å—Ç—Ä–æ–∫–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ –≤ `player_input_text` –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–∫–∞. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫ –Ω–µ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å.
    4.  **–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫**:
        *   –ü—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—ã –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ `pytest tests/`. –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã `ModuleNotFoundError`.
        *   –í—ã–ø–æ–ª–Ω–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ `pip install -r requirements.txt`. –û—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å.
        *   –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ `pip install --force-reinstall --no-cache-dir -r requirements.txt`. –û—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å.
        *   –ü—Ä–æ–≤–µ—Ä–µ–Ω `pytest.ini` - –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π.
        *   –¢–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—â–µ–Ω—ã –∫–æ–º–∞–Ω–¥–æ–π `python -m pytest tests/`. –í—Å–µ 773 —Ç–µ—Å—Ç–∞ –ø—Ä–æ–π–¥–µ–Ωy. –í—ã—è–≤–ª–µ–Ω—ã –º–Ω–æ–≥–æ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (warnings), –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å Task 50 –∏ –Ω–µ —è–≤–ª—è—é—â–∏–µ—Å—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–º–∏.
- **–°—Ç–∞—Ç—É—Å –Ω–∞ –∫–æ–Ω–µ—Ü —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏**:
    - –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–∏–∞–ª–æ–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã (`prepare_dialogue_generation_prompt`, `generate_npc_dialogue`) –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∏ –ø—Ä–∏–∑–Ω–∞–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –±–∞–∑–æ–≤—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º Task 50.
    - –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ö–æ–¥—è—Ç.
- **–°—Ç–∞—Ç—É—Å –Ω–∞ [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]**: –ó–∞–¥–∞—á–∞ Task 50 —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π. –û—Å–Ω–æ–≤–∞–Ω–∏–µ: —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ (`src/core/ai_prompt_builder.py::prepare_dialogue_generation_prompt`, `src/core/dialogue_system.py::generate_npc_dialogue`) –∏ —Ç–µ—Å—Ç—ã (`tests/core/test_ai_prompt_builder.py`, `tests/core/test_dialogue_system.py`) —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –±–∞–∑–æ–≤—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º, –∏–∑–ª–æ–∂–µ–Ω–Ω—ã–º –≤ `Tasks.txt`. –°–æ–≥–ª–∞—Å–Ω–æ –ª–æ–≥—É –æ—Ç "–°–µ—Å—Å–∏—è 2024-07-26", –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ (773) —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏, —á—Ç–æ —Å–Ω–∏–º–∞–µ—Ç —Ä–∞–Ω–µ–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º –¥–ª—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏.

## Task 49: üõ†Ô∏è 15.3 Monitoring Tools (Guild-Scoped)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Provide the Master with information about the game state and history in their guild. Viewing commands (Log, WS, Map, Entities, Statistics) filtered by guild_id and formatted in Master's language.
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
    - –°–æ–∑–¥–∞–Ω Cog `MasterMonitoringCog` (`src/bot/commands/master_commands/monitoring_master_commands.py`).
    - Cog –¥–æ–±–∞–≤–ª–µ–Ω –≤ `src/config/settings.py`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω CRUD –¥–ª—è `StoryLog` (`src/core/crud/crud_story_log.py`) —Å –±–∞–∑–æ–≤–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π, –¥–æ–±–∞–≤–ª–µ–Ω –≤ `src/core/crud/__init__.py`.
    - –í `CRUDBase` (`src/core/crud_base_definitions.py`) –¥–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `count` –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –∑–∞–ø–∏—Å–µ–π —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ `guild_id`.
    - –í `CRUDRuleConfig` (`src/core/crud/crud_rule_config.py`) –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `get_multi_by_guild_and_prefix` –∏ `count_by_guild_and_prefix`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å –ø–æ–¥–≥—Ä—É–ø–ø–∞–º–∏ –≤ `MasterMonitoringCog`:
        -   **`/master_monitor log`**:
            -   `view <log_id>`: –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ `StoryLog`.
            -   `list [page] [limit] [event_type_filter]`: –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π `StoryLog` —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ —Ç–∏–ø—É —Å–æ–±—ã—Ç–∏—è.
        -   **`/master_monitor worldstate`** (–¥–∞–Ω–Ω—ã–µ –∏–∑ `RuleConfig`):
            -   `get <key>`: –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ WorldState.
            -   `list [page] [limit] [prefix]`: –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π WorldState —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –ø–æ –ø—Ä–µ—Ñ–∏–∫—Å—É –∫–ª—é—á–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "worldstate:").
        -   **`/master_monitor map`**:
            -   `list_locations [page] [limit]`: –°–ø–∏—Å–æ–∫ –ª–æ–∫–∞—Ü–∏–π.
            -   `view_location <identifier>`: –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª–µ–π –ª–æ–∫–∞—Ü–∏–∏ –ø–æ ID –∏–ª–∏ static_id.
        -   **`/master_monitor entities`**:
            -   `list_players [page] [limit]`: –°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤.
            -   `view_player <player_id>`: –î–µ—Ç–∞–ª–∏ –∏–≥—Ä–æ–∫–∞.
            -   `list_npcs [page] [limit]`: –°–ø–∏—Å–æ–∫ `GeneratedNpc`.
            -   `view_npc <npc_id>`: –î–µ—Ç–∞–ª–∏ `GeneratedNpc`.
            -   `list_parties [page] [limit]`: –°–ø–∏—Å–æ–∫ `Party`.
            -   `view_party <party_id>`: –î–µ—Ç–∞–ª–∏ `Party`.
            -   `list_global_npcs [page] [limit]`: –°–ø–∏—Å–æ–∫ `GlobalNpc`.
            -   `view_global_npc <global_npc_id>`: –î–µ—Ç–∞–ª–∏ `GlobalNpc`.
            -   `list_mobile_groups [page] [limit]`: –°–ø–∏—Å–æ–∫ `MobileGroup`.
            -   `view_mobile_group <mobile_group_id>`: –î–µ—Ç–∞–ª–∏ `MobileGroup`.
    - –ö–æ–º–∞–Ω–¥–∞ `/master_monitor statistics get` –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è —á–µ—Ç–∫–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Å–æ–±–∏—Ä–∞–µ–º–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ.
    - –í—Å–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `interaction.guild_id`, –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ `get_localized_text`, –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏ –≤—ã–≤–æ–¥—è—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ `discord.Embed`.
    - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –±–∞–∑–æ–≤—ã—Ö Unit-—Ç–µ—Å—Ç–æ–≤ `tests/bot/commands/master_commands/test_monitoring_master_commands.py`.
- **–°—Ç–∞—Ç—É—Å**: –ó–∞–¥–∞—á–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.
- **–î–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ (2024-07-23) –ø–æ Task 49 (—Å–≤—è–∑–∞–Ω–æ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∑–∞–ø—Ä–æ—Å–æ–º "–∑–∞–ø—É—Å—Ç–∏ —Ç–µ—Å—Ç—ã –∏ –∏—Å–ø—Ä–∞–≤—å –æ—à–∏–±–∫–∏")**:
    - **–ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞**: –¢–µ—Å—Ç—ã –≤ `tests/bot/commands/master_commands/test_monitoring_master_commands.py` –ø–∞–¥–∞–ª–∏. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, `test_entities_view_player_found` –∏–º–µ–ª `AttributeError` –∏–∑-–∑–∞ –ø–æ–ø—ã—Ç–∫–∏ –º–æ–∫–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é `get_localized_player_name`. –¢–µ—Å—Ç—ã `test_log_view_found` –∏ `test_worldstate_get_found` –ø–∞–¥–∞–ª–∏ —Å –æ—à–∏–±–∫–∞–º–∏ `AssertionError` –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ø–æ–ª–µ–π –≤ —ç–º–±–µ–¥–∞—Ö.
    - **–ê–Ω–∞–ª–∏–∑ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:
        - –î–ª—è `test_entities_view_player_found`:
            - –í—ã—è—Å–Ω–µ–Ω–æ, —á—Ç–æ –∫–æ–º–∞–Ω–¥–∞ `entities_view_player` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `player.name` –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞, –∞ –Ω–µ –∫–∞–∫—É—é-–ª–∏–±–æ —Ñ—É–Ω–∫—Ü–∏—é –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–º–µ–Ω–∏ –∏–≥—Ä–æ–∫–∞.
            - –£–¥–∞–ª–µ–Ω –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–∞—Ç—á `@patch("src.core.localization_utils.get_localized_player_name", ...)`.
            - –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã –æ–∂–∏–¥–∞–µ–º—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π –≤ —ç–º–±–µ–¥–µ.
            - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–µ–Ω–∞ –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –º–æ–∫-–æ–±—ä–µ–∫—Ç–∞ –ø–ª–µ–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `discord_id` –≤–º–µ—Å—Ç–æ `discord_user_id`).
        - –î–ª—è `test_log_view_found`:
            - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã `log_view` –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–±–∞–≤–ª—è–µ–º—ã—Ö –µ—é –ø–æ–ª–µ–π.
            - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ–∂–∏–¥–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π —Å 7 –Ω–∞ 4.
            - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–º–µ–Ω –∏ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ–ª–µ–π.
        - –î–ª—è `test_worldstate_get_found`:
            - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥—ã `worldstate_get`. –í—ã—è—Å–Ω–µ–Ω–æ, —á—Ç–æ –æ–Ω–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ 2 –ø–æ–ª—è ("Value", "Description"), –∞ –Ω–µ 3. –ü–æ–ª–µ "Description" –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç "N/A" –∏–∑-–∑–∞ —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–æ–º–∞–Ω–¥—ã.
            - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ–∂–∏–¥–∞–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–π —Å 3 –Ω–∞ 2.
            - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è "Description" –Ω–∞ "N/A".
    - **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ —Ç–µ—Å—Ç—ã –≤ `tests/bot/commands/master_commands/test_monitoring_master_commands.py` (7 —Ç–µ—Å—Ç–æ–≤) —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω—ã –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π.

## –î–æ—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π (—Å–≤—è–∑–∞–Ω–æ —Å Task 37 –∏ Task 44)
- **–î–∞—Ç–∞**: 2024-07-24
- **–¶–µ–ª—å**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–ª–∏—è–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –Ω–∞ —Ü–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ `src/core/trade_system.py`.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **–ê–Ω–∞–ª–∏–∑ `src/core/trade_system.py`**:
        - –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_calculate_item_price`. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, —á—Ç–æ –ª–æ–≥–∏–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∞–≤–∏–ª–∞ `relationship_influence:trade:price_adjustment` –∏–∑ `RuleConfig`, –ø–æ–ª—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–æ–º –∏ NPC, –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ —Ü–µ–Ω (–∫–∞–∫ –Ω–∞ –æ—Å–Ω–æ–≤–µ "—Ç–∏—Ä–æ–≤", —Ç–∞–∫ –∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ "—Ñ–æ—Ä–º—É–ª") —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
        - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ, —á—Ç–æ `src/core/relationship_system.py::update_relationship` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `handle_trade_action` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –ø–æ—Å–ª–µ —Ç–æ—Ä–≥–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.
    - **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Unit-—Ç–µ—Å—Ç–æ–≤ (`tests/core/test_trade_system.py`)**:
        - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è `_calculate_item_price` –¥–ª—è –±–æ–ª–µ–µ –ø–æ–ª–Ω–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π:
            - –ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –±–µ–∑ default-—Ç–∏—Ä–∞ (—Ü–µ–Ω–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è).
            - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ default-—Ç–∏—Ä–∞, –∫–æ–≥–¥–∞ –¥—Ä—É–≥–∏–µ –Ω–µ –ø–æ–¥—Ö–æ–¥—è—Ç.
            - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–∞–≤–∏–ª–∞ `relationship_influence:trade:price_adjustment` (—Ü–µ–Ω–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è).
            - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∞–≤–∏–ª–∞ (—Ü–µ–Ω–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è, –±–µ–∑ –æ—à–∏–±–æ–∫).
            - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è `sell_multiplier_mod` –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –ø—Ä–∏ –≤—ã—Å–æ–∫–∏—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.
            - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è `buy_price_adjustment_formula` –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –ø—Ä–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö.
        - –í—Å–µ —Ç–µ—Å—Ç—ã (21 –≤ `test_trade_system.py`) —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω—ã –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∏ –∑–∞–ø—É—Å–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö.
- **–°—Ç–∞—Ç—É—Å**: –ß–∞—Å—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏, –∫–∞—Å–∞—é—â–∞—è—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å —Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π, **–≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ —Ç–µ—Å—Ç–∞–º–∏**. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è –∑–∞–ø–∏—Å—å –≤ "–û—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö" –æ–±–Ω–æ–≤–ª–µ–Ω–∞.

## Task 48: üõ†Ô∏è 15.2 Balance and Testing Tools (Per Guild)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Simulators and analyzers for the Master, operating within the guild context according to rules. Simulation APIs (Combat, Checks, Conflicts). AI generation analyzers. Results output in Master's language.
- **–°—Ç–∞—Ç—É—Å**: –ß–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω (–±–∞–∑–æ–≤—ã–µ —Å–∏–º—É–ª—è—Ç–æ—Ä—ã –∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –Ω–æ —Ç—Ä–µ–±—É—é—Ç —É–≥–ª—É–±–ª–µ–Ω–∏—è).
- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:
    - –°–æ–∑–¥–∞–Ω Cog `MasterSimulationToolsCog` (`src/bot/commands/master_commands/master_simulation_tools_cog.py`) —Å –≥—Ä—É–ø–ø–∞–º–∏ –∫–æ–º–∞–Ω–¥ `/master_simulate` –∏ `/master_analyze`.
    - **–ö–æ–º–∞–Ω–¥–∞ `/master_simulate check`**:
        - –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `check_resolver.resolve_check`.
        - –í—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø—Ä–æ–≤–µ—Ä–∫–∏.
    - **–ö–æ–º–∞–Ω–¥–∞ `/master_simulate combat_action`**:
        - –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `combat_engine.process_combat_action`.
        - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ù–µ —è–≤–ª—è–µ—Ç—Å—è "dry run" –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, `StoryLog`).
        - –í—ã–≤–æ–¥–∏—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –±–æ—è.
    - **–ö–æ–º–∞–Ω–¥–∞ `/master_simulate conflict`**:
        - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å –±–∞–∑–æ–≤–æ–π –≤–µ—Ä—Å–∏–µ–π `conflict_simulation_system.simulate_conflict_detection`.
        - `simulate_conflict_detection` –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è "—ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã—Ö" –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –Ω–∞ –æ–¥–Ω—É –∏ —Ç—É –∂–µ —Å–∏–≥–Ω–∞—Ç—É—Ä—É —Ü–µ–ª–∏ (–∏–∑–≤–ª–µ–∫–∞–µ–º—É—é `_extract_primary_target_signature`).
        - –í—ã–≤–æ–¥–∏—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –æ–± –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö (—Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö) –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö.
        - Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –±–∞–∑–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –Ω–∞–ø–∏—Å–∞–Ω—ã.
    - **–ö–æ–º–∞–Ω–¥–∞ `/master_analyze ai_generation`**:
        - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å `ai_analysis_system.analyze_generated_content`.
        - –ë—ç–∫–µ–Ω–¥-—Ñ—É–Ω–∫—Ü–∏—è `analyze_generated_content`:
            - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å –ø—Ä–æ–º–ø—Ç-–±–∏–ª–¥–µ—Ä–∞–º–∏ –∏–∑ `ai_prompt_builder.py` –¥–ª—è —Ç–∏–ø–æ–≤ —Å—É—â–Ω–æ—Å—Ç–µ–π: "quest", "item", "npc" (—Å/–±–µ–∑ `location_id`), "faction". –î–ª—è "location" –∏ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—Ö–µ–º.
            - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —É–ª—É—á—à–µ–Ω–Ω—ã–µ –º–æ–∫-–æ—Ç–≤–µ—Ç—ã AI –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –†–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ AI –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω.
            - –í—ã–ø–æ–ª–Ω—è–µ—Ç –±–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
                - –ü–æ–ª–Ω–æ—Ç–∞ i18n –ø–æ–ª–µ–π (–∏–º–µ–Ω–∞, –æ–ø–∏—Å–∞–Ω–∏—è –∏ —Ç.–¥., –≤–∫–ª—é—á–∞—è —à–∞–≥–∏ –∫–≤–µ—Å—Ç–∞).
                - –î–ª–∏–Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π (–æ–ø–∏—Å–∞–Ω–∏—è/—Å–≤–æ–¥–∫–∏).
                - –ù–∞–ª–∏—á–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –ø–æ–ª–µ–π (–¥–ª—è item, npc, quest).
                - –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤ —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π (`base_value` –¥–ª—è item, `level` –¥–ª—è npc).
            - –°–æ–±–∏—Ä–∞–µ—Ç –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ Pydantic, –µ—Å–ª–∏ –æ–Ω–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ.
        - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ (–≤–∫–ª—é—á–∞—è –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø—Ä–µ–≤—å—é –¥–∞–Ω–Ω—ã—Ö) –≤—ã–≤–æ–¥—è—Ç—Å—è –≤ –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º `discord.Embed`.
        - Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –∏ –∫–æ–º–∞–Ω–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã.
- **–î–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ (2024-07-19)**:
    - **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ä–µ–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ OpenAI –≤ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–µ AI**:
        - –í `src/core/ai_orchestrator.py` –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `make_real_ai_call` –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å OpenAI API (gpt-3.5-turbo).
        - `src/core/ai_analysis_system.py` (`analyze_generated_content`) –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `make_real_ai_call` –ø—Ä–∏ `use_real_ai=True`.
        - –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ `openai` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `requirements.txt`.
    - **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –±–∞–∑–æ–≤—ã–π "Dry Run" –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –±–æ–µ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π**:
        - –í `src/core/game_events.py` (`log_event`) –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `dry_run`. –ï—Å–ª–∏ `True`, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ë–î –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è.
        - –í `src/core/combat_engine.py` (`process_combat_action`) –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `dry_run`. –ï—Å–ª–∏ `True`, –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `CombatEncounter` –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î, –∏ `log_event` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å `dry_run=True`.
        - –ö–æ–º–∞–Ω–¥–∞ `/master_simulate combat_action` –≤ `src/bot/commands/master_commands/master_simulation_tools_cog.py` –æ–±–Ω–æ–≤–ª–µ–Ω–∞:
            - –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `dry_run: bool`.
            - –ó–Ω–∞—á–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `process_combat_action`.
            - –í –æ—Ç–≤–µ—Ç–µ –∫–æ–º–∞–Ω–¥—ã —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è, –±—ã–ª –ª–∏ —ç—Ç–æ dry run.
    - **–†–∞—Å—à–∏—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –≤ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–µ AI (–Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ)**:
        - –í `src/core/ai_analysis_system.py` (`analyze_generated_content`) –¥–æ–±–∞–≤–ª–µ–Ω—ã:
            - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π (placeholder text) –≤ i18n –ø–æ–ª—è—Ö (—Å–ø–∏—Å–æ–∫ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –∏–∑ `RuleConfig analysis:common:placeholder_texts`).
            - –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª—è NPC: `properties_json.stats.health` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 0 (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω –∏ —è–≤–ª—è–µ—Ç—Å—è —á–∏—Å–ª–æ–º).
- **–°—Ç–∞—Ç—É—Å**: –ß–∞—Å—Ç–∏—á–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω. –û—Å–Ω–æ–≤–Ω—ã–µ —Å–∏–º—É–ª—è—Ç–æ—Ä—ã –∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —É–ª—É—á—à–µ–Ω—ã.
- **–î–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ (2024-07-19) –ø–æ "–£–≥–ª—É–±–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (`simulate_conflict_detection`)"**:
    - –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `src/core/conflict_simulation_system.py::simulate_conflict_detection`.
    - –õ–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–µ—Ä–≤–∏—á–Ω–æ–π —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ü–µ–ª–∏ (`_extract_primary_target_signature`) —É–ª—É—á—à–µ–Ω–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –±–æ–ª—å—à–µ–≥–æ —á–∏—Å–ª–∞ —Å—É—â–Ω–æ—Å—Ç–µ–π –∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `use_on_self`).
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ `CONFLICT_RULES_SAME_INTENT_SAME_TARGET` –∏ `CONFLICTING_INTENT_PAIRS_ON_SAME_TARGET` –¥–ª—è –∏–Ω—Ç–µ–Ω—Ç–æ–≤ `interact`, `use` (–Ω–∞ –æ–±—ä–µ–∫—Ç–∞—Ö), —Ç–æ—Ä–≥–æ–≤—ã—Ö –∏–Ω—Ç–µ–Ω—Ç–æ–≤ –∏ –ø–∞—Ä —Ç–∏–ø–∞ `attack` vs `talk`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–æ–≤—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª: `_apply_same_intent_conflict_rules`, `_apply_conflicting_intent_pairs_rules`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `_check_use_self_vs_take_conflicts` –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–∞ –Ω–∞ —Å–µ–±–µ –ø—Ä–æ—Ç–∏–≤ –µ–≥–æ –≤–∑—è—Ç–∏—è.
    - –ö–æ–¥ –±—ã–ª —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–µ–Ω –¥–ª—è —è—Å–Ω–æ—Å—Ç–∏ –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏.
    - –ù–∞–ø–∏—Å–∞–Ω—ã –∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã –≤ `tests/core/test_conflict_simulation_system.py` –¥–ª—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏. –í—Å–µ —Ç–µ—Å—Ç—ã –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ (50) —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–π–¥–µ–Ω—ã.
    - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/master_simulate conflict` –≤ `src/bot/commands/master_commands/master_simulation_tools_cog.py` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π `simulate_conflict_detection` –∏ –µ–µ –Ω–æ–≤—ã–º —Ç–∏–ø–æ–º –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö (`List[PydanticConflictForSim]`).
- **–û—Å—Ç–∞–≤—à–∏–µ—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
    - **–î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ –≤ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–µ AI**: –î–ª—è –±–æ–ª–µ–µ –≥–ª—É–±–æ–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –±–∞–ª–∞–Ω—Å–∞, –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ª–æ—Ä—É. –¢–µ–∫—É—â–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –±—ã–ª–æ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º.
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `AGENTS.md` –æ—Ç 2024-07-19**: –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ø–æ Task 48, –≤–∫–ª—é—á–∞—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –ø–æ —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤. –°—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª–µ–Ω.
- **–î–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ (2024-07-22) –ø–æ "–£–≥–ª—É–±–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (`simulate_conflict_detection`)"**:
    - –ü—Ä–æ–≤–µ–¥–µ–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ `action_processor.py`. –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —á—Ç–æ –æ–Ω –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –∏–≥—Ä–æ–∫–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ —Ö–æ–¥–∞, –∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ.
    - –°–∏—Å—Ç–µ–º–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ `src/core/conflict_simulation_system.py` —É–ª—É—á—à–µ–Ω–∞:
        - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∞–≤–∏–ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏–∑ `RuleConfig` (–∫–ª—é—á–∏: `conflict_simulation:rules_same_intent_same_target`, `conflict_simulation:rules_conflicting_intent_pairs`, `conflict_simulation:enable_use_self_vs_take_check`).
        - –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —ç—Ç–∏—Ö –ø—Ä–∞–≤–∏–ª, –µ—Å–ª–∏ –æ–Ω–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `RuleConfig`.
        - –†–∞—Å—à–∏—Ä–µ–Ω—ã —Ç–∏–ø—ã –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ–º—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø—É—Ç–µ–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è `go_to` –Ω–∞ —ç–∫—Å–∫–ª—é–∑–∏–≤–Ω—É—é —Ç–æ—á–∫—É, –ø–∞—Ä—ã `interact`/`destroy_object`, `talk`/`use`).
        - –û–±–Ω–æ–≤–ª–µ–Ω—ã Unit-—Ç–µ—Å—Ç—ã –≤ `tests/core/test_conflict_simulation_system.py` –¥–ª—è –æ—Ç—Ä–∞–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `RuleConfig` –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–æ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª.
        - –û–±–Ω–æ–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ Discord `/master_simulate conflict` –¥–ª—è –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞—Ö, –≤–∫–ª—é—á–∞—è `target_signature` –∏ `action_entities`.
    - **–°—Ç–∞—Ç—É—Å –ø–æ–¥–∑–∞–¥–∞—á–∏ "–£–≥–ª—É–±–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤"**: –í –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–π —Å—Ç–µ–ø–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π.
- **–î–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ (2024-07-24) –ø–æ "–£–≥–ª—É–±–ª–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (`simulate_conflict_detection`)"**:
    - **–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è**: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã `src/core/conflict_simulation_system.py` –∏ `tests/core/test_conflict_simulation_system.py`. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–∑–Ω–∞–Ω–∞ –Ω–∞—Ö–æ–¥—è—â–µ–π—Å—è –≤ —Ö–æ—Ä–æ—à–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏–π –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π.
    - **–£–ª—É—á—à–µ–Ω–∏–µ `_extract_primary_target_signature`**:
        - –†–∞—Å—à–∏—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è –∏–Ω—Ç–µ–Ω—Ç–∞ `use`: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞—Ç—É—Ä—ã —Ç–µ–ø–µ—Ä—å: –ü—Ä–µ–¥–º–µ—Ç -> –ù–∞–≤—ã–∫ -> –û–±—ä–µ–∫—Ç –º–∏—Ä–∞. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Ü–µ–ª—å –¥–ª—è `use`, –Ω–∞–ø—Ä–∏–º–µ—Ä, "use lever".
    - **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**:
        - –í `DEFAULT_RULES_SAME_INTENT_SAME_TARGET_CFG`:
            - –ü—Ä–∞–≤–∏–ª–æ `EXCLUSIVE_OBJECT_INTERACTION` –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –≤ `EXCLUSIVE_OBJECT_MANIPULATION`.
            - –í –Ω–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ–Ω—Ç `use` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã —Å–∏–≥–Ω–∞—Ç—É—Ä (`use_obj_static:`, `use_obj_name:`) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –º–∏—Ä–∞.
            - –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª –¥–ª—è –±—É–¥—É—â–µ–≥–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è (—É—á–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–∫—Ç–æ—Ä–∞).
        - –í `DEFAULT_RULES_CONFLICTING_INTENT_PAIRS_CFG`:
            - –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –ø—Ä–∞–≤–∏–ª, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ–º —Ç–æ—Ä–≥–æ–≤–ª–∏.
            - –†–∞—Å—à–∏—Ä–µ–Ω—ã –ø—Ä–µ—Ñ–∏–∫—Å—ã —Ü–µ–ª–µ–π –¥–ª—è –ø—Ä–∞–≤–∏–ª–∞ `["interact", "destroy_object"]`.
            - –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª –¥–ª—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π.
    - **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Unit-—Ç–µ—Å—Ç–æ–≤ (`tests/core/test_conflict_simulation_system.py`)**:
        - –í `TestExtractPrimaryTargetSignature` –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –∏–Ω—Ç–µ–Ω—Ç–∞ `use` —Å –æ–±—ä–µ–∫—Ç–∞–º–∏ –º–∏—Ä–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞—Ç—É—Ä—ã.

---

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è UI Task 57: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞–º–∏ –∏ NPC

–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã Discord, –∫–æ—Ç–æ—Ä—ã–µ UI –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ API —à–ª—é–∑ (–∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ), –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ò–≥—Ä–æ–∫–∞–º–∏ (`Player`) –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–º–∏ –ü–µ—Ä—Å–æ–Ω–∞–∂–∞–º–∏ (`GeneratedNpc`).

**–û–±—â–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è:**

*   –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ç—Ä–µ–±—É—é—Ç `guild_id`, –∫–æ—Ç–æ—Ä—ã–π UI –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å (–æ–±—ã—á–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∞–∫—Ç–∏–≤–Ω–æ–π —Å–µ—Å—Å–∏–∏ UI).
*   –î–ª—è –ø–æ–ª–µ–π JSON (–Ω–∞–ø—Ä–∏–º–µ—Ä, `attributes_json`, `name_i18n_json`, `properties_json`) –∫–æ–º–∞–Ω–¥—ã –æ–∂–∏–¥–∞—é—Ç –≤–∞–ª–∏–¥–Ω—É—é JSON-—Å—Ç—Ä–æ–∫—É. UI –¥–æ–ª–∂–µ–Ω —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã JavaScript –≤ JSON –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.
*   –ö–æ–º–∞–Ω–¥—ã `update` –¥–ª—è `Player` –∏ `GeneratedNpc` –Ω–∞ –±—ç–∫–µ–Ω–¥–µ —è–≤–ª—è—é—Ç—Å—è –ø–æ–ø–æ–ª—å–Ω—ã–º–∏ (—Ç.–µ. –æ–±–Ω–æ–≤–ª—è—é—Ç –æ–¥–Ω–æ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –ø–æ–ª–µ –∑–∞ –≤—ã–∑–æ–≤). UI-—Å–µ—Ä–≤–∏—Å—ã (`playerService.updatePlayer`, `npcService.updateNpc`) –º–æ–≥—É—Ç —Å–∏–º—É–ª–∏—Ä–æ–≤–∞—Ç—å PATCH-–∑–∞–ø—Ä–æ—Å, –∞–≥—Ä–µ–≥–∏—Ä—É—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –æ–¥–∏–Ω –ª–æ–≥–∏—á–µ—Å–∫–∏–π –≤—ã–∑–æ–≤ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ UI, –Ω–æ —ç—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥ –∏–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏ API-—à–ª—é–∑–∞/–±—ç–∫–µ–Ω–¥–∞.
*   –û—Ç–≤–µ—Ç—ã –∫–æ–º–∞–Ω–¥ –±—É–¥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –Ω–∞ —è–∑—ã–∫–µ –ú–∞—Å—Ç–µ—Ä–∞.
*   –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã: `Player`, `PlayerPayload`, `GeneratedNpc`, `GeneratedNpcPayload`, `PaginatedResponse` –∏–∑ `src/ui/src/types/entities.ts`.

---

**1. –ò–≥—Ä–æ–∫–∏ (Player)**

*   **–°—É—â–Ω–æ—Å—Ç—å**: `Player`
*   **–ú–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã**: `/master_player ...` (–∏–∑ `src/bot/commands/master_commands/player_master_commands.py`)
*   **–°–µ—Ä–≤–∏—Å UI**: `src/ui/src/services/playerService.ts`

*   **1.1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤ –≤ –≥–∏–ª—å–¥–∏–∏ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_player list`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**: `page: Optional[int]`, `limit: Optional[int]`
    *   **–û—Ç–≤–µ—Ç**: `PaginatedResponse<Player>`

*   **1.2. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∏–≥—Ä–æ–∫–∞**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_player view`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**: `player_id: int`, `include_inventory: Optional[bool]` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`)
    *   **–û—Ç–≤–µ—Ç**: `Player` (—Å –ø–æ–ª–µ–º `inventory: EnrichedInventoryItem[]`, –µ—Å–ª–∏ `include_inventory=true`)

*   **1.3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_player create`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI (`PlayerPayload` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è) -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `discord_user_id: str` (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Discord)
        *   `player_name: str` (–ò–º—è –∏–≥—Ä–æ–∫–∞)
        *   `language: Optional[str]` (–Ω–∞–ø—Ä–∏–º–µ—Ä, "en", "ru")
        *   `attributes_json: Optional[str]` (JSON —Å—Ç—Ä–æ–∫–∞ –¥–ª—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤)
        *   `current_location_id: Optional[int]`
    *   **–û—Ç–≤–µ—Ç**: –°–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `Player`.
    *   *–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ*: –ö–æ–º–∞–Ω–¥–∞ –æ–∂–∏–¥–∞–µ—Ç `discord_user` (–æ–±—ä–µ–∫—Ç `discord.User`), –Ω–æ –¥–ª—è API —à–ª—é–∑–∞ —ç—Ç–æ –±—É–¥–µ—Ç `discord_user_id`. –ù–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (level, xp, gold, hp, status) –æ–±—ã—á–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–∞ –±—ç–∫–µ–Ω–¥–µ.

*   **1.4. –û–±–Ω–æ–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞ (–ø–æ–ø–æ–ª—å–Ω–æ)**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_player update`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI (`playerId: number`, `payload: Partial<PlayerPayload>`) -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `player_id: int`
        *   `field_to_update: str` (–∏–∑ —Å–ø–∏—Å–∫–∞: `name`, `level`, `xp`, `unspent_xp`, `gold`, `current_hp`, `current_status`, `language`, `current_location_id`, `current_party_id`, `attributes_json`)
        *   `new_value: str` (JSON —Å—Ç—Ä–æ–∫–∞ –¥–ª—è `attributes_json`, –∏–Ω–∞—á–µ –ø—Ä–æ—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
    *   **–û—Ç–≤–µ—Ç**: –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `Player`.

*   **1.5. –£–¥–∞–ª–∏—Ç—å –∏–≥—Ä–æ–∫–∞**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_player delete`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**: `player_id: int`
    *   **–û—Ç–≤–µ—Ç**: –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ –∏–ª–∏ –æ—à–∏–±–∫–µ.

---

**2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ NPC (GeneratedNpc)**

*   **–°—É—â–Ω–æ—Å—Ç—å**: `GeneratedNpc`
*   **–ú–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã**: `/master_npc ...` (–∏–∑ `src/bot/commands/master_commands/npc_master_commands.py`)
*   **–°–µ—Ä–≤–∏—Å UI**: `src/ui/src/services/npcService.ts`

*   **2.1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ NPC –≤ –≥–∏–ª—å–¥–∏–∏ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_npc list`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**: `page: Optional[int]`, `limit: Optional[int]`
    *   **–û—Ç–≤–µ—Ç**: `PaginatedResponse<GeneratedNpc>`

*   **2.2. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ NPC**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_npc view`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**: `npc_id: int`, `include_inventory: Optional[bool]` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `false`)
    *   **–û—Ç–≤–µ—Ç**: `GeneratedNpc` (—Å –ø–æ–ª–µ–º `inventory: EnrichedInventoryItem[]`, –µ—Å–ª–∏ `include_inventory=true`)

*   **2.3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ NPC**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_npc create`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI (`GeneratedNpcPayload` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è) -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `name_i18n_json: str` (JSON —Å—Ç—Ä–æ–∫–∞ `Record<string, string>`)
        *   `description_i18n_json: Optional[str]`
        *   `npc_type_i18n_json: Optional[str]`
        *   `static_id: Optional[str]`
        *   `faction_id: Optional[int]`
        *   `current_location_id: Optional[int]`
        *   `properties_json: Optional[str]`
        *   `ai_metadata_json: Optional[str]`
    *   **–û—Ç–≤–µ—Ç**: –°–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `GeneratedNpc`.

*   **2.4. –û–±–Ω–æ–≤–∏—Ç—å NPC (–ø–æ–ø–æ–ª—å–Ω–æ)**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_npc update`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI (`npcId: number`, `payload: Partial<GeneratedNpcPayload>`) -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `npc_id: int`
        *   `field_to_update: str` (–∏–∑ —Å–ø–∏—Å–∫–∞: `static_id`, `name_i18n_json`, `description_i18n_json`, `npc_type_i18n_json`, `faction_id`, `current_location_id`, `properties_json`, `ai_metadata_json`)
        *   `new_value: str` (JSON —Å—Ç—Ä–æ–∫–∞ –¥–ª—è *_json –ø–æ–ª–µ–π, –∏–Ω–∞—á–µ –ø—Ä–æ—Å—Ç–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ "None" –¥–ª—è –æ–±–Ω—É–ª–µ–Ω–∏—è)
    *   **–û—Ç–≤–µ—Ç**: –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `GeneratedNpc`.

*   **2.5. –£–¥–∞–ª–∏—Ç—å NPC**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_npc delete`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**: `npc_id: int`
    *   **–û—Ç–≤–µ—Ç**: –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ –∏–ª–∏ –æ—à–∏–±–∫–µ.

---
## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API –¥–ª—è UI Task 60: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏

–≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–ø–∏—Å—ã–≤–∞–µ—Ç –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã Discord (–∫–æ—Ç–æ—Ä—ã–µ UI –±—É–¥–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å —á–µ—Ä–µ–∑ API —à–ª—é–∑), –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º –∏ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏.

**–û–±—â–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è:**

*   –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ç—Ä–µ–±—É—é—Ç `guild_id`, –∫–æ—Ç–æ—Ä—ã–π UI –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å.
*   –î–ª—è –ø–æ–ª–µ–π JSON (–Ω–∞–ø—Ä–∏–º–µ—Ä, `name_i18n`, `properties_json`) –∫–æ–º–∞–Ω–¥—ã –æ–∂–∏–¥–∞—é—Ç —Å—Ç—Ä–æ–∫—É JSON. UI –¥–æ–ª–∂–µ–Ω —Å–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç—ã –≤ JSON –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π.
*   –û—Ç–≤–µ—Ç—ã –∫–æ–º–∞–Ω–¥ (–æ—Å–æ–±–µ–Ω–Ω–æ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö) –±—É–¥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –Ω–∞ —è–∑—ã–∫–µ, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (–ú–∞—Å—Ç–µ—Ä–∞). UI –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥–æ—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —ç—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è.
*   `GUILD_ID_PLACEHOLDER` –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –≤—ã–∑–æ–≤–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤ UI –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π ID –≥–∏–ª—å–¥–∏–∏.
*   –ö–æ–Ω–µ—á–Ω–∞—è —Ç–æ—á–∫–∞ –≤—ã–∑–æ–≤–∞ –∫–æ–º–∞–Ω–¥ –≤ `apiClient` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/master_command_endpoint`) —è–≤–ª—è–µ—Ç—Å—è –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ–π –∏ –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ API —à–ª—é–∑–∞.

---

**1. –ü—Ä–µ–¥–º–µ—Ç—ã (Item Definitions)**

*   **–°—É—â–Ω–æ—Å—Ç—å**: `Item` (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞)
*   **–ú–æ–¥–µ–ª—å**: `src/models/item.py`
*   **TypeScript**: `src/ui/src/types/items.ts -> ItemDefinition, ItemPayload`
*   **–°–µ—Ä–≤–∏—Å UI**: `src/ui/src/services/itemService.ts`

*   **1.1. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –≥–∏–ª—å–¥–∏–∏ (—Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π)**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_item list`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `page: Optional[int]` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
        *   `limit: Optional[int]` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10)
    *   **–û—Ç–≤–µ—Ç**: –û–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π —Å–ø–∏—Å–æ–∫ `ItemDefinition` –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ (—Å–º. `PaginatedResponse<ItemDefinition>`).
        *   –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (–∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω—ã–π JSON –æ—Ç API —à–ª—é–∑–∞):
            ```json
            {
              "items": [
                { "id": 1, "guild_id": 123, "static_id": "sword1", "name_i18n": {"en": "Sword"}, ... }
              ],
              "total": 1, "page": 1, "limit": 10
            }
            ```

*   **1.2. –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_item view`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `item_id: int`
    *   **–û—Ç–≤–µ—Ç**: –û–±—ä–µ–∫—Ç `ItemDefinition`.
        *   –ü—Ä–∏–º–µ—Ä: `{ "id": 1, "static_id": "sword1", ... }`

*   **1.3. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_item create`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI (`ItemPayload`) -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `static_id: str`
        *   `name_i18n_json: str` (JSON —Å—Ç—Ä–æ–∫–∞ –¥–ª—è `name_i18n: Record<string, string>`)
        *   `item_type_i18n_json: str` (JSON —Å—Ç—Ä–æ–∫–∞ –¥–ª—è `item_type_i18n: Record<string, string>`)
        *   `description_i18n_json: Optional[str]`
        *   `properties_json: Optional[str]`
        *   `base_value: Optional[int]`
        *   `slot_type: Optional[str]`
        *   `is_stackable: bool` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `True`)
        *   `item_category_i18n_json: Optional[str]`
    *   **–û—Ç–≤–µ—Ç**: –°–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `ItemDefinition`.

*   **1.4. –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_item update`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI (`itemId: number`, `payload: Partial<ItemPayload>`) -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `item_id: int`
        *   `data_json: str` (JSON —Å—Ç—Ä–æ–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –æ–±—ä–µ–∫—Ç `Partial<ItemPayload>` —Å –æ–±–Ω–æ–≤–ª—è–µ–º—ã–º–∏ –ø–æ–ª—è–º–∏).
            *   –ù–∞–ø—Ä–∏–º–µ—Ä, `{"name_i18n": {"en": "New Name"}, "base_value": 150}`
    *   **–û—Ç–≤–µ—Ç**: –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `ItemDefinition`.

*   **1.5. –£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_item delete`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `item_id: int`
    *   **–û—Ç–≤–µ—Ç**: –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ –∏–ª–∏ –æ—à–∏–±–∫–µ.

---

**2. –≠–∫–∑–µ–º–ø–ª—è—Ä—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ (Inventory Items)**

*   **–°—É—â–Ω–æ—Å—Ç—å**: `InventoryItem` (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ —É –≤–ª–∞–¥–µ–ª—å—Ü–∞)
*   **–ú–æ–¥–µ–ª—å**: `src/models/inventory_item.py`
*   **TypeScript**: `src/ui/src/types/items.ts -> InventoryItemData, EnrichedInventoryItem`
*   **–°–µ—Ä–≤–∏—Å UI**: `src/ui/src/services/inventoryService.ts`

*   **2.1. –ü–æ–ª—É—á–∏—Ç—å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å —Å—É—â–Ω–æ—Å—Ç–∏ (–ò–≥—Ä–æ–∫–∞ –∏–ª–∏ NPC)**
    *   **2.1.1. –î–ª—è –ò–≥—Ä–æ–∫–∞ (—Å –æ–±–æ–≥–∞—â–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏)**
        *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_player view`
        *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**:
            *   `player_id: int`
            *   `include_inventory: bool = true`
        *   **–û—Ç–≤–µ—Ç**: –û–±—ä–µ–∫—Ç `Player` (—Å–º. `src/ui/src/types/entities.ts`), –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ `inventory: EnrichedInventoryItem[]`.
    *   **2.1.2. –î–ª—è NPC (—Å –æ–±–æ–≥–∞—â–µ–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏)**
        *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_npc view`
        *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**:
            *   `npc_id: int`
            *   `include_inventory: bool = true`
        *   **–û—Ç–≤–µ—Ç**: –û–±—ä–µ–∫—Ç `GeneratedNpc` (—Å–º. `src/ui/src/types/entities.ts`), –∫–æ—Ç–æ—Ä—ã–π —Ç–µ–ø–µ—Ä—å —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª–µ `inventory: EnrichedInventoryItem[]`.
    *   **2.1.3. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± (–º–µ–Ω–µ–µ —É–¥–æ–±–Ω—ã–π –¥–ª—è UI, –µ—Å–ª–∏ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –Ω–µ –≤—Å—Ç—Ä–æ–µ–Ω–æ –≤ view)**
        *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_inventory_item list`
        *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**:
            *   `owner_id: int`
            *   `owner_type: str` ("PLAYER" –∏–ª–∏ "GENERATED_NPC")
            *   `limit: int` (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–æ–π, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–µ–¥–º–µ—Ç—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä 1000)
        *   **–û—Ç–≤–µ—Ç**: –°–ø–∏—Å–æ–∫ `InventoryItemData`. UI –∑–∞—Ç–µ–º –¥–æ–ª–∂–µ–Ω –±—É–¥–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ `item_id` –∑–∞–ø—Ä–æ—Å–∏—Ç—å –¥–µ—Ç–∞–ª–∏ —á–µ—Ä–µ–∑ `/master_item view`.

*   **2.2. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å (—Å–æ–∑–¥–∞—Ç—å InventoryItem)**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_inventory_item create`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `owner_id: int`
        *   `owner_type: str` ("PLAYER" –∏–ª–∏ "GENERATED_NPC")
        *   `item_id: int` (ID –±–∞–∑–æ–≤–æ–≥–æ `Item`)
        *   `quantity: int` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1)
        *   `equipped_status: Optional[str]`
        *   `properties_json: Optional[str]` (JSON —Å—Ç—Ä–æ–∫–∞ –¥–ª—è `instance_specific_properties_json`)
    *   **–û—Ç–≤–µ—Ç**: –°–æ–∑–¥–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç `InventoryItemData` (–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ —Å ID).

*   **2.3. –û–±–Ω–æ–≤–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_inventory_item update`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `inventory_item_id: int`
        *   `field_to_update: str` (–Ω–∞–ø—Ä–∏–º–µ—Ä, "quantity", "equipped_status", "properties_json")
        *   `new_value: str` (–¥–ª—è `quantity` - —á–∏—Å–ª–æ; –¥–ª—è `equipped_status` - —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ "None"; –¥–ª—è `properties_json` - JSON —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ "None")
    *   **–û—Ç–≤–µ—Ç**: –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `InventoryItemData` (–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ).
        *   *–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ*: –ï—Å–ª–∏ `quantity` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–æ 0, –ø—Ä–µ–¥–º–µ—Ç —É–¥–∞–ª—è–µ—Ç—Å—è.

*   **2.4. –£–¥–∞–ª–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–µ–¥–º–µ—Ç–∞ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è**
    *   **–ö–æ–º–∞–Ω–¥–∞ Discord**: `/master_inventory_item delete`
    *   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã UI -> –ö–æ–º–∞–Ω–¥–∞**:
        *   `inventory_item_id: int`
    *   **–û—Ç–≤–µ—Ç**: –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ –∏–ª–∏ –æ—à–∏–±–∫–µ.

*   **2.5. –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç –º–µ–∂–¥—É –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è–º–∏**
    *   **–ü—Ä—è–º–æ–π –∫–æ–º–∞–Ω–¥—ã –Ω–µ—Ç.**
    *   **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–∞ UI**: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –≤—ã–∑–æ–≤–æ–≤:
        1.  –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ç–∞–ª–∏ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ `InventoryItem` (—á–µ—Ä–µ–∑ `/master_inventory_item view <source_inventory_item_id>`).
        2.  –£–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É –∏—Å—Ç–æ—á–Ω–∏–∫–∞: `/master_inventory_item update --inventory_item_id <id> --field_to_update quantity --new_value <new_source_qty>` (–µ—Å–ª–∏ `new_source_qty` —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 0, –ø—Ä–µ–¥–º–µ—Ç —É–¥–∞–ª–∏—Ç—Å—è).
        3.  –î–æ–±–∞–≤–∏—Ç—å/—É–≤–µ–ª–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É —Ü–µ–ª–∏: `/master_inventory_item create` (—Å `item_id` –∏–∑ —à–∞–≥–∞ 1, `instance_specific_properties_json` –∏–∑ —à–∞–≥–∞ 1, –∏ –ø–µ—Ä–µ–º–µ—â–∞–µ–º—ã–º `quantity`) –∏–ª–∏, –µ—Å–ª–∏ —É —Ü–µ–ª–∏ —É–∂–µ –µ—Å—Ç—å —Ç–∞–∫–æ–π —Å—Ç–∞–∫–∞–±–µ–ª—å–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç, —Ç–æ `/master_inventory_item update` –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è `quantity` —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ `InventoryItem` —Ü–µ–ª–∏.
    *   **–¢—Ä–µ–±—É–µ—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–π –ª–æ–≥–∏–∫–∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ UI** –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Å—Ç–∞–∫–∞, —á–∞—Å—Ç–∏ —Å—Ç–∞–∫–∞, —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤, —Å—Ç–∞–∫–∞–±–µ–ª—å–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –±–µ–∑ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤).

---
        - –í `TestSimulateConflictDetection` –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç `test_conflict_two_uses_on_same_object_static_id` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤–∏–ª–∞ `EXCLUSIVE_OBJECT_MANIPULATION`. –î–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç `test_conflict_interact_vs_use_on_same_object_name` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ —Å–ª—É—á–∞—è —Å —Ä–∞–∑–Ω—ã–º–∏ —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º–∏ –¥–ª—è –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ (–æ–∂–∏–¥–∞–µ–º–æ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –ø–æ —Ç–µ–∫—É—â–µ–π –ª–æ–≥–∏–∫–µ).
        - –í `TestConflictRuleApplication` –æ–±–Ω–æ–≤–ª–µ–Ω–æ `sample_rules_same_intent` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏ `EXCLUSIVE_OBJECT_MANIPULATION_TEST`. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã `test_apply_same_intent_two_uses_on_object` –∏ `test_apply_same_intent_interact_and_use_on_object_diff_sigs_no_conflict_here`.
    - **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã Discord `/master_simulate conflict`**:
        - –í `src/bot/commands/master_commands/master_simulation_tools_cog.py`:
            - –£—Ç–æ—á–Ω–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `actions_json` –¥–ª—è –ª—É—á—à–µ–≥–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –æ–∂–∏–¥–∞–µ–º–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `ParsedAction`.
            - –£–ª—É—á—à–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `action_entities` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö: —Ç–µ–ø–µ—Ä—å –≤—ã–≤–æ–¥—è—Ç—Å—è –≤—Å–µ —Å—É—â–Ω–æ—Å—Ç–∏, –∏—Ö —Ç–∏–ø—ã –ª–æ–∫–∞–ª–∏–∑—É—é—Ç—Å—è (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ), —Ñ–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞ —Å—Ç–∞–ª –±–æ–ª–µ–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –Ω–æ–≤—ã–π –∫–ª—é—á –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ `simulate_conflict:conflict_entity_action_detail_ext_v2`.
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Task 48 (—Å–∏–º—É–ª—è—Ü–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤) (2024-07-25)**:
    - **–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞**: –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã `src/core/conflict_simulation_system.py`, –∫–æ–º–∞–Ω–¥–∞ `/master_simulate conflict` –≤ `src/bot/commands/master_commands/master_simulation_tools_cog.py` –∏ —Ç–µ—Å—Ç—ã `tests/core/test_conflict_simulation_system.py`.
    - **–í—ã–≤–æ–¥**: –°–∏—Å—Ç–µ–º–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è–º–∏ –∏–∑ –ª–æ–≥–∞ Task 48 (–æ—Ç 2024-07-24). –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–∫–ª—é—á–∞–µ—Ç –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∞–≤–∏–ª –∏–∑ `RuleConfig`, —É–ª—É—á—à–µ–Ω–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å–∏–≥–Ω–∞—Ç—É—Ä —Ü–µ–ª–µ–π (–≤–∫–ª—é—á–∞—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –¥–ª—è –∏–Ω—Ç–µ–Ω—Ç–∞ `use`), —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–∞ –ø—Ä–∞–≤–∏–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–æ–π Discord. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∫—Ä—ã—Ç–∞ 50 unit-—Ç–µ—Å—Ç–∞–º–∏.
    - **–°—Ç–∞—Ç—É—Å**: –ü–æ–¥–∑–∞–¥–∞—á–∞ –ø–æ —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ —Ä–∞–º–∫–∞—Ö Task 48 **–∑–∞–≤–µ—Ä—à–µ–Ω–∞**.
- **–î–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ ([–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]) –ø–æ "–î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ –≤ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–µ AI"**:
    - **–¶–µ–ª—å**: –£–≥–ª—É–±–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –±–∞–ª–∞–Ω—Å–∞, –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ª–æ—Ä—É –¥–ª—è AI-–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π.
    - **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ `src/core/ai_analysis_system.py`**:
        - –ú–æ–¥–µ–ª—å `EntityAnalysisReport` –¥–æ–ø–æ–ª–Ω–µ–Ω–∞ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ—Ü–µ–Ω–∫–∞–º–∏: `balance_score_details`, `lore_score_details`, `quality_score_details`.
        - –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–Ω–∞–ª–∏–∑–∞:
            - `_analyze_item_balance`: –û—Ü–µ–Ω–∏–≤–∞–µ—Ç `base_value` –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Å–≤–æ–π—Å—Ç–≤, —Ä–µ–¥–∫–æ—Å—Ç–∏) –∏ –≤—ã—è–≤–ª—è–µ—Ç —á—Ä–µ–∑–º–µ—Ä–Ω–æ –º–æ—â–Ω—ã–µ/—Å–ª–∞–±—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ (—É—Ä–æ–Ω –æ—Ä—É–∂–∏—è, —Å–∏–ª–∞ –∑–µ–ª–∏–π) –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∞–≤–∏–ª –∏–∑ `RuleConfig`.
            - `_analyze_npc_balance`: –û—Ü–µ–Ω–∏–≤–∞–µ—Ç HP –∏ —Å—Ç–∞—Ç—ã –∞—Ç–∞–∫–∏ NPC –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —É—Ä–æ–≤–Ω—è, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ `RuleConfig`.
            - `_analyze_quest_balance`: –û—Ü–µ–Ω–∏–≤–∞–µ—Ç –Ω–∞–≥—Ä–∞–¥—ã (XP, –ø—Ä–µ–¥–º–µ—Ç—ã) –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç—å (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —à–∞–≥–æ–≤) –∫–≤–µ—Å—Ç–æ–≤ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –∏—Ö —É—Ä–æ–≤–Ω—è, –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∞–≤–∏–ª –∏–∑ `RuleConfig`.
            - `_analyze_text_content_lore`: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∑–∞–ø—Ä–µ—â–µ–Ω–Ω—ã—Ö/–Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∏ —Å–ª–æ–≤, –Ω–∞—Ä—É—à–∞—é—â–∏—Ö —Å—Ç–∏–ª—å –ª–æ—Ä–∞ (–Ω–∞ –æ—Å–Ω–æ–≤–µ `RuleConfig`).
            - `_analyze_properties_json_structure`: –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –∫–ª—é—á–µ–π –≤ `properties_json` –¥–ª—è `Item` –∏ `NPC` (–Ω–∞ –æ—Å–Ω–æ–≤–µ `RuleConfig`).
        - **–£–ª—É—á—à–µ–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫**:
            - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–Ω–æ—Ç—ã i18n –ø–æ–ª–µ–π —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `GuildConfig.supported_languages_json` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —è–∑—ã–∫–æ–≤.
        - **–ù–æ–≤—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –±–∞—Ç—á–∞**:
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å `static_id` —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π, —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –≤—ã–∑–æ–≤–µ.
            - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å `name_i18n`/`title_i18n` (–¥–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞) —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ –æ–¥–Ω–æ–º –≤—ã–∑–æ–≤–µ.
        - **–ê–≥—Ä–µ–≥–∞—Ü–∏—è –æ—Ü–µ–Ω–æ–∫**: –í–≤–µ–¥–µ–Ω —Ä–∞—Å—á–µ—Ç —Å—Ä–µ–¥–Ω–∏—Ö –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫ (`overall_quality_avg`, `overall_lore_avg`) –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –æ—Ç—á–µ—Ç–∞.
    - **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã Discord `/master_analyze ai_generation` (`src/bot/commands/master_commands/master_simulation_tools_cog.py`)**:
        - –í—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫ (`balance_score_details`, `lore_score_details`, `quality_score_details`) –∏ –∏—Ö —Å—Ä–µ–¥–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
    - **Unit-—Ç–µ—Å—Ç—ã (`tests/core/test_ai_analysis_system.py`)**:
        - –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤—ã—Ö –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∞–Ω–∞–ª–∏–∑–∞ (`_analyze_item_balance`, `_analyze_npc_balance`, `_analyze_quest_balance`, `_analyze_text_content_lore`, `_analyze_properties_json_structure`).
        - –î–æ–±–∞–≤–ª–µ–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `analyze_generated_content` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—ã–∑–æ–≤–∞ –Ω–æ–≤—ã—Ö –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —É–ª—É—á—à–µ–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ i18n, –ø—Ä–æ–≤–µ—Ä–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ –±–∞—Ç—á–µ –∏ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫.
- **–°—Ç–∞—Ç—É—Å Task 48**: –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç. –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∫–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω—ã. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–∞–ª—å–Ω–µ–π—à–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª –≤ `RuleConfig` –∏, –≤–æ–∑–º–æ–∂–Ω–æ, –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ —ç–≤—Ä–∏—Å—Ç–∏–∫ –∞–Ω–∞–ª–∏–∑–∞.

## Task 50: üß† 11.1 Dialogue Generation Module (LLM, Multy-i18n, According to Rules)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: Prepare the prompt for the LLM to generate NPC dialogue lines. API `generate_npc_dialogue(guild_id: int, context: dict) -> str`.
- **–ü–ª–∞–Ω**:
    1.  **–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é `prepare_dialogue_generation_prompt` –≤ `src/core/ai_prompt_builder.py`**.
        *   –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å `session: AsyncSession`, `guild_id: int` –∏ `context: dict`.
        *   –°–ª–æ–≤–∞—Ä—å `context` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞.
        *   –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–±–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤–Ω—É—Ç—Ä–∏ `prepare_dialogue_generation_prompt`.
        *   –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –ø—Ä–æ–º–ø—Ç–∞.
    2.  **–°–æ–∑–¥–∞—Ç—å API —Ñ—É–Ω–∫—Ü–∏—é `generate_npc_dialogue` –≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ `src/core/dialogue_system.py`**.
        *   –§—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å `session: AsyncSession`, `guild_id: int` –∏ `context: dict`.
        *   –í—ã–∑–≤–∞—Ç—å `prepare_dialogue_generation_prompt` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ–º–ø—Ç–∞.
        *   –í—ã–∑–≤–∞—Ç—å LLM (–º–æ–∫).
        *   –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Ç–≤–µ—Ç –∏ –≤–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–∫—É-—Ä–µ–ø–ª–∏–∫—É.
        *   –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç `generate_npc_dialogue` –∏–∑ `src/core/__init__.py`.
    3.  **–û–±–Ω–æ–≤–∏—Ç—å `AGENTS.md`**. (–≠—Ç–æ—Ç —à–∞–≥)
    4.  **–ù–∞–ø–∏—Å–∞—Ç—å –±–∞–∑–æ–≤—ã–µ Unit-—Ç–µ—Å—Ç—ã**.
    5.  **–ó–∞–≥–ª—É—à–∫–∏ –∏ —Ä–µ–∞–ª—å–Ω—ã–µ CRUD**.
- **–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π**:
    - **–®–∞–≥ 1 –≤—ã–ø–æ–ª–Ω–µ–Ω**: –§—É–Ω–∫—Ü–∏—è `prepare_dialogue_generation_prompt` —Å–æ–∑–¥–∞–Ω–∞ –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `src/core/ai_prompt_builder.py`. –û–Ω–∞ –≤–∫–ª—é—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—ã–π —Å–±–æ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (NPC, –∏–≥—Ä–æ–∫, –ø–∞—Ä—Ç–∏—è, –ª–æ–∫–∞—Ü–∏—è, –æ–∫—Ä—É–∂–µ–Ω–∏–µ, –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –ø–∞–º—è—Ç—å NPC (–∑–∞–≥–ª—É—à–∫–∞), –∫–≤–µ—Å—Ç—ã, WorldState, –ø—Ä–∞–≤–∏–ª–∞ –¥–∏–∞–ª–æ–≥–∞) –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è LLM. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ `ai_prompt_builder.py` –±—ã–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω—ã –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.
    - **–®–∞–≥ 2 –≤—ã–ø–æ–ª–Ω–µ–Ω**: API —Ñ—É–Ω–∫—Ü–∏—è `generate_npc_dialogue` —Å–æ–∑–¥–∞–Ω–∞ –≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ `src/core/dialogue_system.py`. –§—É–Ω–∫—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `prepare_dialogue_generation_prompt`, –≤—ã–∑—ã–≤–∞–µ—Ç –º–æ–∫ LLM (–ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å—Ç–æ–π –º–æ–∫ –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤) –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—Ç–≤–µ—Ç. –§—É–Ω–∫—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ `src/core/__init__.py`.
    - **–®–∞–≥ 3 –≤—ã–ø–æ–ª–Ω–µ–Ω**: `AGENTS.md` –æ–±–Ω–æ–≤–ª–µ–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Task 50 –∏ —Ç–µ–∫—É—â–∏–º –ø–ª–∞–Ω–æ–º.
    - **–®–∞–≥ 4 –≤—ã–ø–æ–ª–Ω–µ–Ω**: –ù–∞–ø–∏—Å–∞–Ω—ã –±–∞–∑–æ–≤—ã–µ unit-—Ç–µ—Å—Ç—ã –¥–ª—è `prepare_dialogue_generation_prompt` –≤ `tests/core/test_ai_prompt_builder.py` –∏ –¥–ª—è `generate_npc_dialogue` –≤ `tests/core/test_dialogue_system.py`.
    - **–®–∞–≥ 5 –≤—ã–ø–æ–ª–Ω–µ–Ω**: –í—Å–µ –∑–∞–≥–ª—É—à–∫–∏ CRUD –≤ `ai_prompt_builder.py` (`guild_config_crud`, `generated_npc_crud`, `crud_relationship`, –∫–≤–µ—Å—Ç–æ–≤—ã–µ CRUD, `ability_crud`, `skill_crud`) –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∏–º–ø–æ—Ä—Ç—ã —Ä–µ–∞–ª—å–Ω—ã—Ö CRUD-–æ–ø–µ—Ä–∞—Ü–∏–π.
- **–°—Ç–∞—Ç—É—Å**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –Ω–æ –Ω–µ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º.
- **–ü—Ä–æ–±–ª–µ–º—ã**:
    *   –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤ (`pytest tests/`) –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫ `ModuleNotFoundError` (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'discord', 'sqlalchemy', 'pydantic'). –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–µ—Å—Ç–æ–≤—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏–µ–º –∏–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –ø–µ—Å–æ—á–Ω–∏—Ü–µ.
    *   –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ `pip install -r requirements.txt` (–≤ —Ç–æ–º —á–∏—Å–ª–µ —Å `--force-reinstall`) –Ω–µ —Ä–µ—à–∏–ª–∞ –ø—Ä–æ–±–ª–µ–º—É.
- **–ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–¥–µ–ª–∞—Ç—å**:
    *   **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è**, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –≤–Ω–µ—Å–µ–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –∏—Ö –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—É—é —á–∞—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞.
    *   –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è, **–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã** –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—à–∏–±–∫–∏, –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç–∞–º–∏.

## Task 47: üõ†Ô∏è 15.1 Master Command System (–ó–∞–≤–µ—Ä—à–µ–Ω–æ 2024-07-18)
- **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä Discord-–∫–æ–º–∞–Ω–¥ –¥–ª—è –ú–∞—Å—Ç–µ—Ä–∞ –ò–≥—Ä—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥–µ–π–º–ø–ª–µ–µ–º –∏ –¥–∞–Ω–Ω—ã–º–∏ –≤ –µ–≥–æ –≥–∏–ª—å–¥–∏–∏. –ö–æ–º–∞–Ω–¥—ã –¥–æ–ª–∂–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç—å `guild_id` –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∫–æ–º–∞–Ω–¥—ã. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –¥–ª—è –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –Ω–∞ —è–∑—ã–∫–µ –ú–∞—Å—Ç–µ—Ä–∞. CRUD API –¥–ª—è –í–°–ï–• –º–æ–¥–µ–ª–µ–π –ë–î. API –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –≤ —Ç–∞–±–ª–∏—Ü–µ `RuleConfig`. –ö–æ–º–∞–Ω–¥—ã —Ä—É—á–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞/–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—É—â–Ω–æ—Å—Ç–µ–π –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å –í –ö–û–ù–¢–ï–ö–°–¢–ï `guild_id`. API `/master resolve_conflict <id> <outcome>` –¥–ª—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–¥—É–ª—é –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ö–æ–¥–æ–≤.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    - **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–º–∞–Ω–¥**: –ú–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥—ã –±—ã–ª–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –∏–∑ `master_admin_commands.py` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ Cog'–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/bot/commands/master_commands/`, —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º. –ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ –∫–æ–º–∞–Ω–¥ –ø–æ–ª—É—á–∏–ª–∞ —Å–≤–æ–π –ø—Ä–µ—Ñ–∏–∫—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/master_player`, `/master_item`).
    - **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è CRUD-–∫–æ–º–∞–Ω–¥**:
        - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ CRUD (Create, Read, Update, Delete) –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π, –≤–∫–ª—é—á–∞—è: `Player`, `Party`, `Item`, `RuleConfig`, `Ability`, `PendingConflict`, `Faction`, `GeneratedNpc`, `Location`, `Questline`, `GeneratedQuest`, `QuestStep`, `PlayerQuestProgress`, `InventoryItem`, `Relationship`, `StatusEffectDefinition`, `StoryLog` (—á–∞—Å—Ç–∏—á–Ω–æ), `CraftingRecipe`, `Skill`, `PlayerNpcMemory`, `GlobalNpc`, `MobileGroup`.
        - –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç `interaction.guild_id` –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö.
    - **–£—Ç–∏–ª–∏—Ç–∞ `parse_json_parameter`**:
        - –í `src/bot/utils.py` —Å–æ–∑–¥–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ `parse_json_parameter` –¥–ª—è —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ JSON-—Å—Ç—Ä–æ–∫, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –≤ –∫–æ–º–∞–Ω–¥—ã.
        - –≠—Ç–∞ —É—Ç–∏–ª–∏—Ç–∞ –±—ã–ª–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤–æ –≤—Å–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤–æ –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä-–∫–æ–≥–∞—Ö –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ JSON-–ø–æ–ª–µ–π.
    - **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è**:
        - `MasterFactionCog`: –£–ª—É—á—à–µ–Ω–æ —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ—Ä–∞–∫—Ü–∏–π, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ ID –ª–∏–¥–µ—Ä–∞ NPC.
        - `MasterMobileGroupCog`: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –º–æ–¥–µ–ª–∏ (`static_id`, `description_i18n_json` –∏ –¥—Ä.).
        - `MasterPlayerCog`: `attributes_json` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ `parse_json_parameter`.
        - `MasterCombatEncounterCog`: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `combat_encounter_update`.
        - `MasterConflictCog`: –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `conflict_delete`.
        - `MasterMemoryCog`: –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã `memory_create` –∏ `memory_update`.
        - `MasterQuestCog`: `progress_update` —Ç–µ–ø–µ—Ä—å –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–Ω–æ–≤–ª—è—Ç—å `progress_data_json`.
    - **–õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**: –û–±–µ—Å–ø–µ—á–µ–Ω–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `get_localized_message_template`.
    - **–ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**: –ö–æ–º–∞–Ω–¥–∞ `/master_conflict resolve` —Ç–µ–ø–µ—Ä—å —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç `TurnController` –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ö–æ–¥–æ–≤ –¥–ª—è –≥–∏–ª—å–¥–∏–∏, –µ—Å–ª–∏ –≤—Å–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ä–∞–∑—Ä–µ—à–µ–Ω—ã.
    - **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ linting**: –í —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –æ—à–∏–±–∫–∏ linting (Pylance), —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º–∏ `try-except` –±–ª–æ–∫–∞–º–∏ –∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏ –≤ `inventory_master_commands.py`, `party_master_commands.py` –∏ `quest_master_commands.py`.
- **–°—Ç–∞—Ç—É—Å**: –ó–∞–¥–∞—á–∞ 47 –≤—ã–ø–æ–ª–Ω–µ–Ω–∞. –°–∏—Å—Ç–µ–º–∞ –º–∞—Å—Ç–µ—Ä-–∫–æ–º–∞–Ω–¥ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ –∏ —É–ª—É—á—à–µ–Ω–∞.

## –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Master Admin Commands (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –∑–∞–¥–∞—á–∞ –æ—Ç 2024-07-16)
- **–¶–µ–ª—å**: –î–µ–∫–æ–º–ø–æ–∑–∏—Ä–æ–≤–∞—Ç—å –±–æ–ª—å—à–æ–π —Ñ–∞–π–ª `src/bot/commands/master_admin_commands.py` –Ω–∞ –±–æ–ª–µ–µ –º–µ–ª–∫–∏–µ –∏ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ Cog'–∏ –ø–æ —Å—É—â–Ω–æ—Å—Ç—è–º –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç–∏.
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è**:
    1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `src/bot/commands/master_commands/` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤—ã—Ö Cog'–æ–≤.
    2. –î–ª—è –∫–∞–∂–¥–æ–π –æ—Å–Ω–æ–≤–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ (Player, RuleConfig, Party –∏ —Ç.–¥.), —É–ø—Ä–∞–≤–ª—è–µ–º–æ–π —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã –º–∞—Å—Ç–µ—Ä–∞, —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª Cog –≤ –Ω–æ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `player_master_commands.py`).
    3. –ö–∞–∂–¥—ã–π –Ω–æ–≤—ã–π Cog –±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —Å–≤–æ—é —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—É—é –∫–æ—Ä–Ω–µ–≤—É—é –≥—Ä—É–ø–ø—É –∫–æ–º–∞–Ω–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/master_player`, `/master_ruleconfig`) –≤–º–µ—Å—Ç–æ –æ–±—â–µ–π –≥—Ä—É–ø–ø—ã `/master_admin`. –≠—Ç–æ —É–ø—Ä–æ—Å—Ç–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –∫–æ–º–∞–Ω–¥.
    4. –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ –∫–æ–º–∞–Ω–¥ –∏–∑ `master_admin_commands.py` –≤ –Ω–æ–≤—ã–µ —Ñ–∞–π–ª—ã Cog'–æ–≤.
    5. –û–±–Ω–æ–≤–∏—Ç—å `src/config/settings.py` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤—ã—Ö Cog'–æ–≤.
    6. –û—á–∏—Å—Ç–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π `master_admin_commands.py` –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —à–∞–≥–∏**:
    - –°–æ–∑–¥–∞–Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è `src/bot/commands/master_commands/` –∏ —Ñ–∞–π–ª `__init__.py` –≤ –Ω–µ–π.
    - **Player Commands**:
        - –°–æ–∑–¥–∞–Ω `src/bot/commands/master_commands/player_master_commands.py`.
        - –°–æ–∑–¥–∞–Ω `MasterPlayerCog` —Å –≥—Ä—É–ø–ø–æ–π –∫–æ–º–∞–Ω–¥ `/master_player`.
        - –ö–æ–º–∞–Ω–¥—ã `player view`, `player list`, `player update` –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –∏–∑ `master_admin_commands.py`.
    - **RuleConfig Commands**:
        - –°–æ–∑–¥–∞–Ω `src/bot/commands/master_commands/ruleconfig_master_commands.py`.
        - –°–æ–∑–¥–∞–Ω `MasterRuleConfigCog` —Å –≥—Ä—É–ø–ø–æ–π –∫–æ–º–∞–Ω–¥ `/master_ruleconfig`.
        - –ö–æ–º–∞–Ω–¥—ã `ruleconfig get`, `ruleconfig set`, `ruleconfig list`, `ruleconfig delete` –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã.
    - **PendingConflict Commands**:
        - –°–æ–∑–¥–∞–Ω `src/bot/commands/master_commands/conflict_master_commands.py`.
        - –°–æ–∑–¥–∞–Ω `MasterConflictCog` —Å –≥—Ä—É–ø–ø–æ–π –∫–æ–º–∞–Ω–¥ `/master_conflict`.
        - –ö–æ–º–∞–Ω–¥—ã `conflict view`, `conflict resolve`, `conflict list` –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã.
    - **Party Commands**:
        - –°–æ–∑–¥–∞–Ω `src/bot/commands/master_commands/party_master_commands.py`.
        - –°–æ–∑–¥–∞–Ω `MasterPartyCog` —Å –≥—Ä—É–ø–ø–æ–π –∫–æ–º–∞–Ω–¥ `/master_party`.
        - –ö–æ–º–∞–Ω–¥—ã `party view`, `party list`, `party create`, `party update`, `party delete` –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã.
    - –í `src/config/settings.py` —Å—Ç–∞—Ä–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ `master_admin_commands` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—É—Ç–∏ –∫ –Ω–æ–≤—ã–º Cog'–∞–º:
        - `"src.bot.commands.master_commands.player_master_commands"`
        - `"src.bot.commands.master_commands.ruleconfig_master_commands"`
        - `"src.bot.commands.master_commands.conflict_master_commands"`
        - `"src.bot.commands.master_commands.party_master_commands"`
        - `"src.bot.commands.master_commands.npc_master_commands"`
        - `"src.bot.commands.master_commands.location_master_commands"`
        - `"src.bot.commands.master_commands.item_master_commands"`
        - `"src.bot.commands.master_commands.faction_master_commands"`
        - `"src.bot.commands.master_commands.relationship_master_commands"`
        - `"src.bot.commands.master_commands.quest_master_commands"`
        - `"src.bot.commands.master_commands.combat_master_commands"`
        - `"src.bot.commands.master_commands.global_npc_master_commands"`
        - `"src.bot.commands.master_commands.mobile_group_master_commands"`
        - `"src.bot.commands.master_commands.inventory_master_commands"`
        - `"src.bot.commands.master_commands.ability_master_commands"`
        - `"src.bot.commands.master_commands.status_effect_master_commands"`
        - `"src.bot.commands.master_commands.story_log_master_commands"`
    - –§–∞–π–ª `src/bot/commands/master_admin_commands.py` –±—ã–ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω, —Ç–∞–∫ –∫–∞–∫ –≤—Å—è –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞.
- **–°—Ç–∞—Ç—É—Å**: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–∞–Ω–¥ –ú–∞—Å—Ç–µ—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω. –ö–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ –º–æ–¥—É–ª—å–Ω—ã–º –∏ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–º.

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ "–î–æ—Ä–∞–±–æ—Ç–∫–∞ Player.attributes_json –¥–ª—è Task 32" (–û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞)
- **–ó–∞–¥–∞—á–∞**: –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ–ª–µ `Player.attributes_json` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ.
- **–í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
    1.  **–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞**:
        *   –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –º–æ–¥–µ–ª—å `src/models/player.py`: –ø–æ–ª–µ `attributes_json: Mapped[Dict[str, Any]] = mapped_column(JSON, default=lambda: {}, nullable=False)` —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
        *   –ü—Ä–æ–≤–µ—Ä–µ–Ω `src/core/crud/crud_player.py`: –º–µ—Ç–æ–¥ `create_with_defaults` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç `attributes_json` –∏–∑ `RuleConfig` (–∫–ª—é—á `character_attributes:base_values`).
        *   –ü—Ä–æ–≤–µ—Ä–µ–Ω `src/core/experience_system.py`: —Ñ—É–Ω–∫—Ü–∏—è `spend_attribute_points` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `player.attributes_json`.
    2.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏**:
        *   –ù–∞–π–¥–µ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –º–∏–≥—Ä–∞—Ü–∏—è `alembic/versions/e221edc41551_add_attributes_json_to_player.py`.
        *   –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ –ø—Ä–∏–∑–Ω–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º (`op.add_column('players', sa.Column('attributes_json', sa.JSON(), nullable=False, server_default=sa.text("'{}'::jsonb")))`).
    3.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ Unit-—Ç–µ—Å—Ç–æ–≤**:
        *   –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ç–µ—Å—Ç—ã –≤ `tests/models/test_player.py`, `tests/core/crud/test_crud_player.py`, `tests/core/test_experience_system.py`, `tests/bot/commands/test_character_commands.py`.
        *   –¢–µ—Å—Ç—ã, —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –¥–ª—è `Player.attributes_json`, —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ –ø–æ–∫—Ä—ã–≤–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (—Å–æ–∑–¥–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ CRUD, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–µ –æ–ø—ã—Ç–∞ –∏ –∫–æ–º–∞–Ω–¥–∞—Ö).
        *   –ó–∞–ø—É—â–µ–Ω—ã —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≥—Ä—É–ø–ø—ã —Ç–µ—Å—Ç–æ–≤:
            *   `python -m unittest tests/models/test_player.py` - OK (5 passed)
            *   `python -m unittest tests/core/crud/test_crud_player.py` - OK (9 passed)
            *   `python -m pytest tests/core/test_experience_system.py` - OK (16 passed)
            *   `python -m pytest tests/bot/commands/test_character_commands.py` - OK (7 passed)
        *   –û–±—â–∏–π –∑–∞–ø—É—Å–∫ `pytest tests/` –≤—ã—è–≤–∏–ª 8 –æ—à–∏–±–æ–∫ –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö (`test_global_event.py`, `test_global_npc.py`, `test_mobile_group.py`, `test_quest.py`), –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å `Player.attributes_json`. –≠—Ç–∏ –æ—à–∏–±–∫–∏ —Ç—Ä–µ–±—É—é—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è.
- **–°—Ç–∞—Ç—É—Å**: –û—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ "–î–æ—Ä–∞–±–æ—Ç–∫–∞ Player.attributes_json –¥–ª—è Task 32" –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–∫—Ä—ã—Ç–∞ —Ç–µ—Å—Ç–∞–º–∏.

---
## –û—Ç–ª–æ–∂–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å —Å–∏—Å—Ç–µ–º–∞–º–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏ –∏ –¥–∏–∞–ª–æ–≥–æ–≤ (—Å–≤—è–∑–∞–Ω–æ —Å Task 37)**:
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: –í —Ä–∞–º–∫–∞—Ö Task 37 –±—ã–ª–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é (–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω) –∏ –¥–∏–∞–ª–æ–≥–∏ (—Ç–æ–Ω NPC, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ–ø—Ü–∏–π). –û–¥–Ω–∞–∫–æ, —Ç–∞–∫ –∫–∞–∫ –º–æ–¥—É–ª–∏ `trade_system` –∏ `dialogue_system` –µ—â–µ –Ω–µ –±—ã–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∏–ª–∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Task 37, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —ç—Ç–æ–π –ª–æ–≥–∏–∫–∏ –±—ã–ª–∞ –æ—Ç–ª–æ–∂–µ–Ω–∞.
    - **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**:
        1.  **–¢–æ—Ä–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `handle_trade_action` (Task 44), –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –Ω–µ–µ –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∞–≤–∏–ª–∞ `relationship_influence:trade:price_adjustment`, –ø–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–µ–∂–¥—É –∏–≥—Ä–æ–∫–æ–º –∏ NPC-—Ç–æ—Ä–≥–æ–≤—Ü–µ–º, –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª—è —Ü–µ–Ω—ã –∏ –µ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ.
        2.  **–î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `generate_npc_dialogue` (Task 50) –∏/–∏–ª–∏ `handle_dialogue_input` (Task 51), –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∞–≤–∏–ª–∞ `relationship_influence:dialogue:availability_and_tone`, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `tone_hint` –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –µ–≥–æ –≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `dialogue_option_availability` –ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–ø—Ü–∏–π –¥–∏–∞–ª–æ–≥–∞. (–ß–∞—Å—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π –≤ Task 38)
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: –í —Ä–∞–º–∫–∞—Ö Task 37 –±—ã–ª–∞ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –Ω–∞ —Ç–æ—Ä–≥–æ–≤–ª—é (–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ —Ü–µ–Ω) –∏ –¥–∏–∞–ª–æ–≥–∏ (—Ç–æ–Ω NPC, –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ–ø—Ü–∏–π).
        - –ß–∞—Å—Ç—å, –∫–∞—Å–∞—é—â–∞—è—Å—è **—Ç–æ—Ä–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã**, –±—ã–ª–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –∫–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è (–≤ `src/core/trade_system.py::_calculate_item_price` —É–∂–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª–æ `relationship_influence:trade:price_adjustment`). Unit-—Ç–µ—Å—Ç—ã –≤ `tests/core/test_trade_system.py` –±—ã–ª–∏ –¥–æ–ø–æ–ª–Ω–µ–Ω—ã –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –Ω–∞ —Ü–µ–Ω—ã. **–≠—Ç–∞ —á–∞—Å—Ç—å –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞.**
        - –ß–∞—Å—Ç—å, –∫–∞—Å–∞—é—â–∞—è—Å—è **–¥–∏–∞–ª–æ–≥–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã**, –æ—Å—Ç–∞–µ—Ç—Å—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π.
    - **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–æ—Å—Ç–∞–≤—à–∏–µ—Å—è)**:
        1.  **–î–∏–∞–ª–æ–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `generate_npc_dialogue` (Task 50) –∏/–∏–ª–∏ `handle_dialogue_input` (Task 51), –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –ø—Ä–∞–≤–∏–ª–∞ `relationship_influence:dialogue:availability_and_tone`, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ `tone_hint` –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –µ–≥–æ –≤ –ø—Ä–æ–º–ø—Ç –¥–ª—è LLM. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `dialogue_option_availability` –ø–æ—Å–ª–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ–ø—Ü–∏–π –¥–∏–∞–ª–æ–≥–∞. (–ß–∞—Å—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Å–µ–∫–∞–µ—Ç—Å—è —Å –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π –≤ Task 38)
    - **–°—Ä–æ–∫ (–æ—Å—Ç–∞–≤—à–µ–π—Å—è —á–∞—Å—Ç–∏)**: –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ Task 50/51 (–¥–∏–∞–ª–æ–≥–∏).
      **–°—Ç–∞—Ç—É—Å –Ω–∞ [—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞]**: –ß–∞—Å—Ç—å, –∫–∞—Å–∞—é—â–∞—è—Å—è `tone_hint`, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞. –ß–∞—Å—Ç—å —Å `dialogue_option_availability` –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –æ—Ç–ª–æ–∂–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –Ω–∏–∂–µ. –≠—Ç–∞ –æ–±—â–∞—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ —Ç–µ–ø–µ—Ä—å —Å—á–∏—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π –≤ —á–∞—Å—Ç–∏ `tone_hint`.
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Pydantic `parse_obj_as`**:
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: –í —Ñ–∞–π–ª–µ `src/core/ai_response_parser.py` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ç–æ–¥ `parse_obj_as`, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–º –≤ Pydantic V2 –∏ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω –≤ V3.0.
    - **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**: –ó–∞–º–µ–Ω–∏—Ç—å `parse_obj_as(GeneratedEntity, entity_data)` –Ω–∞ `TypeAdapter(GeneratedEntity).validate_python(entity_data)`. –≠—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –∏–º–ø–æ—Ä—Ç–∞ `TypeAdapter` –∏–∑ `pydantic`.
    - **–°—Ä–æ–∫**: –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Pydantic.
- **–î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –∏ —É—Ç–æ—á–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤**:
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–∏—Å—Ç–µ–º–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –≤ `src/core/conflict_simulation_system.py` –±—ã–ª–∞ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω–∞ –≤ —Ä–∞–º–∫–∞—Ö Task 48 (–¥–æ—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç 2024-07-19 –∏ 2024-07-22) –∏ —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ `RuleConfig`. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≥–ª—É–±–æ–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å `action_processor.py` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –æ–∫–∞–∑–∞–ª–æ—Å—å –Ω–µ —Å–æ–≤—Å–µ–º —Ç–æ—á–Ω—ã–º, —Ç–∞–∫ –∫–∞–∫ `action_processor.py` –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∞–∫–æ–π –ª–æ–≥–∏–∫–∏ –¥–ª—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ *–º–µ–∂–¥—É* –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –∏–≥—Ä–æ–∫–æ–≤. –°–∏—Å—Ç–µ–º–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Ç–µ–ø–µ—Ä—å —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º –º–µ—Å—Ç–æ–º –¥–ª—è —ç—Ç–æ–π –ª–æ–≥–∏–∫–∏.
    - **–í–æ–∑–º–æ–∂–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è**:
        - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∏–ª–∏ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —É—á–∏—Ç—ã–≤–∞—é—â–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫—Ç–æ—Ä–æ–≤, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–µ–π—Å—Ç–≤–∏–π, —É—Å–ª–æ–≤–∏—è –æ–∫—Ä—É–∂–µ–Ω–∏—è).
        - –ë–æ–ª–µ–µ –≥–ª—É–±–æ–∫–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∏ –∏—Ö —Ç–∏–ø–æ–≤.
        - –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —ç–≤—Ä–∏—Å—Ç–∏–∫ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ "—Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏" –∏–ª–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞, –≤–æ–∑–º–æ–∂–Ω–æ, —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `RuleConfig`.
        - –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞–±–æ—Ä–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤, –ø–æ—Å—Ç–∞–≤–ª—è–µ–º—ã—Ö "–∏–∑ –∫–æ—Ä–æ–±–∫–∏".
    - **–°—Ä–æ–∫**: –ü–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏ –ø–æ—è–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∏–º—É–ª—è—Ü–∏–∏. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ä–µ–¥–Ω–∏–π.
- **–î–∞–ª—å–Ω–µ–π—à–µ–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ –≤ –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–µ AI (—Å–≤—è–∑–∞–Ω–æ —Å Task 48)**:
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: –í —Ä–∞–º–∫–∞—Ö Task 48 (–¥–æ—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç [–¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞]) –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä AI –≤ `src/core/ai_analysis_system.py` –±—ã–ª –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω. –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–ª–∞–Ω—Å–∞ –¥–ª—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤, NPC –∏ –∫–≤–µ—Å—Ç–æ–≤; –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–µ–∫—Å—Ç–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –ª–æ—Ä—É; —É–ª—É—á—à–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (i18n, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `properties_json`, —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –≤ –±–∞—Ç—á–µ). –ö–æ–º–∞–Ω–¥–∞ `/master_analyze ai_generation` –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ü–µ–Ω–æ–∫.
    - **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–¥–∞–ª—å–Ω–µ–π—à–∏–µ)**:
        1.  **–¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª `RuleConfig`**: –î–ª—è –≤—Å–µ—Ö –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ (–±–∞–ª–∞–Ω—Å, –ª–æ—Ä, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞) –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏ —Ç—â–∞—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ `RuleConfig`. –¢–µ–∫—É—â–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ª–∏–±–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –ª–∏–±–æ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª.
        2.  **–ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ —ç–≤—Ä–∏—Å—Ç–∏–∫**: –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —ç–≤—Ä–∏—Å—Ç–∏–∫–∏ –∞–Ω–∞–ª–∏–∑–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ü–µ–Ω–∫–∞ "—á—Ä–µ–∑–º–µ—Ä–Ω–æ—Å—Ç–∏" —Å–≤–æ–π—Å—Ç–≤ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏–ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ç–∏–ª—é –ª–æ—Ä–∞) –º–æ–≥—É—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
        3.  **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–∞ –¥—Ä—É–≥–∏–µ —Ç–∏–ø—ã —Å—É—â–Ω–æ—Å—Ç–µ–π**: –ï—Å–ª–∏ AI –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `GlobalEvent`, `MobileGroup`), –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –æ–±—É—á–∏—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å –∏ —Å –Ω–∏–º–∏, –¥–æ–±–∞–≤–∏–≤ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è –Ω–∏—Ö –ø—Ä–æ–≤–µ—Ä–∫–∏.
        4.  **–£–≥–ª—É–±–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫**: –ù–∞–ø—Ä–∏–º–µ—Ä, –∞–Ω–∞–ª–∏–∑ —É—Ä–æ–Ω–∞ –æ—Ä—É–∂–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–¥–µ–ª–∞–Ω –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–∞—Ä—Å–µ—Ä–∞ –¥–∞–π—Å-—Å—Ç—Ä–æ–∫ –≤–º–µ—Å—Ç–æ —Ç–µ–∫—É—â–∏—Ö —É–ø—Ä–æ—â–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫.
    - **–°—Ä–æ–∫**: –ü–æ—Å—Ç–æ—è–Ω–Ω–æ, –ø–æ –º–µ—Ä–µ —Ä–∞–∑–≤–∏—Ç–∏—è —Å–∏—Å—Ç–µ–º—ã –∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –æ–ø—ã—Ç–∞. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤–∏–ª `RuleConfig`: –≤—ã—Å–æ–∫–∏–π.
- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è `dialogue_option_availability` –≤ —Å–∏—Å—Ç–µ–º–µ –¥–∏–∞–ª–æ–≥–æ–≤ (—Å–≤—è–∑–∞–Ω–æ —Å Task 37, –æ—Ç–ª–æ–∂–µ–Ω–Ω–∞—è —á–∞—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π)**:
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤–ª–∏—è–Ω–∏—è –æ—Ç–Ω–æ—à–µ–Ω–∏–π –Ω–∞ –¥–∏–∞–ª–æ–≥–∏ (Task 37, –¥–æ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –≤ [—Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞]) –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ `tone_hint`. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ç–∞–∫–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ–ø—Ü–∏–π –¥–∏–∞–ª–æ–≥–∞ –¥–ª—è –∏–≥—Ä–æ–∫–∞ –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –µ–≥–æ –æ—Ç–Ω–æ—à–µ–Ω–∏–π —Å NPC –∏ –¥—Ä—É–≥–∏—Ö —É—Å–ª–æ–≤–∏–π, –∫–∞–∫ —ç—Ç–æ –±—ã–ª–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –≤ –ø—Ä–∞–≤–∏–ª–µ `relationship_influence:dialogue:availability_and_tone` (—Å–µ–∫—Ü–∏—è `option_availability_rules`).
    - **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–®–∞–≥ 4 –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–ª–∞–Ω–∞)**:
        1.  **–ê–Ω–∞–ª–∏–∑ –∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**:
            *   –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫ –∏ –≥–¥–µ –≤ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º–µ –¥–∏–∞–ª–æ–≥–æ–≤ (–≤–µ—Ä–æ—è—Ç–Ω–æ, –≤ `src/core/dialogue_system.py` –∏/–∏–ª–∏ `src/core/action_processor.py` –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –≤–≤–æ–¥–∞ –∏–≥—Ä–æ–∫–∞) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—ã–±–æ—Ä –∏–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –æ–ø—Ü–∏–π –∏–≥—Ä–æ–∫—É. –°–µ–π—á–∞—Å –æ–ø—Ü–∏–∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –Ω–µ —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –±—ç–∫–µ–Ω–¥–∞, –∞ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ NLU.
            *   –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º "—Ç–µ–≥–æ–≤ –æ–ø—Ü–∏–π" –∏–ª–∏ –¥—Ä—É–≥—É—é —Å–∏—Å—Ç–µ–º—É –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π/—Ñ—Ä–∞–∑.
            *   –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å, –∫–∞–∫ `handle_dialogue_input` –∏–ª–∏ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∞—Ç—å —ç—Ç–∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∏—Ö.
        2.  **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å `RuleConfig`**:
            *   –í `handle_dialogue_input` –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –ø—Ä–∞–≤–∏–ª–æ `relationship_influence:dialogue:availability_and_tone`.
            *   –î–ª—è –∫–∞–∂–¥–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π "—Ç–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–æ–π" –æ–ø—Ü–∏–∏ –¥–∏–∞–ª–æ–≥–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —É—Å–ª–æ–≤–∏—è –∏–∑ `option_availability_rules` —ç—Ç–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞:
                *   `required_relationship_type` –∏ `min_value`: –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å —Ç–µ–∫—É—â–∏–º–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è–º–∏ –∏–≥—Ä–æ–∫–∞ –∏ NPC.
                *   `unlock_condition_formula`: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª—ã. –§–æ—Ä–º—É–ª–∞ –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ —É –∏–≥—Ä–æ–∫–∞ (–ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∫ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—é), —Å–æ—Å—Ç–æ—è–Ω–∏–µ NPC, —Ñ–ª–∞–≥–∏ –º–∏—Ä–∞ –∏ —Ç.–¥. –≠—Ç–æ —Å–ª–æ–∂–Ω–∞—è —á–∞—Å—Ç—å, —Ç—Ä–µ–±—É—é—â–∞—è –∞–∫–∫—É—Ä–∞—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ `eval()` –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞/–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è —Ñ–æ—Ä–º—É–ª.
        3.  **–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ–ø—Ü–∏–π**:
            *   –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ (–¥–æ—Å—Ç—É–ø–Ω—ã–µ) –æ–ø—Ü–∏–∏ –±—É–¥—É—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –∏–≥—Ä–æ–∫—É. –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ –≤ –æ—Ç–≤–µ—Ç–µ NPC ("–£—á–∏—Ç—ã–≤–∞—è –Ω–∞—à–∏ –¥–æ–±—Ä—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, —è –º–æ–≥ –±—ã —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å —Ç–µ–±–µ –æ...") –∏–ª–∏, –≤ –±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π —Å–∏—Å—Ç–µ–º–µ, –ø–µ—Ä–µ–¥–∞—á–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –æ–ø—Ü–∏–π –∫–ª–∏–µ–Ω—Ç—É (–µ—Å–ª–∏ UI/–∫–ª–∏–µ–Ω—Ç —ç—Ç–æ –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å).
    - **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–®–∞–≥ 5 –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø–ª–∞–Ω–∞ - Unit-—Ç–µ—Å—Ç—ã)**:
        *   –ù–∞–ø–∏—Å–∞—Ç—å Unit-—Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –≤ `src/core/dialogue_system.py` (–∏–ª–∏ –≥–¥–µ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–ø—Ü–∏–π).
        *   –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –ø–æ–∫—Ä—ã–≤–∞—Ç—å:
            *   –ö–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–∏ `option_availability_rules` –∏–∑ `RuleConfig`.
            *   –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏/–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –æ–ø—Ü–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–Ω–∞—á–µ–Ω–∏–π –æ—Ç–Ω–æ—à–µ–Ω–∏–π.
            *   –ü—Ä–æ–≤–µ—Ä–∫—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è `unlock_condition_formula` (—Å –º–æ–∫–∞–º–∏ –¥–ª—è –∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–∏—Å—Ç–µ–º, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–∏—Ä–∞).
            *   –û–±—Ä–∞–±–æ—Ç–∫—É —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ –ø—Ä–∞–≤–∏–ª–æ –∏–ª–∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.
    - **–°—Ä–æ–∫**: –ü–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —á–µ—Ç–∫–∏—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –º–µ—Ö–∞–Ω–∏–∑–º—É –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–≤—ã—Ö –æ–ø—Ü–∏–π –∏–≥—Ä–æ–∫—É. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ä–µ–¥–Ω–∏–π/–Ω–∏–∑–∫–∏–π, —Ç–∞–∫ –∫–∞–∫ —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–æ—Ä–∞–±–æ—Ç–æ–∫.
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ CRUD –≤ `test_quest_master_commands.py` (–û—Ç–ª–æ–∂–µ–Ω–æ –∏–∑ Task 62)**:
    - **–§–∞–π–ª**: `tests/bot/commands/master_commands/test_quest_master_commands.py`
    - **–¢–µ—Å—Ç—ã**: `test_progress_create_success_player`, `test_progress_create_success_party`.
    - **–û—à–∏–±–∫–∞**: `AttributeError: ... does not have the attribute 'party_crud'` (–∏ –¥–ª—è `player_crud`).
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–º–∞–Ω–¥–∞ `progress_create` –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç `player_crud` –∏ `party_crud` –ª–æ–∫–∞–ª—å–Ω–æ. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π `@patch` –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–æ–¥—É–ª—è —Ç–µ—Å—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å —ç—Ç–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–º–ø–æ—Ä—Ç—ã.
    - **–í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: –ò—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫–∏ –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `patch.dict(sys.modules, ...)` –∏–ª–∏ –ø–∞—Ç—á–∏–Ω–≥ —Å–∞–º–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–≥–æ –º–æ–¥—É–ª—è –¥–æ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è) –∏–ª–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π.
    - **–°—Ä–æ–∫**: –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ —Ç–µ—Å—Ç–æ–≤ –∏–ª–∏ —Å–∏—Å—Ç–µ–º—ã –∫–æ–º–∞–Ω–¥. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ä–µ–¥–Ω–∏–π.
- **–ü—Ä–æ–±–ª–µ–º–∞ —Å –º–æ–∫–æ–º `get_localized_text` –≤ `tests/bot/commands/test_party_commands.py` (–û—Ç–ª–æ–∂–µ–Ω–æ –∏–∑ Task 62)**:
    - **–§–∞–π–ª**: `tests/bot/commands/test_party_commands.py`
    - **–¢–µ—Å—Ç—ã**: `test_party_join_moves_player_location`, `test_party_join_success_by_name`.
    - **–û—à–∏–±–∫–∞**: `AssertionError: expected call not found.` `ctx.send` –ø–æ–ª—É—á–∞–µ—Ç `<coroutine object ...>` –≤–º–µ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∏.
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: `get_localized_text` (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è) –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å `await` –≤ –∫–æ–¥–µ –∫–æ–º–∞–Ω–¥—ã. –ú–æ–∫ `side_effect` (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è) –¥–ª—è `get_localized_text` –≤ `setUp` —ç—Ç–∏—Ö —Ç–µ—Å—Ç–æ–≤, –≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è `AsyncMock`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤–æ–∑–≤—Ä–∞—Ç—É –∫–æ—Ä—É—Ç–∏–Ω—ã.
    - **–í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: –°–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–∫ `get_localized_text` –≤ `test_party_commands.py`, —á—Ç–æ–±—ã –æ–Ω –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–ª —Å—Ç—Ä–æ–∫–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —á—Ç–æ–±—ã `await` –Ω–∞ –º–æ–∫–µ –Ω–µ –ø—Ä–∏–≤–æ–¥–∏–ª –∫ –≤–æ–∑–≤—Ä–∞—Ç—É –∫–æ—Ä—É—Ç–∏–Ω—ã. –í–æ–∑–º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `MagicMock(return_value=...)` –∏–ª–∏ –æ–±–µ—Å–ø–µ—á–∏—Ç—å, —á—Ç–æ–±—ã `side_effect` –Ω–µ –±—ã–ª `async def`.
    - **–°—Ä–æ–∫**: –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ —Ç–µ—Å—Ç–æ–≤ –∫–æ–º–∞–Ω–¥. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ä–µ–¥–Ω–∏–π.
- **–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `parsed_entities` –≤ `tests/core/test_action_processor.py` (–û—Ç–ª–æ–∂–µ–Ω–æ –∏–∑ Task 62)**:
    - **–§–∞–π–ª**: `tests/core/test_action_processor.py`
    - **–¢–µ—Å—Ç**: `test_process_player_message_for_nlu_player_in_dialogue`.
    - **–û—à–∏–±–∫–∞**: `AssertionError: expected call not found.` `mock_handle_dialogue_input` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è —Å `parsed_entities` –∫–∞–∫ `List[Dict]`, —Ç–µ—Å—Ç –æ–∂–∏–¥–∞–µ—Ç `List[ActionEntity]`.
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: `dialogue_system.handle_dialogue_input` –æ–∂–∏–¥–∞–µ—Ç `List[Dict[str, Any]]`. `action_processor.process_player_message_for_nlu` –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç `List[ActionEntity]` –≤ `List[Dict]`. –¢–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç—Ä–∞–∂–∞—Ç—å —ç—Ç–æ.
    - **–í–æ–∑–º–æ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ**: –û–±–Ω–æ–≤–∏—Ç—å –∞—Å—Å–µ—Ä—Ç—ã –≤ —Ç–µ—Å—Ç–µ, —á—Ç–æ–±—ã –æ–∂–∏–¥–∞—Ç—å `parsed_entities` –≤ –≤–∏–¥–µ `List[Dict[str, Any]]`.
    - **–°—Ä–æ–∫**: –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º —Ä–µ—Å–º–æ—Ç—Ä–µ —Ç–µ—Å—Ç–æ–≤ `action_processor.py`. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: —Å—Ä–µ–¥–Ω–∏–π.
- **–ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è UI –ó–∞–¥–∞—á (–≤–º–µ—Å—Ç–æ –∑–∞–≥–ª—É—à–µ–∫)**:
    - **–û–ø–∏—Å–∞–Ω–∏–µ**: –í —Å–≤—è–∑–∏ —Å —É—Ç–æ—á–Ω–µ–Ω–∏–µ–º –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤—Å–µ UI –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω–µ–µ –±—ã–ª–∏ –ø–æ–º–µ—á–µ–Ω—ã –∫–∞–∫ "–ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç–µ–ª—å–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ" (—Å–æ–∑–¥–∞–Ω—ã TypeScript —Ç–∏–ø—ã, —Å—Ç–∞–±—ã —Å–µ—Ä–≤–∏—Å–æ–≤, –∑–∞–≥–ª—É—à–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã API), —Ç–µ–ø–µ—Ä—å —Ç—Ä–µ–±—É—é—Ç –ø–æ–ª–Ω–æ–π UI —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –û–ø–∏—Å–∞–Ω–∏—è —ç—Ç–∏—Ö –∑–∞–¥–∞—á –≤ `Tasks.txt` –±—ã–ª–∏ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã [–¢–µ–∫—É—â–∞—è –î–∞—Ç–∞] –¥–ª—è –æ—Ç—Ä–∞–∂–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è.
    - **–ó–∞–¥–∞—á–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –ø–æ–ª–Ω–æ–π UI —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**:
        - Task 58: üñ•Ô∏è UI.4 UI for Rule Configuration (RuleConfig)
        - Task 61: üñ•Ô∏è UI.7 UI for Faction and Relationship Management
        - Task 63: üñ•Ô∏è UI.9 UI for Global Entity Management
        - Task 64: üñ•Ô∏è UI.10 UI for Monitoring and Logging
        - Task 65: üñ•Ô∏è UI.11 UI for Balance Tools
        - Task 66: üñ•Ô∏è UI.12 UI for Conflict Resolution
        - Task 68: üñ•Ô∏è UI.14 UI "Command List" Section (Help/Guide)
    - **–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ–π—Å—Ç–≤–∏—è**: –î–ª—è –∫–∞–∂–¥–æ–π –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–Ω—É—é —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –≤—Å—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –ª–æ–≥–∏–∫—É –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –≤—ã–∑–æ–≤—ã API —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å—ã, –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏–π (–∑–∞–≥—Ä—É–∑–∫–∞, –æ—à–∏–±–∫–∏, —É—Å–ø–µ—Ö) –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â–∏—Ö unit-—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Å–µ—Ä–≤–∏—Å–æ–≤.
    - **–°—Ä–æ–∫**: –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Å–æ–≥–ª–∞—Å–Ω–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.
    - **–°—Ç–∞—Ç—É—Å –Ω–∞ [–¢–µ–∫—É—â–∞—è –î–∞—Ç–∞]**: –û–ø–∏—Å–∞–Ω–∏—è –∑–∞–¥–∞—á –≤ `Tasks.txt` –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã. –ì–æ—Ç–æ–≤—ã –∫ –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ–º—É –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é.

---
## —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏
*(–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –¥–ª—è –∑–∞–¥–∞—á, –æ–ø–∏—Å–∞–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –≤ Tasks.txt –±—ã–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ò–õ–ò –¥–ª—è —Ñ–∏–∫—Å–∞—Ü–∏–∏ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–æ–∫ –≤ –∫–æ–¥–µ)*

### Task 0.1: Discord Bot Project Initialization and Basic Guild Integration
-   **–§–∞–π–ª:** `backend/bot/core.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `on_error()` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ—à–∏–±–æ–∫.
-   **–§–∞–π–ª:** `backend/bot/events.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–£–ø—É—â–µ–Ω–∏–µ):** –í `on_guild_join()` –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±–µ–∑ —è–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `GuildConfig.system_channel_id` –∏–ª–∏ `notification_channel_id`. –í—ã–±–æ—Ä –∫–∞–Ω–∞–ª–∞ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –±–æ–ª–µ–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º.
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (TODO):** –í `on_command_error()` –¥–ª—è `CommandNotFound` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω `await ctx.send(...)`.
-   **–§–∞–π–ª:** `backend/src/bot/localization.py` (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π)
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ):** –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–∏ (–¥–∞–∂–µ –∫–∞–∫ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä) –Ω–µ –±—ã–ª–∞ —è–≤–Ω–æ —Å–æ–∑–¥–∞–Ω–∞, —Ö–æ—Ç—è —É–ø–æ–º–∏–Ω–∞–ª–∞—Å—å –≤ –ø–ª–∞–Ω–µ.

### Task 0.2: DBMS Setup and Database Model Definition with Guild ID
    *(–°–º. —Ç–∞–∫–∂–µ –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∏ –≤ Task 2.1 –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –º–æ–¥–µ–ª—è–º)*
-   **–û–±—â–µ–µ:** –ú–æ–¥–µ–ª–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã. –ú–∏–≥—Ä–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.

### Task 0.3: Basic DB Interaction Utilities and Rule Configuration Access (Guild-Aware)
-   **–§–∞–π–ª:** `backend/core/crud/crud_rule_config.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–ù–µ–ø–æ–ª–Ω–æ—Ç–∞):** –ú–æ–¥–µ–ª—å `RuleConfig` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `TimestampMixin`, –∏ –∫–æ–¥ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `updated_at` –≤ –º–µ—Ç–æ–¥–µ `create_or_update` –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω. –ï—Å–ª–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª –≤–∞–∂–Ω–æ, —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏.

### Task 1.1: Location Model (i18n, Guild-Scoped)
-   **–ó–∞–º–µ—á–∞–Ω–∏–µ:** –ú–æ–¥–µ–ª—å `Location` –∏ CRUD –¥–ª—è –Ω–µ–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã. `populate_initial_guild_locations` –≤ `backend/bot/events.py` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

### Task 1.2: Player and Party System (ORM, Commands, Guild-Scoped)
-   **–§–∞–π–ª:** `backend/bot/commands/general_commands.py` (`/start`)
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–ù–µ–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è):** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `RuleConfig` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—Ç–æ–≤–æ–π –ª–æ–∫–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–∞ (`player:starting_location_static_id`), –∫–∞–∫ —ç—Ç–æ –±—ã–ª–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ.
-   **–§–∞–π–ª:** `backend/bot/commands/party_commands.py` (`/party ...`)
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (TODO):** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–º–æ—â–∏ –¥–ª—è –≥—Ä—É–ø–ø—ã –∫–æ–º–∞–Ω–¥ `/party`.
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–ù–µ–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `/party create`):** –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏–º–µ–Ω–∏ –ø–∞—Ä—Ç–∏–∏ –Ω–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å/—É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å —Å–æ–≥–ª–∞—Å–Ω–æ `RuleConfig`.
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–ù–µ–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `/party leave`):** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –ª–∏–¥–µ—Ä—Å—Ç–≤–∞ –∏–ª–∏ —Ä–æ—Å–ø—É—Å–∫–∞ –≥—Ä—É–ø–ø—ã —Å–æ–≥–ª–∞—Å–Ω–æ –ø–æ–ª–∏—Ç–∏–∫–∞–º –∏–∑ `RuleConfig` (`party:leader_transfer_policy`, `party:auto_disband_threshold`).
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (TODO –∏ –ù–µ–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `/party disband`):** –ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ª–∏–¥–µ—Ä–∞; –ø–æ –ø–ª–∞–Ω—É, —Ä–∞—Å–ø—É—Å–∫–∞—Ç—å –≥—Ä—É–ø–ø—É –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ –ª–∏–¥–µ—Ä –∏–ª–∏ –∞–¥–º–∏–Ω.
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (TODO –∏ –ù–µ–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `/party join`):** –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≥—Ä—É–ø–ø—ã, –ø–æ–ª–∏—Ç–∏–∫—É –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–π (`invite_policy`) –∏ —Ç.–¥. –∏–∑ `RuleConfig`.

### Task 1.3: Movement Logic (Player/Party, Guild-Scoped)
-   **–§–∞–π–ª:** `backend/core/movement_logic.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–µ–ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è `execute_move_for_player_action`):**
        -   –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä–æ–∫–∞/–ø–∞—Ä—Ç–∏–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ–º (—Å–æ–≥–ª–∞—Å–Ω–æ `RuleConfig movement:allowed_player_statuses`).
        -   –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏–π —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–∑ `connection_details.get("conditions_json")` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `requires_item_static_id`, `requires_quest_status`).
        -   –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–≥–∏–∫–∞ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ (–≤—Ä–µ–º—è, —Ä–µ—Å—É—Ä—Å—ã –∏–∑ `RuleConfig movement:costs`).
        -   –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤—ã–∑–æ–≤ `check_resolver` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞–≤—ã–∫–æ–≤ –ø—Ä–∏ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–∏ (—Å–æ–≥–ª–∞—Å–Ω–æ `RuleConfig movement:checks`).
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (TODO):** –í `_find_location_by_identifier()` —É–ª—É—á—à–∏—Ç—å –ø–æ–∏—Å–∫ –ª–æ–∫–∞—Ü–∏–∏ –ø–æ –∏–º–µ–Ω–∏, —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–≤ –¥—Ä—É–≥–∏–µ –∫–ª—é—á–∏ –≤ `name_i18n`.
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (TODO):** –†–∞—Å—à–∏—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É `party:movement:policy` –≤ `execute_move_for_player_action`.
-   **–§–∞–π–ª:** `backend/core/game_events.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–ó–∞–≥–ª—É—à–∫–∞):** –§—É–Ω–∫—Ü–∏—è `on_enter_location()` —è–≤–ª—è–µ—Ç—Å—è –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä–æ–º.

### Task 2.1: Finalize Definition of ALL DB Schemas (i18n, Guild ID)
-   **–§–∞–π–ª:** `backend/models/generated_faction.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—è `name_i18n`, `description_i18n`, `ideology_i18n` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `JSON` –≤–º–µ—Å—Ç–æ `JsonBForSQLite`.
-   **–§–∞–π–ª:** `backend/models/generated_npc.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—è `name_i18n`, `description_i18n`, `npc_type_i18n` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `JSON` –≤–º–µ—Å—Ç–æ `JsonBForSQLite`.
-   **–§–∞–π–ª:** `backend/models/global_event.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—è `name_i18n`, `description_i18n`, `properties_json` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `JSON` –≤–º–µ—Å—Ç–æ `JsonBForSQLite`.
-   **–§–∞–π–ª:** `backend/models/global_npc.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—è `name_i18n`, `description_i18n`, `properties_json` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `JSON` –≤–º–µ—Å—Ç–æ `JsonBForSQLite`.
-   **–§–∞–π–ª:** `backend/models/item.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—è `name_i18n`, `description_i18n`, `item_type_i18n`, `item_category_i18n`, `properties_json` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `JSON` –≤–º–µ—Å—Ç–æ `JsonBForSQLite`.
-   **–§–∞–π–ª:** `backend/models/pending_generation.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—è `trigger_context_json`, `parsed_validated_data_json`, `validation_issues_json` –∏—Å–ø–æ–ª—å–∑—É—é—Ç `JSON` –≤–º–µ—Å—Ç–æ `JsonBForSQLite`.

### Task 2.2: AI Prompt Preparation Module
-   **–§–∞–π–ª:** `backend/core/ai_prompt_builder.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç –ø–ª–∞–Ω–∞):** –í–º–µ—Å—Ç–æ –µ–¥–∏–Ω–æ–π API —Ñ—É–Ω–∫—Ü–∏–∏ `prepare_ai_prompt` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (`prepare_location_generation_prompt`, `prepare_dialogue_generation_prompt` –∏ —Ç.–¥.). –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –ø—Ä–∏–µ–º–ª–µ–º—ã–º –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –∏–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏—Ç—å –∫ –µ–¥–∏–Ω–æ–º—É API.
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–ù–µ–ø–æ–ª–Ω–æ—Ç–∞):** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —è–≤–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è "—Å–ª–æ–≤–∞—Ä—è –∏–≥—Ä–æ–≤—ã—Ö —Ç–µ—Ä–º–∏–Ω–æ–≤" –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ AI, —Ö–æ—Ç—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è.

### Task 2.3: AI Response Parsing and Validation Module
-   **–§–∞–π–ª:** `backend/core/ai_response_parser.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–µ–ø–æ–ª–Ω–æ—Ç–∞ `_perform_semantic_validation`):**
        -   –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ç–∏–≤ `RuleConfig` (–Ω–∞–ø—Ä–∏–º–µ—Ä, –±–∞–ª–∞–Ω—Å NPC/–ø—Ä–µ–¥–º–µ—Ç–æ–≤, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–≤–µ—Å—Ç–æ–≤).
        -   –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ NPC-–∫–≤–µ—Å—Ç–æ–¥–∞—Ç–µ–ª—è –≤ –ë–î).
        -   –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ `static_id` –≤ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–º –±–∞—Ç—á–µ.
        -   –ü—Ä–æ–≤–µ—Ä–∫–∞ i18n –ø–æ–ª–µ–π –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `GuildConfig.supported_languages_json` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —è–∑—ã–∫–æ–≤.
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–û—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç –ø–ª–∞–Ω–∞):** –î–ª—è –æ—Ç—á–µ—Ç–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `CustomValidationError`, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫.
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ):** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –∞–≤—Ç–æ–∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –æ—à–∏–±–æ–∫.

### Task 2.6: AI Generation, Moderation, and Saving Logic
-   **–§–∞–π–ª:** `backend/core/ai_orchestrator.py`
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–ù–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∞ `trigger_ai_generation_flow`):** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ú–∞—Å—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ Discord (`GuildConfig.notification_channel_id`) –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ `PendingGeneration`.
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–°—É—â–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –Ω–µ–ø–æ–ª–Ω–æ—Ç–∞ `save_approved_generation`):**
        -   –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–æ–ª—å–∫–æ —Å—É—â–Ω–æ—Å—Ç–∏ —Ç–∏–ø–∞ `GeneratedNpc` –∏ `Item`. –õ–æ–≥–∏–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ (`ParsedQuestData`, `ParsedFactionData`, `ParsedLocationData` –∏ —Ç.–¥.) –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
        -   –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –±–∞—Ç—á–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, NPC –∫–∞–∫ –∫–≤–µ—Å—Ç–æ–¥–∞—Ç–µ–ª—å –¥–ª—è –∫–≤–µ—Å—Ç–∞ –∏–∑ —Ç–æ–≥–æ –∂–µ –±–∞—Ç—á–∞).
        -   –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö —Å—Å—ã–ª–æ–∫ –ø–æ `static_id` –Ω–∞ `db_id` –ø—Ä–∏ –ø–∞–∫–µ—Ç–Ω–æ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏.
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ Post-Save Actions):** –ù–µ—Ç –ª–æ–≥–∏–∫–∏ –¥–ª—è —Å–±—Ä–æ—Å–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä–æ–∫–∞ (`AWAITING_MODERATION`) –∏–ª–∏ –≤—ã–∑–æ–≤–∞ –∏–≥—Ä–æ–≤—ã—Ö —Ö—É–∫–æ–≤ (`on_enter_location`, `on_new_entities_created`) –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞.
-   **–§–∞–π–ª:** –∫–æ–º–∞–Ω–¥—ã –º–æ–¥–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `backend/bot/commands/master_commands/pending_generation_master_commands.py`)
    -   **–ü—Ä–æ–±–ª–µ–º–∞ (–ú–µ–ª–∫–∞—è –Ω–µ–¥–æ—Ä–∞–±–æ—Ç–∫–∞):** –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —è–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ `/master_pending_generation reject` (—Ö–æ—Ç—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ `/update ... new_status=REJECTED`).
