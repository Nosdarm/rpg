## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è –∞–≥–µ–Ω—Ç–∞

1.  **–û–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏–µ —Å –∑–∞–¥–∞—á–∞–º–∏:** –í–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª `tasks` –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤—Å–µ–≥–æ –æ–±—ä–µ–º–∞ —Ä–∞–±–æ—Ç.
2.  **–í—ã–±–æ—Ä –∑–∞–¥–∞—á–∏:** –í–∑—è—Ç—å –æ–¥–Ω—É –∑–∞–¥–∞—á—É –∏–∑ —Ñ–∞–π–ª–∞ `tasks` –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.
3.  **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
    *   –°–æ–∑–¥–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏.
    *   –ó–∞–ø–∏—Å–∞—Ç—å –ø–ª–∞–Ω –≤ `AGENTS.md` –≤ —Å–µ–∫—Ü–∏—é "–¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω".
4.  **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
    *   –ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏.
    *   –°–æ–∑–¥–∞—Ç—å –∏–ª–∏ –æ–±–Ω–æ–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∞–π–ª—ã.
    *   –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).
5.  **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π:**
    *   –ö–∞–∂–¥–æ–µ –∑–Ω–∞—á–∏–º–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (—Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞, –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∏ —Ç.–¥.) –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–∞–ø–∏—Å–∞–Ω–æ –≤ `AGENTS.md` –≤ —Å–µ–∫—Ü–∏—é "–õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π".
6.  **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏:**
    *   –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∑–∞–ø–∏—Å–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –≤ —Ñ–∞–π–ª `done.txt`.
    *   –£–¥–∞–ª–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –∏–∑ —Ñ–∞–π–ª–∞ `tasks`.
7.  **–ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ:** –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —à–∞–≥—É 2, –µ—Å–ª–∏ –≤ —Ñ–∞–π–ª–µ `tasks` –æ—Å—Ç–∞–ª–∏—Å—å –Ω–µ–≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏.
8.  **–û—Ç–ø—Ä–∞–≤–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π:** –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –∑–∞–¥–∞—á, –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –∫–æ–º–º–∏—Ç–æ–º.

## –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π

(–ó–¥–µ—Å—å –±—É–¥—É—Ç –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å—Å—è –¥–µ–π—Å—Ç–≤–∏—è)
- –ü–æ–ø—ã—Ç–∫–∞ —Å–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ (`src/bot`, `src/core`, `src/models`, `src/utils`, `src/config`, `tests/`) —Å –ø–æ–º–æ—â—å—é `mkdir`. (–ù–µ—É–¥–∞—á–Ω–æ, –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –Ω–µ —Å–æ–∑–¥–∞–ª–∏—Å—å).
- –ü—Ä–∏–Ω—è—Ç–æ —Ä–µ—à–µ–Ω–∏–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é, —Ç–∞–∫ –∫–∞–∫ `create_file_with_block` –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.
- –°–æ–∑–¥–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞:
    - `src/main.py`
    - `src/bot/core.py`
    - `src/bot/events.py`
    - `src/bot/commands.py`
    - `src/config/settings.py`
    - `requirements.txt`
    - `.gitignore`
    - `src/bot/__init__.py`
    - `src/config/__init__.py`
    - `src/__init__.py`
    - `tests/__init__.py`
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/core/`, `src/models/`, `src/utils/` –ø–æ–∫–∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ñ–∞–π–ª–æ–≤, –Ω–æ –ø—É—Ç–∏ –¥–ª—è –Ω–∏—Ö —Å—É—â–µ—Å—Ç–≤—É—é—Ç –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–æ–∑–¥–∞–Ω–∏—é `src/__init__.py` –∏ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤ –≤ `src/`. –û–Ω–∏ –±—É–¥—É—Ç –Ω–∞–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–¥–∞—á.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `BotCore` –≤ `src/bot/core.py`:
    - –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `__init__` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `command_prefix` –∏ `intents`.
    - –ú–µ—Ç–æ–¥ `setup_hook` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π (–∫–æ–≥–æ–≤).
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–≥–æ–≤ `bot.events` –∏ `bot.commands` —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –≤–æ–∑–º–æ–∂–Ω—ã—Ö –æ—à–∏–±–æ–∫.
    - –ú–µ—Ç–æ–¥ `on_ready` –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –±–æ—Ç–∞ –∏ —Å–µ—Ä–≤–µ—Ä–∞—Ö.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π Discord –≤ `src/bot/events.py` –≤ –≤–∏–¥–µ `EventCog`:
    - `on_ready`: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
    - `on_message`: –ë–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (–∏–≥–Ω–æ—Ä —Å–∞–º–æ–≥–æ —Å–µ–±—è).
    - `on_guild_join`: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.
    - `on_guild_remove`: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
    - `on_command_error`: –ë–∞–∑–æ–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫ –∫–æ–º–∞–Ω–¥.
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/ping` (—Ç–µ–∫—Å—Ç–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞, –ø—Ä–µ—Ñ–∏–∫—Å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏) –≤ `src/bot/commands.py` –≤ –≤–∏–¥–µ `CommandCog`:
    - –ö–æ–º–∞–Ω–¥–∞ `ping_command` –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫–æ–π –±–æ—Ç–∞.
    - –í–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–∑–æ–≤–∞ –∫–æ–º–∞–Ω–¥—ã.
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:
    - –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `logging.basicConfig` –≤ `src/main.py`.
    - –§–æ—Ä–º–∞—Ç –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è: `%(asctime)s:%(levelname)s:%(name)s: %(message)s`.
    - –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–ø–µ—Ä—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `LOG_LEVEL` –≤ `src/config/settings.py` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é INFO).
- –ó–∞–¥–∞—á–∞ 0.1 (Discord Bot Project Initialization and Basic Guild Integration) –∑–∞–ø–∏—Å–∞–Ω–∞ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –≤ `Done.txt`.
- –ó–∞–¥–∞—á–∞ 0.1 —É–¥–∞–ª–µ–Ω–∞ –∏–∑ —Ñ–∞–π–ª–∞ `Tasks.txt`.
- **–ó–∞–¥–∞—á–∞ 0.2 –®–∞–≥ 1: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –±–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å `GuildConfig`**
    - –°–æ–∑–¥–∞–Ω `src/models/base.py` —Å –∫–ª–∞—Å—Å–æ–º `Base(AsyncAttrs, DeclarativeBase)`.
    - –°–æ–∑–¥–∞–Ω `src/models/guild.py` —Å –º–æ–¥–µ–ª—å—é `GuildConfig`, –≤–∫–ª—é—á–∞—é—â–µ–π –ø–æ–ª—è: `id` (PK, BigInteger), `master_channel_id` (BigInteger, nullable), `system_channel_id` (BigInteger, nullable), `notification_channel_id` (BigInteger, nullable), `main_language` (Text, default 'en').
    - –°–æ–∑–¥–∞–Ω `src/models/__init__.py` –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ `Base` –∏ –º–æ–¥–µ–ª–µ–π (–ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ `GuildConfig`), —á—Ç–æ–±—ã Alembic –º–æ–≥ –∏—Ö –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å.
- **–ó–∞–¥–∞—á–∞ 0.2 –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω `requirements.txt`**
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `SQLAlchemy>=2.0.20`, `asyncpg>=0.27.0`, `alembic>=1.11.0`.
- **–ó–∞–¥–∞—á–∞ 0.2 –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î –≤ `src/config/settings.py`**
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è: `DB_TYPE`, `DB_USER`, `DB_PASSWORD`, `DB_HOST`, `DB_PORT`, `DB_NAME` —Å –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
    - –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ç—Ä–æ–∫–∞ `DATABASE_URL` –¥–ª—è `postgresql+asyncpg`.
    - –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –ë–î.
    - –û–±–Ω–æ–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä `.env` —Ñ–∞–π–ª–∞.
- **–ó–∞–¥–∞—á–∞ 0.2 –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `src/core/database.py` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î**
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π `engine` SQLAlchemy.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ–∞–±—Ä–∏–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π `AsyncSessionLocal`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä `get_db_session` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º commit/rollback/close.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `init_db` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π (–¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏).
    - –°–æ–∑–¥–∞–Ω `src/core/__init__.py`.
- **–ó–∞–¥–∞—á–∞ 0.2 –®–∞–≥ 5: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ `init_db` –≤ `src/main.py`**
    - `init_db()` —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `main()` –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –±–æ—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü, –µ—Å–ª–∏ –æ–Ω–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –Ω–∞ —Å–ª—É—á–∞–π –ø—Ä–æ–±–ª–µ–º —Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π –ë–î.
- **–ó–∞–¥–∞—á–∞ 0.2 –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–µ–Ω Alembic –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏—è–º–∏**
    - –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `pip install -r requirements.txt` –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –≤–∫–ª—é—á–∞—è `alembic`.
    - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω Alembic (`alembic init alembic`).
    - –ù–∞—Å—Ç—Ä–æ–µ–Ω `alembic.ini`: `sqlalchemy.url` —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –±—Ä–∞—Ç—å—Å—è –∏–∑ `env.py`.
    - –ù–∞—Å—Ç—Ä–æ–µ–Ω `alembic/env.py`:
        - –î–æ–±–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ `src` –≤ `sys.path`.
        - –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω `DATABASE_URL` –∏–∑ `src.config.settings` –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–∞–∫ `sqlalchemy.url`.
        - `target_metadata` —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ `Base.metadata` –∏–∑ `src.models`.
        - –§—É–Ω–∫—Ü–∏—è `run_migrations_online` –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –¥–≤–∏–∂–∫–æ–º SQLAlchemy.
    - –°–æ–∑–¥–∞–Ω–∞ –ø–µ—Ä–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è `alembic/versions/init_0001_create_guild_configs_table.py` –≤—Ä—É—á–Ω—É—é –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã `guild_configs` –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –ë–î –≤ —Å—Ä–µ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏. –ò–Ω–¥–µ–∫—Å –¥–ª—è `id` —Å–¥–µ–ª–∞–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–º.
- **–ó–∞–¥–∞—á–∞ 0.2 (DBMS Setup and Database Model Definition with Guild ID) –∑–∞–ø–∏—Å–∞–Ω–∞ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–∞—è –≤ `Done.txt`**.
- **–ó–∞–¥–∞—á–∞ 0.2 —É–¥–∞–ª–µ–Ω–∞ –∏–∑ —Ñ–∞–π–ª–∞ `Tasks.txt`**.
- **–ó–∞–¥–∞—á–∞ 0.3 –®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –ó–∞–¥–∞—á–µ 0.3** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è: –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ë–î —Å —É—á–µ—Ç–æ–º –≥–∏–ª—å–¥–∏–∏, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏ ORM, –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, CRUD-—É—Ç–∏–ª–∏—Ç—ã, –º–æ–¥–µ–ª—å RuleConfig –∏ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–µ–π (–≤–∫–ª—é—á–∞—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ).
- **–ó–∞–¥–∞—á–∞ 0.3 –®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `RuleConfig`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/models/rule_config.py` —Å –º–æ–¥–µ–ª—å—é `RuleConfig`.
    - –ú–æ–¥–µ–ª—å –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª—è: `id` (PK), `guild_id` (FK –∫ `GuildConfig`), `key` (TEXT), `value_json` (JSONB).
    - –î–æ–±–∞–≤–ª–µ–Ω —Å–æ—Å—Ç–∞–≤–Ω–æ–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è (`guild_id`, `key`).
    - –û–±–Ω–æ–≤–ª–µ–Ω `src/models/__init__.py` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è `RuleConfig`.
- **–ó–∞–¥–∞—á–∞ 0.3 –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è Alembic –¥–ª—è `RuleConfig`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ `alembic/versions/0002_create_rule_configs_table.py`.
    - –ú–∏–≥—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `rule_configs` —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏, –∏–Ω–¥–µ–∫—Å–∞–º–∏ –∏ –≤–Ω–µ—à–Ω–∏–º –∫–ª—é—á–æ–º.
- **–ó–∞–¥–∞—á–∞ 0.3 –®–∞–≥ 4: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@transactional`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –í `src/core/database.py` –¥–æ–±–∞–≤–ª–µ–Ω –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä `@transactional`.
    - –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `get_db_session` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã–º —Ü–∏–∫–ª–æ–º —Å–µ—Å—Å–∏–∏ (commit, rollback, close) –∏ –≤–Ω–µ–¥—Ä—è–µ—Ç —Å–µ—Å—Å–∏—é –≤ –¥–µ–∫–æ—Ä–∏—Ä—É–µ–º—É—é —Ñ—É–Ω–∫—Ü–∏—é.
- **–ó–∞–¥–∞—á–∞ 0.3 –®–∞–≥ 5: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –æ–±—â–∏–µ CRUD-—É—Ç–∏–ª–∏—Ç—ã** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/core/crud.py`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–ª–∞—Å—Å `CRUDBase[ModelType]` —Å –º–µ—Ç–æ–¥–∞–º–∏: `create`, `get`, `get_multi`, `update`, `delete`, `get_by_attribute`, `get_multi_by_attribute`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –æ–±—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏: `create_entity`, `get_entity_by_id`, `update_entity`, `delete_entity`, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–µ `CRUDBase`.
    - –£—Ç–∏–ª–∏—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç `guild_id` –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –º–æ–¥–µ–ª—è–º–∏, –∏–º–µ—é—â–∏–º–∏ —ç—Ç–æ –ø–æ–ª–µ.
    - –û–±–Ω–æ–≤–ª–µ–Ω `src/core/__init__.py` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥—É–ª—è `crud`.
- **–ó–∞–¥–∞—á–∞ 0.3 –®–∞–≥ 6: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è `RuleConfig`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `src/core/rules.py`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏: `load_rules_config_for_guild` (–∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª –≥–∏–ª—å–¥–∏–∏), `get_rule` (–ø–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ –∫–µ—à–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏), `update_rule_config` (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ/—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ –ë–î –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–µ—à–∞), `get_all_rules_for_guild` (–ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø—Ä–∞–≤–∏–ª –≥–∏–ª—å–¥–∏–∏ –∏–∑ –∫–µ—à–∞).
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Å—Ç–æ–π –≤–Ω—É—Ç—Ä–∏–ø—Ä–æ—Ü–µ—Å—Å–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∞–≤–∏–ª (`_rules_cache`).
    - –û–±–Ω–æ–≤–ª–µ–Ω `src/core/__init__.py` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥—É–ª—è `rules`.
- **–ó–∞–¥–∞—á–∞ 1.1 –®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –¥–ª—è Location Model** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–æ–ª—è –º–æ–¥–µ–ª–∏ `Location` (guild_id, static_id, i18n –ø–æ–ª—è, JSONB –ø–æ–ª—è), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å ENUM –¥–ª—è —Ç–∏–ø–∞ –ª–æ–∫–∞—Ü–∏–∏, –∏ —É—Ç–∏–ª–∏—Ç—ã (`get_location`, `get_static_location_id`, `get_localized_text`).
- **–ó–∞–¥–∞—á–∞ 1.1 –®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `Location`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω `src/models/location.py` —Å –º–æ–¥–µ–ª—å—é `Location` –∏ enum `LocationType`.
    - –í–∫–ª—é—á–µ–Ω—ã –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è, JSONB –¥–ª—è i18n –∏ –¥—Ä—É–≥–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, ForeignKey –∫ `guild_configs`.
    - –î–æ–±–∞–≤–ª–µ–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è `(guild_id, static_id)`.
- **–ó–∞–¥–∞—á–∞ 1.1 –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω `src/models/__init__.py`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –ú–æ–¥–µ–ª—å `Location` –∏ enum `LocationType` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∏–º–ø–æ—Ä—Ç—ã –∏ –ª–æ–≥–≥–µ—Ä –≤ `src/models/__init__.py`.
- **–ó–∞–¥–∞—á–∞ 1.1 –®–∞–≥ 4: –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è Alembic –¥–ª—è `Location`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ `alembic/versions/0003_create_locations_table.py`.
    - –ú–∏–≥—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `locations`, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤, –≤–Ω–µ—à–Ω–µ–≥–æ –∫–ª—é—á–∞, –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É ENUM —Ç–∏–ø–∞ `locationtype`.
- **–ó–∞–¥–∞—á–∞ 1.1 –®–∞–≥ 5: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –±–∞–∑–æ–≤—ã–µ CRUD-—Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è `Location`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω `src/core/crud/crud_location.py` —Å –∫–ª–∞—Å—Å–æ–º `CRUDLocation(CRUDBase[Location])`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –º–µ—Ç–æ–¥—ã `get_by_static_id` –∏ `get_locations_by_type`.
    - –°–æ–∑–¥–∞–Ω `src/core/crud/__init__.py` –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ `location_crud`.
- **–ó–∞–¥–∞—á–∞ 1.1 –®–∞–≥ 6: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —É—Ç–∏–ª–∏—Ç—ã `get_location` –∏ `get_static_location_id`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω `src/core/locations_utils.py`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ `get_location` (–æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ `location_crud.get`) –∏ `get_location_by_static_id` (–æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ `location_crud.get_by_static_id`).
    - –û–±–Ω–æ–≤–ª–µ–Ω `src/core/__init__.py` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è `locations_utils`.
- **–ó–∞–¥–∞—á–∞ 1.1 –®–∞–≥ 7: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –§—É–Ω–∫—Ü–∏—è `get_localized_text` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ `src/core/locations_utils.py`.
    - –£—Ç–∏–ª–∏—Ç–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–∏—Å–∫ –ø–æ —è–∑—ã–∫—É, fallback-—è–∑—ã–∫—É, –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–≤—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –∏–ª–∏ –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.
- **–ó–∞–¥–∞—á–∞ 1.1 –®–∞–≥ 8: –û–±–Ω–æ–≤–ª–µ–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `on_guild_join`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –í `src/bot/events.py` –æ–±–Ω–æ–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `on_guild_join` –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `_ensure_guild_config_exists` –∏ `_populate_default_locations`.
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–∏ `GuildConfig` (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç) –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∞–≤–∏–ª–∞ `guild_main_language` —á–µ—Ä–µ–∑ `update_rule_config`.
    - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–µ—Ñ–æ–ª—Ç–Ω—ã—Ö —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–π (`DEFAULT_STATIC_LOCATIONS`) –¥–ª—è –Ω–æ–≤–æ–π –≥–∏–ª—å–¥–∏–∏, –µ—Å–ª–∏ –æ–Ω–∏ –µ—â–µ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç.
    - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `get_db_session` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–µ–π –ë–î.
- **–ó–∞–¥–∞—á–∞ 1.2 –®–∞–≥ 1: –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –¥–ª—è Player and Party System** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –º–æ–¥–µ–ª–∏ Player –∏ Party, –∏—Ö –ø–æ–ª—è, Enum-—Ç–∏–ø—ã –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤, –ª–æ–≥–∏–∫–∞ –∫–æ–º–∞–Ω–¥ `/start` –∏ `/party`, –∞ —Ç–∞–∫–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Ç–∏–ª–∏—Ç—ã.
    - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è —Ç–∏–ø–∞ –¥–ª—è `get_db_session` –≤ `src/core/database.py`.
- **–ó–∞–¥–∞—á–∞ 1.2 –®–∞–≥ 2: –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã Enum'—ã `PlayerStatus` –∏ `PartyTurnStatus`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω `src/models/enums.py` —Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º–∏ `PlayerStatus` –∏ `PartyTurnStatus`.
    - `src/models/__init__.py` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Ö —ç–∫—Å–ø–æ—Ä—Ç–∞.
- **–ó–∞–¥–∞—á–∞ 1.2 –®–∞–≥ 3: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `Player`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω `src/models/player.py` —Å –º–æ–¥–µ–ª—å—é `Player`.
    - –í–∫–ª—é—á–µ–Ω—ã –≤—Å–µ –ø–æ–ª—è, FK, UniqueConstraint(`guild_id`, `discord_id`), Enum `PlayerStatus`, –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ `Location` –∏ `Party`.
- **–ó–∞–¥–∞—á–∞ 1.2 –®–∞–≥ 4: –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `Party`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω `src/models/party.py` —Å –º–æ–¥–µ–ª—å—é `Party`.
    - –í–∫–ª—é—á–µ–Ω—ã –≤—Å–µ –ø–æ–ª—è, FK, Enum `PartyTurnStatus`, JSON-–ø–æ–ª–µ `player_ids_json`, –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ `Location` –∏ `Player`.
- **–ó–∞–¥–∞—á–∞ 1.2 –®–∞–≥ 5: –û–±–Ω–æ–≤–ª–µ–Ω `src/models/__init__.py`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –ú–æ–¥–µ–ª–∏ `Player` –∏ `Party` –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –∏–º–ø–æ—Ä—Ç—ã `src/models/__init__.py`.
- **–ó–∞–¥–∞—á–∞ 1.2 –®–∞–≥ 6: –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è Alembic –¥–ª—è `Player` –∏ `Party`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏ `alembic/versions/0004_create_players_and_parties_tables.py`.
    - –ú–∏–≥—Ä–∞—Ü–∏—è –≤–∫–ª—é—á–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü `parties` –∏ `players`, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö ENUM-—Ç–∏–ø–æ–≤, –∏–Ω–¥–µ–∫—Å–æ–≤, FK –∏ UniqueConstraint.
- **–ó–∞–¥–∞—á–∞ 1.2 –®–∞–≥ 7: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã CRUD-–∫–ª–∞—Å—Å—ã `CRUDPlayer` –∏ `CRUDParty`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω—ã `src/core/crud/crud_player.py` –∏ `src/core/crud/crud_party.py`.
    - `CRUDPlayer` –≤–∫–ª—é—á–∞–µ—Ç `get_by_discord_id`, `get_multi_by_location`, `get_multi_by_party_id`, `create_with_defaults`.
    - `CRUDParty` –≤–∫–ª—é—á–∞–µ—Ç `get_by_name`, `add_player_to_party_json`, `remove_player_from_party_json`.
    - `src/core/crud/__init__.py` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Ö —ç–∫—Å–ø–æ—Ä—Ç–∞.
- **–ó–∞–¥–∞—á–∞ 1.2 –®–∞–≥ 8: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è Player –∏ Party** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω `src/core/player_utils.py` (—Å `get_player`, `get_player_by_discord_id`, `get_players_in_location`, `get_players_in_party`).
    - –°–æ–∑–¥–∞–Ω `src/core/party_utils.py` (—Å `get_party`, `get_party_by_name`).
    - `src/core/__init__.py` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Ö —ç–∫—Å–ø–æ—Ä—Ç–∞.
- **–ó–∞–¥–∞—á–∞ 1.2 –®–∞–≥ 9: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `/start`** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –ö–æ–º–∞–Ω–¥–∞ `/start` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ `src/bot/commands.py` (–≤ `CommandCog`).
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞, —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ —Å –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π –ª–æ–∫–∞—Ü–∏–µ–π –∏ –Ω–∞—á–∞–ª—å–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.
- **–ó–∞–¥–∞—á–∞ 1.2 –®–∞–≥ 10: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã –¥–ª—è Party** (–í—ã–ø–æ–ª–Ω–µ–Ω–æ)
    - –°–æ–∑–¥–∞–Ω `src/bot/commands/party_commands.py` —Å `PartyCog`.
    - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–æ–º–∞–Ω–¥—ã: `/party create <–Ω–∞–∑–≤–∞–Ω–∏–µ>`, `/party leave`, `/party disband`.
    - `src/bot/core.py` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ `party_commands` Cog.

## –¢–µ–∫—É—â–∏–π –ø–ª–∞–Ω

–ó–∞–¥–∞—á–∞ "üåç 1.2 Player and Party System (ORM, Commands, Guild-Scoped)" –∑–∞–≤–µ—Ä—à–µ–Ω–∞.
–°–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞ —Å–æ–≥–ª–∞—Å–Ω–æ `Tasks.txt`: "üåç 1.3 Movement Logic (Player/Party, Guild-Scoped). (4, 5, 0.3, 14)"

1.  **–ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ó–∞–¥–∞—á–∏ 1.3 (Movement Logic):**
    *   API —Ñ—É–Ω–∫—Ü–∏—è: `handle_move_action(guild_id: int, player_id: int, target_location_identifier: str)`.
        *   –ü—Ä–∏–Ω–∏–º–∞–µ—Ç `guild_id`.
        *   –ó–∞–≥—Ä—É–∂–∞–µ—Ç `Player` (—Å `guild_id`).
        *   –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é –ª–æ–∫–∞—Ü–∏—é –∏ —Ü–µ–ª–µ–≤—É—é –ª–æ–∫–∞—Ü–∏—é (`target_location_identifier` –º–æ–∂–µ—Ç –±—ã—Ç—å `static_id` –∏–ª–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∏–º–µ–Ω–µ–º).
        *   –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–≤—è–∑–∏ –º–µ–∂–¥—É –ª–æ–∫–∞—Ü–∏—è–º–∏ (–∏–∑ `Location.neighbor_locations_json`).
        *   –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –≤ –≥—Ä—É–ø–ø–µ: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –¥–≤–∏–∂–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã (–∏–∑ `RuleConfig`).
        *   –í –û–î–ù–û–ô –¢–†–ê–ù–ó–ê–ö–¶–ò–ò (0.3), –æ–ø–µ—Ä–∏—Ä—É—è –¢–û–õ–¨–ö–û –î–ê–ù–ù–´–ú–ò –í–ù–£–¢–†–ò `guild_id`:
            *   –û–±–Ω–æ–≤–ª—è–µ—Ç –ª–æ–∫–∞—Ü–∏—é –∏–≥—Ä–æ–∫–∞ (–∏ –≥—Ä—É–ø–ø—ã, –µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ).
            *   –õ–æ–≥–∏—Ä—É–µ—Ç —Å–æ–±—ã—Ç–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è (19) –° –≠–¢–ò–ú `guild_id`.
        *   –ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç `on_enter_location(guild_id, entity_id, entity_type, target_location_id)` (14 - —ç—Ç–æ –¥—Ä—É–≥–∞—è –∑–∞–¥–∞—á–∞, –ø–æ–∫–∞ —á—Ç–æ –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ –∑–∞–≥–ª—É—à–∫—É –∏–ª–∏ –ª–æ–≥).
    *   MVP: –°–≤—è–∑–∞—Ç—å —Å –∫–æ–º–∞–Ω–¥–æ–π `/move`. NLU (10/12) –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å `guild_id`.
2.  **–°–æ–∑–¥–∞—Ç—å API —Ñ—É–Ω–∫—Ü–∏—é `handle_move_action`** –≤ –Ω–æ–≤–æ–º —Ñ–∞–π–ª–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, `src/core/movement_logic.py`.
    *   –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `get_db_session` –∏ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏.
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –ø–æ–∏—Å–∫–∞ —Ç–µ–∫—É—â–µ–π –∏ —Ü–µ–ª–µ–≤–æ–π –ª–æ–∫–∞—Ü–∏–∏ (—Å–Ω–∞—á–∞–ª–∞ –ø–æ `static_id`).
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É `Location.neighbor_locations_json`.
    *   –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `Player.current_location_id`. –ï—Å–ª–∏ –∏–≥—Ä–æ–∫ –≤ –ø–∞—Ä—Ç–∏–∏, —Ç–æ –æ–±–Ω–æ–≤–∏—Ç—å –∏ `Party.current_location_id`.
    *   –û–±–µ—Ä–Ω—É—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@transactional`).
3.  **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `/move <target_location_static_id>`** –≤ `src/bot/commands/general_commands.py` (–∏–ª–∏ –≤ –Ω–æ–≤–æ–º Cog `movement_commands.py`).
    *   –ö–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å `handle_move_action`.
    *   –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (—É—Å–ø–µ—Ö, –æ—à–∏–±–∫–∞, –Ω–µ—Ç –ø—É—Ç–∏ –∏ —Ç.–¥.).
4.  **–ü—Ä–æ–¥—É–º–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –¥–≤–∏–∂–µ–Ω–∏—è –¥–ª—è –≥—Ä—É–ø–ø—ã** (RuleConfig):
    *   –ö–∞–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –º–æ–≥—É—Ç –±—ã—Ç—å? (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–≤—Å–µ –¥–æ–ª–∂–Ω—ã —Å–æ–≥–ª–∞—Å–∏—Ç—å—Å—è", "–ª–∏–¥–µ—Ä —Ä–µ—à–∞–µ—Ç", "–ª—é–±–æ–π –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å").
    *   –î–ª—è MVP –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç–æ: –µ—Å–ª–∏ –∏–≥—Ä–æ–∫ –≤ –≥—Ä—É–ø–ø–µ, —Ç–æ –≤—Å—è –≥—Ä—É–ø–ø–∞ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è.
5.  **–ó–∞–≥–ª—É—à–∫–∞ –¥–ª—è `on_enter_location`**:
    *   –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—É—é async —Ñ—É–Ω–∫—Ü–∏—é `on_enter_location(guild_id, entity_id, entity_type, location_id)` –≤ `src/core/game_events.py` (–Ω–æ–≤—ã–π —Ñ–∞–π–ª) –∏ –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—ã–∑–æ–≤.
6.  **–û–±–Ω–æ–≤–∏—Ç—å `AGENTS.md`**.
7.  **–ó–∞–ø–∏—Å–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –≤ `Done.txt`**.
8.  **–£–¥–∞–ª–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –∏–∑ `Tasks.txt`**.
